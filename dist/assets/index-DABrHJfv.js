import{initializeApp as Fw}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";import{getFirestore as Jw,doc as Ae,updateDoc as Jt,serverTimestamp as Ma,collection as et,limit as Oa,where as Rt,orderBy as kn,startAfter as iy,query as wt,getDocs as Xl,onSnapshot as gn,documentId as Rl,getDoc as An,arrayUnion as qd,startAt as Kw,endAt as Yw,runTransaction as Xw,increment as Qw,setDoc as Il,addDoc as Ml,or as Ww,deleteDoc as Og}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";import{getStorage as Zw}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js";import{getAuth as e_,setPersistence as t_,browserLocalPersistence as n_,createUserWithEmailAndPassword as i_,signInWithEmailAndPassword as sy,sendEmailVerification as s_,EmailAuthProvider as r_,reauthenticateWithCredential as a_,verifyBeforeUpdateEmail as o_,onAuthStateChanged as l_,signOut as c_}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}})();function u_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ed={exports:{}},Ea={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function d_(){if(Lg)return Ea;Lg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:t,type:r,key:u,ref:a!==void 0?a:null,props:l}}return Ea.Fragment=e,Ea.jsx=i,Ea.jsxs=i,Ea}var Pg;function f_(){return Pg||(Pg=1,Ed.exports=d_()),Ed.exports}var d=f_(),Td={exports:{}},Ta={},Nd={exports:{}},Cd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function h_(){return zg||(zg=1,(function(t){function e(H,Z){var ie=H.length;H.push(Z);e:for(;0<ie;){var ve=ie-1>>>1,De=H[ve];if(0<a(De,Z))H[ve]=Z,H[ie]=De,ie=ve;else break e}}function i(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Z=H[0],ie=H.pop();if(ie!==Z){H[0]=ie;e:for(var ve=0,De=H.length,U=De>>>1;ve<U;){var X=2*(ve+1)-1,ne=H[X],oe=X+1,xe=H[oe];if(0>a(ne,ie))oe<De&&0>a(xe,ne)?(H[ve]=xe,H[oe]=ie,ve=oe):(H[ve]=ne,H[X]=ie,ve=X);else if(oe<De&&0>a(xe,ie))H[ve]=xe,H[oe]=ie,ve=oe;else break e}}return Z}function a(H,Z){var ie=H.sortIndex-Z.sortIndex;return ie!==0?ie:H.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var g=[],p=[],y=1,w=null,b=3,S=!1,E=!1,A=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function M(H){for(var Z=i(p);Z!==null;){if(Z.callback===null)r(p);else if(Z.startTime<=H)r(p),Z.sortIndex=Z.expirationTime,e(g,Z);else break;Z=i(p)}}function z(H){if(A=!1,M(H),!E)if(i(g)!==null)E=!0,O||(O=!0,ae());else{var Z=i(p);Z!==null&&ce(z,Z.startTime-H)}}var O=!1,j=-1,B=5,q=-1;function W(){return N?!0:!(t.unstable_now()-q<B)}function te(){if(N=!1,O){var H=t.unstable_now();q=H;var Z=!0;try{e:{E=!1,A&&(A=!1,k(j),j=-1),S=!0;var ie=b;try{t:{for(M(H),w=i(g);w!==null&&!(w.expirationTime>H&&W());){var ve=w.callback;if(typeof ve=="function"){w.callback=null,b=w.priorityLevel;var De=ve(w.expirationTime<=H);if(H=t.unstable_now(),typeof De=="function"){w.callback=De,M(H),Z=!0;break t}w===i(g)&&r(g),M(H)}else r(g);w=i(g)}if(w!==null)Z=!0;else{var U=i(p);U!==null&&ce(z,U.startTime-H),Z=!1}}break e}finally{w=null,b=ie,S=!1}Z=void 0}}finally{Z?ae():O=!1}}}var ae;if(typeof R=="function")ae=function(){R(te)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ee=K.port2;K.port1.onmessage=te,ae=function(){ee.postMessage(null)}}else ae=function(){C(te,0)};function ce(H,Z){j=C(function(){H(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(H){switch(b){case 1:case 2:case 3:var Z=3;break;default:Z=b}var ie=b;b=Z;try{return H()}finally{b=ie}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ie=b;b=H;try{return Z()}finally{b=ie}},t.unstable_scheduleCallback=function(H,Z,ie){var ve=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ve+ie:ve):ie=ve,H){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=ie+De,H={id:y++,callback:Z,priorityLevel:H,startTime:ie,expirationTime:De,sortIndex:-1},ie>ve?(H.sortIndex=ie,e(p,H),i(g)===null&&H===i(p)&&(A?(k(j),j=-1):A=!0,ce(z,ie-ve))):(H.sortIndex=De,e(g,H),E||S||(E=!0,O||(O=!0,ae()))),H},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(H){var Z=b;return function(){var ie=b;b=Z;try{return H.apply(this,arguments)}finally{b=ie}}}})(Cd)),Cd}var qg;function p_(){return qg||(qg=1,Nd.exports=h_()),Nd.exports}var Ad={exports:{}},_e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function m_(){if(Vg)return _e;Vg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),b=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=b&&U[b]||U["@@iterator"],typeof U=="function"?U:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,N={};function C(U,X,ne){this.props=U,this.context=X,this.refs=N,this.updater=ne||E}C.prototype.isReactComponent={},C.prototype.setState=function(U,X){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,X,"setState")},C.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function k(){}k.prototype=C.prototype;function R(U,X,ne){this.props=U,this.context=X,this.refs=N,this.updater=ne||E}var M=R.prototype=new k;M.constructor=R,A(M,C.prototype),M.isPureReactComponent=!0;var z=Array.isArray;function O(){}var j={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function q(U,X,ne){var oe=ne.ref;return{$$typeof:t,type:U,key:X,ref:oe!==void 0?oe:null,props:ne}}function W(U,X){return q(U.type,X,U.props)}function te(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function ae(U){var X={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ne){return X[ne]})}var K=/\/+/g;function ee(U,X){return typeof U=="object"&&U!==null&&U.key!=null?ae(""+U.key):X.toString(36)}function ce(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(O,O):(U.status="pending",U.then(function(X){U.status==="pending"&&(U.status="fulfilled",U.value=X)},function(X){U.status==="pending"&&(U.status="rejected",U.reason=X)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function H(U,X,ne,oe,xe){var Ee=typeof U;(Ee==="undefined"||Ee==="boolean")&&(U=null);var Ie=!1;if(U===null)Ie=!0;else switch(Ee){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(U.$$typeof){case t:case e:Ie=!0;break;case y:return Ie=U._init,H(Ie(U._payload),X,ne,oe,xe)}}if(Ie)return xe=xe(U),Ie=oe===""?"."+ee(U,0):oe,z(xe)?(ne="",Ie!=null&&(ne=Ie.replace(K,"$&/")+"/"),H(xe,X,ne,"",function(Dn){return Dn})):xe!=null&&(te(xe)&&(xe=W(xe,ne+(xe.key==null||U&&U.key===xe.key?"":(""+xe.key).replace(K,"$&/")+"/")+Ie)),X.push(xe)),1;Ie=0;var tt=oe===""?".":oe+":";if(z(U))for(var Ke=0;Ke<U.length;Ke++)oe=U[Ke],Ee=tt+ee(oe,Ke),Ie+=H(oe,X,ne,Ee,xe);else if(Ke=S(U),typeof Ke=="function")for(U=Ke.call(U),Ke=0;!(oe=U.next()).done;)oe=oe.value,Ee=tt+ee(oe,Ke++),Ie+=H(oe,X,ne,Ee,xe);else if(Ee==="object"){if(typeof U.then=="function")return H(ce(U),X,ne,oe,xe);throw X=String(U),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function Z(U,X,ne){if(U==null)return U;var oe=[],xe=0;return H(U,oe,"","",function(Ee){return X.call(ne,Ee,xe++)}),oe}function ie(U){if(U._status===-1){var X=U._result;X=X(),X.then(function(ne){(U._status===0||U._status===-1)&&(U._status=1,U._result=ne)},function(ne){(U._status===0||U._status===-1)&&(U._status=2,U._result=ne)}),U._status===-1&&(U._status=0,U._result=X)}if(U._status===1)return U._result.default;throw U._result}var ve=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},De={map:Z,forEach:function(U,X,ne){Z(U,function(){X.apply(this,arguments)},ne)},count:function(U){var X=0;return Z(U,function(){X++}),X},toArray:function(U){return Z(U,function(X){return X})||[]},only:function(U){if(!te(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return _e.Activity=w,_e.Children=De,_e.Component=C,_e.Fragment=i,_e.Profiler=a,_e.PureComponent=R,_e.StrictMode=r,_e.Suspense=g,_e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,_e.__COMPILER_RUNTIME={__proto__:null,c:function(U){return j.H.useMemoCache(U)}},_e.cache=function(U){return function(){return U.apply(null,arguments)}},_e.cacheSignal=function(){return null},_e.cloneElement=function(U,X,ne){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var oe=A({},U.props),xe=U.key;if(X!=null)for(Ee in X.key!==void 0&&(xe=""+X.key),X)!B.call(X,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&X.ref===void 0||(oe[Ee]=X[Ee]);var Ee=arguments.length-2;if(Ee===1)oe.children=ne;else if(1<Ee){for(var Ie=Array(Ee),tt=0;tt<Ee;tt++)Ie[tt]=arguments[tt+2];oe.children=Ie}return q(U.type,xe,oe)},_e.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},_e.createElement=function(U,X,ne){var oe,xe={},Ee=null;if(X!=null)for(oe in X.key!==void 0&&(Ee=""+X.key),X)B.call(X,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(xe[oe]=X[oe]);var Ie=arguments.length-2;if(Ie===1)xe.children=ne;else if(1<Ie){for(var tt=Array(Ie),Ke=0;Ke<Ie;Ke++)tt[Ke]=arguments[Ke+2];xe.children=tt}if(U&&U.defaultProps)for(oe in Ie=U.defaultProps,Ie)xe[oe]===void 0&&(xe[oe]=Ie[oe]);return q(U,Ee,xe)},_e.createRef=function(){return{current:null}},_e.forwardRef=function(U){return{$$typeof:h,render:U}},_e.isValidElement=te,_e.lazy=function(U){return{$$typeof:y,_payload:{_status:-1,_result:U},_init:ie}},_e.memo=function(U,X){return{$$typeof:p,type:U,compare:X===void 0?null:X}},_e.startTransition=function(U){var X=j.T,ne={};j.T=ne;try{var oe=U(),xe=j.S;xe!==null&&xe(ne,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(O,ve)}catch(Ee){ve(Ee)}finally{X!==null&&ne.types!==null&&(X.types=ne.types),j.T=X}},_e.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},_e.use=function(U){return j.H.use(U)},_e.useActionState=function(U,X,ne){return j.H.useActionState(U,X,ne)},_e.useCallback=function(U,X){return j.H.useCallback(U,X)},_e.useContext=function(U){return j.H.useContext(U)},_e.useDebugValue=function(){},_e.useDeferredValue=function(U,X){return j.H.useDeferredValue(U,X)},_e.useEffect=function(U,X){return j.H.useEffect(U,X)},_e.useEffectEvent=function(U){return j.H.useEffectEvent(U)},_e.useId=function(){return j.H.useId()},_e.useImperativeHandle=function(U,X,ne){return j.H.useImperativeHandle(U,X,ne)},_e.useInsertionEffect=function(U,X){return j.H.useInsertionEffect(U,X)},_e.useLayoutEffect=function(U,X){return j.H.useLayoutEffect(U,X)},_e.useMemo=function(U,X){return j.H.useMemo(U,X)},_e.useOptimistic=function(U,X){return j.H.useOptimistic(U,X)},_e.useReducer=function(U,X,ne){return j.H.useReducer(U,X,ne)},_e.useRef=function(U){return j.H.useRef(U)},_e.useState=function(U){return j.H.useState(U)},_e.useSyncExternalStore=function(U,X,ne){return j.H.useSyncExternalStore(U,X,ne)},_e.useTransition=function(){return j.H.useTransition()},_e.version="19.2.4",_e}var Hg;function xf(){return Hg||(Hg=1,Ad.exports=m_()),Ad.exports}var kd={exports:{}},Mt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg;function g_(){if(Gg)return Mt;Gg=1;var t=xf();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:g,containerInfo:p,implementation:y}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Mt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Mt.createPortal=function(g,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,y)},Mt.flushSync=function(g){var p=u.T,y=r.p;try{if(u.T=null,r.p=2,g)return g()}finally{u.T=p,r.p=y,r.d.f()}},Mt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},Mt.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Mt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var y=p.as,w=h(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:b,fetchPriority:S}):y==="script"&&r.d.X(g,{crossOrigin:w,integrity:b,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Mt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},Mt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,w=h(y,p.crossOrigin);r.d.L(g,y,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Mt.preloadModule=function(g,p){if(typeof g=="string")if(p){var y=h(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},Mt.requestFormReset=function(g){r.d.r(g)},Mt.unstable_batchedUpdates=function(g,p){return g(p)},Mt.useFormState=function(g,p,y){return u.H.useFormState(g,p,y)},Mt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Mt.version="19.2.4",Mt}var Bg;function v_(){if(Bg)return kd.exports;Bg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),kd.exports=g_(),kd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function y_(){if($g)return Ta;$g=1;var t=p_(),e=xf(),i=v_();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(r(188))}function p(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,c=s;;){var v=o.return;if(v===null)break;var x=v.alternate;if(x===null){if(c=v.return,c!==null){o=c;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===o)return g(v),n;if(x===c)return g(v),s;x=x.sibling}throw Error(r(188))}if(o.return!==c.return)o=v,c=x;else{for(var _=!1,T=v.child;T;){if(T===o){_=!0,o=v,c=x;break}if(T===c){_=!0,c=v,o=x;break}T=T.sibling}if(!_){for(T=x.child;T;){if(T===o){_=!0,o=x,c=v;break}if(T===c){_=!0,c=x,o=v;break}T=T.sibling}if(!_)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function y(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=y(n),s!==null)return s;n=n.sibling}return null}var w=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),R=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function ae(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var K=Symbol.for("react.client.reference");function ee(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===K?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case A:return"Fragment";case C:return"Profiler";case N:return"StrictMode";case z:return"Suspense";case O:return"SuspenseList";case q:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case E:return"Portal";case R:return n.displayName||"Context";case k:return(n._context.displayName||"Context")+".Consumer";case M:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case j:return s=n.displayName||null,s!==null?s:ee(n.type)||"Memo";case B:s=n._payload,n=n._init;try{return ee(n(s))}catch{}}return null}var ce=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},ve=[],De=-1;function U(n){return{current:n}}function X(n){0>De||(n.current=ve[De],ve[De]=null,De--)}function ne(n,s){De++,ve[De]=n.current,n.current=s}var oe=U(null),xe=U(null),Ee=U(null),Ie=U(null);function tt(n,s){switch(ne(Ee,s),ne(xe,n),ne(oe,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?rg(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=rg(s),n=ag(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}X(oe),ne(oe,n)}function Ke(){X(oe),X(xe),X(Ee)}function Dn(n){n.memoizedState!==null&&ne(Ie,n);var s=oe.current,o=ag(s,n.type);s!==o&&(ne(xe,n),ne(oe,o))}function mi(n){xe.current===n&&(X(oe),X(xe)),Ie.current===n&&(X(Ie),ba._currentValue=ie)}var $i,Fi;function bn(n){if($i===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);$i=s&&s[1]||"",Fi=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$i+n+Fi}var qn=!1;function pe(n,s){if(!n||qn)return"";qn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(F){var $=F}Reflect.construct(n,[],Q)}else{try{Q.call()}catch(F){$=F}n.call(Q.prototype)}}else{try{throw Error()}catch(F){$=F}(Q=n())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(F){if(F&&$&&typeof F.stack=="string")return[F.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=c.DetermineComponentFrameRoot(),_=x[0],T=x[1];if(_&&T){var I=_.split(`
`),G=T.split(`
`);for(v=c=0;c<I.length&&!I[c].includes("DetermineComponentFrameRoot");)c++;for(;v<G.length&&!G[v].includes("DetermineComponentFrameRoot");)v++;if(c===I.length||v===G.length)for(c=I.length-1,v=G.length-1;1<=c&&0<=v&&I[c]!==G[v];)v--;for(;1<=c&&0<=v;c--,v--)if(I[c]!==G[v]){if(c!==1||v!==1)do if(c--,v--,0>v||I[c]!==G[v]){var J=`
`+I[c].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=c&&0<=v);break}}}finally{qn=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?bn(o):""}function wn(n,s){switch(n.tag){case 26:case 27:case 5:return bn(n.type);case 16:return bn("Lazy");case 13:return n.child!==s&&s!==null?bn("Suspense Fallback"):bn("Suspense");case 19:return bn("SuspenseList");case 0:case 15:return pe(n.type,!1);case 11:return pe(n.type.render,!1);case 1:return pe(n.type,!0);case 31:return bn("Activity");default:return""}}function Vn(n){try{var s="",o=null;do s+=wn(n,o),o=n,n=n.return;while(n);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var jn=Object.prototype.hasOwnProperty,Ya=t.unstable_scheduleCallback,Xa=t.unstable_cancelCallback,Lf=t.unstable_shouldYield,Pf=t.unstable_requestPaint,zt=t.unstable_now,zf=t.unstable_getCurrentPriorityLevel,we=t.unstable_ImmediatePriority,je=t.unstable_UserBlockingPriority,We=t.unstable_NormalPriority,ct=t.unstable_LowPriority,at=t.unstable_IdlePriority,mt=t.log,Un=t.unstable_setDisableYieldValue,rn=null,Ue=null;function Oe(n){if(typeof mt=="function"&&Un(n),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(rn,n)}catch{}}var Ve=Math.clz32?Math.clz32:Mx,Ji=Math.log,Ix=Math.LN2;function Mx(n){return n>>>=0,n===0?32:31-(Ji(n)/Ix|0)|0}var Qa=256,Wa=262144,Za=4194304;function Ki(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function eo(n,s,o){var c=n.pendingLanes;if(c===0)return 0;var v=0,x=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var T=c&134217727;return T!==0?(c=T&~x,c!==0?v=Ki(c):(_&=T,_!==0?v=Ki(_):o||(o=T&~n,o!==0&&(v=Ki(o))))):(T=c&~x,T!==0?v=Ki(T):_!==0?v=Ki(_):o||(o=c&~n,o!==0&&(v=Ki(o)))),v===0?0:s!==0&&s!==v&&(s&x)===0&&(x=v&-v,o=s&-s,x>=o||x===32&&(o&4194048)!==0)?s:v}function Dr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Dx(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qf(){var n=Za;return Za<<=1,(Za&62914560)===0&&(Za=4194304),n}function fc(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function jr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function jx(n,s,o,c,v,x){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,I=n.expirationTimes,G=n.hiddenUpdates;for(o=_&~o;0<o;){var J=31-Ve(o),Q=1<<J;T[J]=0,I[J]=-1;var $=G[J];if($!==null)for(G[J]=null,J=0;J<$.length;J++){var F=$[J];F!==null&&(F.lane&=-536870913)}o&=~Q}c!==0&&Vf(n,c,0),x!==0&&v===0&&n.tag!==0&&(n.suspendedLanes|=x&~(_&~s))}function Vf(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-Ve(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Hf(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var c=31-Ve(o),v=1<<c;v&s|n[c]&s&&(n[c]|=s),o&=~v}}function Gf(n,s){var o=s&-s;return o=(o&42)!==0?1:hc(o),(o&(n.suspendedLanes|s))!==0?0:o}function hc(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function pc(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Bf(){var n=Z.p;return n!==0?n:(n=window.event,n===void 0?32:kg(n.type))}function $f(n,s){var o=Z.p;try{return Z.p=n,s()}finally{Z.p=o}}var gi=Math.random().toString(36).slice(2),St="__reactFiber$"+gi,qt="__reactProps$"+gi,Ss="__reactContainer$"+gi,mc="__reactEvents$"+gi,Ux="__reactListeners$"+gi,Ox="__reactHandles$"+gi,Ff="__reactResources$"+gi,Ur="__reactMarker$"+gi;function gc(n){delete n[St],delete n[qt],delete n[mc],delete n[Ux],delete n[Ox]}function Es(n){var s=n[St];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Ss]||o[St]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=hg(n);n!==null;){if(o=n[St])return o;n=hg(n)}return s}n=o,o=n.parentNode}return null}function Ts(n){if(n=n[St]||n[Ss]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Or(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function Ns(n){var s=n[Ff];return s||(s=n[Ff]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function xt(n){n[Ur]=!0}var Jf=new Set,Kf={};function Yi(n,s){Cs(n,s),Cs(n+"Capture",s)}function Cs(n,s){for(Kf[n]=s,n=0;n<s.length;n++)Jf.add(s[n])}var Lx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yf={},Xf={};function Px(n){return jn.call(Xf,n)?!0:jn.call(Yf,n)?!1:Lx.test(n)?Xf[n]=!0:(Yf[n]=!0,!1)}function to(n,s,o){if(Px(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function no(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Hn(n,s,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+c)}}function an(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Qf(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function zx(n,s,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,x=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return v.call(this)},set:function(_){o=""+_,x.call(this,_)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function vc(n){if(!n._valueTracker){var s=Qf(n)?"checked":"value";n._valueTracker=zx(n,s,""+n[s])}}function Wf(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return n&&(c=Qf(n)?n.checked?"true":"false":n.value),n=c,n!==o?(s.setValue(n),!0):!1}function io(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var qx=/[\n"\\]/g;function on(n){return n.replace(qx,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function yc(n,s,o,c,v,x,_,T){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+an(s)):n.value!==""+an(s)&&(n.value=""+an(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?xc(n,_,an(s)):o!=null?xc(n,_,an(o)):c!=null&&n.removeAttribute("value"),v==null&&x!=null&&(n.defaultChecked=!!x),v!=null&&(n.checked=v&&typeof v!="function"&&typeof v!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+an(T):n.removeAttribute("name")}function Zf(n,s,o,c,v,x,_,T){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.type=x),s!=null||o!=null){if(!(x!=="submit"&&x!=="reset"||s!=null)){vc(n);return}o=o!=null?""+an(o):"",s=s!=null?""+an(s):o,T||s===n.value||(n.value=s),n.defaultValue=s}c=c??v,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=T?n.checked:!!c,n.defaultChecked=!!c,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),vc(n)}function xc(n,s,o){s==="number"&&io(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function As(n,s,o,c){if(n=n.options,s){s={};for(var v=0;v<o.length;v++)s["$"+o[v]]=!0;for(o=0;o<n.length;o++)v=s.hasOwnProperty("$"+n[o].value),n[o].selected!==v&&(n[o].selected=v),v&&c&&(n[o].defaultSelected=!0)}else{for(o=""+an(o),s=null,v=0;v<n.length;v++){if(n[v].value===o){n[v].selected=!0,c&&(n[v].defaultSelected=!0);return}s!==null||n[v].disabled||(s=n[v])}s!==null&&(s.selected=!0)}}function eh(n,s,o){if(s!=null&&(s=""+an(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+an(o):""}function th(n,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(r(92));if(ce(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=an(s),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),vc(n)}function ks(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var Vx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nh(n,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,o):typeof o!="number"||o===0||Vx.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function ih(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var v in s)c=s[v],s.hasOwnProperty(v)&&o[v]!==c&&nh(n,v,c)}else for(var x in s)s.hasOwnProperty(x)&&nh(n,x,s[x])}function bc(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function so(n){return Gx.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Gn(){}var wc=null;function _c(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Rs=null,Is=null;function sh(n){var s=Ts(n);if(s&&(n=s.stateNode)){var o=n[qt]||null;e:switch(n=s.stateNode,s.type){case"input":if(yc(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+on(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==n&&c.form===n.form){var v=c[qt]||null;if(!v)throw Error(r(90));yc(c,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===n.form&&Wf(c)}break e;case"textarea":eh(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&As(n,!!o.multiple,s,!1)}}}var Sc=!1;function rh(n,s,o){if(Sc)return n(s,o);Sc=!0;try{var c=n(s);return c}finally{if(Sc=!1,(Rs!==null||Is!==null)&&(Fo(),Rs&&(s=Rs,n=Is,Is=Rs=null,sh(s),n)))for(s=0;s<n.length;s++)sh(n[s])}}function Lr(n,s){var o=n.stateNode;if(o===null)return null;var c=o[qt]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ec=!1;if(Bn)try{var Pr={};Object.defineProperty(Pr,"passive",{get:function(){Ec=!0}}),window.addEventListener("test",Pr,Pr),window.removeEventListener("test",Pr,Pr)}catch{Ec=!1}var vi=null,Tc=null,ro=null;function ah(){if(ro)return ro;var n,s=Tc,o=s.length,c,v="value"in vi?vi.value:vi.textContent,x=v.length;for(n=0;n<o&&s[n]===v[n];n++);var _=o-n;for(c=1;c<=_&&s[o-c]===v[x-c];c++);return ro=v.slice(n,1<c?1-c:void 0)}function ao(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function oo(){return!0}function oh(){return!1}function Vt(n){function s(o,c,v,x,_){this._reactName=o,this._targetInst=v,this.type=c,this.nativeEvent=x,this.target=_,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(x):x[T]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?oo:oh,this.isPropagationStopped=oh,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=oo)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=oo)},persist:function(){},isPersistent:oo}),s}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lo=Vt(Xi),zr=w({},Xi,{view:0,detail:0}),Bx=Vt(zr),Nc,Cc,qr,co=w({},zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==qr&&(qr&&n.type==="mousemove"?(Nc=n.screenX-qr.screenX,Cc=n.screenY-qr.screenY):Cc=Nc=0,qr=n),Nc)},movementY:function(n){return"movementY"in n?n.movementY:Cc}}),lh=Vt(co),$x=w({},co,{dataTransfer:0}),Fx=Vt($x),Jx=w({},zr,{relatedTarget:0}),Ac=Vt(Jx),Kx=w({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),Yx=Vt(Kx),Xx=w({},Xi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Qx=Vt(Xx),Wx=w({},Xi,{data:0}),ch=Vt(Wx),Zx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nb(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=tb[n])?!!s[n]:!1}function kc(){return nb}var ib=w({},zr,{key:function(n){if(n.key){var s=Zx[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ao(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?eb[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kc,charCode:function(n){return n.type==="keypress"?ao(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ao(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sb=Vt(ib),rb=w({},co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uh=Vt(rb),ab=w({},zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kc}),ob=Vt(ab),lb=w({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),cb=Vt(lb),ub=w({},co,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),db=Vt(ub),fb=w({},Xi,{newState:0,oldState:0}),hb=Vt(fb),pb=[9,13,27,32],Rc=Bn&&"CompositionEvent"in window,Vr=null;Bn&&"documentMode"in document&&(Vr=document.documentMode);var mb=Bn&&"TextEvent"in window&&!Vr,dh=Bn&&(!Rc||Vr&&8<Vr&&11>=Vr),fh=" ",hh=!1;function ph(n,s){switch(n){case"keyup":return pb.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ms=!1;function gb(n,s){switch(n){case"compositionend":return mh(s);case"keypress":return s.which!==32?null:(hh=!0,fh);case"textInput":return n=s.data,n===fh&&hh?null:n;default:return null}}function vb(n,s){if(Ms)return n==="compositionend"||!Rc&&ph(n,s)?(n=ah(),ro=Tc=vi=null,Ms=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return dh&&s.locale!=="ko"?null:s.data;default:return null}}var yb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!yb[n.type]:s==="textarea"}function vh(n,s,o,c){Rs?Is?Is.push(c):Is=[c]:Rs=c,s=Zo(s,"onChange"),0<s.length&&(o=new lo("onChange","change",null,o,c),n.push({event:o,listeners:s}))}var Hr=null,Gr=null;function xb(n){Zm(n,0)}function uo(n){var s=Or(n);if(Wf(s))return n}function yh(n,s){if(n==="change")return s}var xh=!1;if(Bn){var Ic;if(Bn){var Mc="oninput"in document;if(!Mc){var bh=document.createElement("div");bh.setAttribute("oninput","return;"),Mc=typeof bh.oninput=="function"}Ic=Mc}else Ic=!1;xh=Ic&&(!document.documentMode||9<document.documentMode)}function wh(){Hr&&(Hr.detachEvent("onpropertychange",_h),Gr=Hr=null)}function _h(n){if(n.propertyName==="value"&&uo(Gr)){var s=[];vh(s,Gr,n,_c(n)),rh(xb,s)}}function bb(n,s,o){n==="focusin"?(wh(),Hr=s,Gr=o,Hr.attachEvent("onpropertychange",_h)):n==="focusout"&&wh()}function wb(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return uo(Gr)}function _b(n,s){if(n==="click")return uo(s)}function Sb(n,s){if(n==="input"||n==="change")return uo(s)}function Eb(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Kt=typeof Object.is=="function"?Object.is:Eb;function Br(n,s){if(Kt(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var v=o[c];if(!jn.call(s,v)||!Kt(n[v],s[v]))return!1}return!0}function Sh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Eh(n,s){var o=Sh(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=s&&c>=s)return{node:o,offset:s-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Sh(o)}}function Th(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Th(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Nh(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=io(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=io(n.document)}return s}function Dc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var Tb=Bn&&"documentMode"in document&&11>=document.documentMode,Ds=null,jc=null,$r=null,Uc=!1;function Ch(n,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Uc||Ds==null||Ds!==io(c)||(c=Ds,"selectionStart"in c&&Dc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),$r&&Br($r,c)||($r=c,c=Zo(jc,"onSelect"),0<c.length&&(s=new lo("onSelect","select",null,s,o),n.push({event:s,listeners:c}),s.target=Ds)))}function Qi(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var js={animationend:Qi("Animation","AnimationEnd"),animationiteration:Qi("Animation","AnimationIteration"),animationstart:Qi("Animation","AnimationStart"),transitionrun:Qi("Transition","TransitionRun"),transitionstart:Qi("Transition","TransitionStart"),transitioncancel:Qi("Transition","TransitionCancel"),transitionend:Qi("Transition","TransitionEnd")},Oc={},Ah={};Bn&&(Ah=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function Wi(n){if(Oc[n])return Oc[n];if(!js[n])return n;var s=js[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Ah)return Oc[n]=s[o];return n}var kh=Wi("animationend"),Rh=Wi("animationiteration"),Ih=Wi("animationstart"),Nb=Wi("transitionrun"),Cb=Wi("transitionstart"),Ab=Wi("transitioncancel"),Mh=Wi("transitionend"),Dh=new Map,Lc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lc.push("scrollEnd");function _n(n,s){Dh.set(n,s),Yi(s,[n])}var fo=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},ln=[],Us=0,Pc=0;function ho(){for(var n=Us,s=Pc=Us=0;s<n;){var o=ln[s];ln[s++]=null;var c=ln[s];ln[s++]=null;var v=ln[s];ln[s++]=null;var x=ln[s];if(ln[s++]=null,c!==null&&v!==null){var _=c.pending;_===null?v.next=v:(v.next=_.next,_.next=v),c.pending=v}x!==0&&jh(o,v,x)}}function po(n,s,o,c){ln[Us++]=n,ln[Us++]=s,ln[Us++]=o,ln[Us++]=c,Pc|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function zc(n,s,o,c){return po(n,s,o,c),mo(n)}function Zi(n,s){return po(n,null,null,s),mo(n)}function jh(n,s,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var v=!1,x=n.return;x!==null;)x.childLanes|=o,c=x.alternate,c!==null&&(c.childLanes|=o),x.tag===22&&(n=x.stateNode,n===null||n._visibility&1||(v=!0)),n=x,x=x.return;return n.tag===3?(x=n.stateNode,v&&s!==null&&(v=31-Ve(o),n=x.hiddenUpdates,c=n[v],c===null?n[v]=[s]:c.push(s),s.lane=o|536870912),x):null}function mo(n){if(50<ha)throw ha=0,Ku=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Os={};function kb(n,s,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(n,s,o,c){return new kb(n,s,o,c)}function qc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function $n(n,s){var o=n.alternate;return o===null?(o=Yt(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Uh(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function go(n,s,o,c,v,x){var _=0;if(c=n,typeof n=="function")qc(n)&&(_=1);else if(typeof n=="string")_=jw(n,o,oe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case q:return n=Yt(31,o,s,v),n.elementType=q,n.lanes=x,n;case A:return es(o.children,v,x,s);case N:_=8,v|=24;break;case C:return n=Yt(12,o,s,v|2),n.elementType=C,n.lanes=x,n;case z:return n=Yt(13,o,s,v),n.elementType=z,n.lanes=x,n;case O:return n=Yt(19,o,s,v),n.elementType=O,n.lanes=x,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:_=10;break e;case k:_=9;break e;case M:_=11;break e;case j:_=14;break e;case B:_=16,c=null;break e}_=29,o=Error(r(130,n===null?"null":typeof n,"")),c=null}return s=Yt(_,o,s,v),s.elementType=n,s.type=c,s.lanes=x,s}function es(n,s,o,c){return n=Yt(7,n,c,s),n.lanes=o,n}function Vc(n,s,o){return n=Yt(6,n,null,s),n.lanes=o,n}function Oh(n){var s=Yt(18,null,null,0);return s.stateNode=n,s}function Hc(n,s,o){return s=Yt(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Lh=new WeakMap;function cn(n,s){if(typeof n=="object"&&n!==null){var o=Lh.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Vn(s)},Lh.set(n,s),s)}return{value:n,source:s,stack:Vn(s)}}var Ls=[],Ps=0,vo=null,Fr=0,un=[],dn=0,yi=null,On=1,Ln="";function Fn(n,s){Ls[Ps++]=Fr,Ls[Ps++]=vo,vo=n,Fr=s}function Ph(n,s,o){un[dn++]=On,un[dn++]=Ln,un[dn++]=yi,yi=n;var c=On;n=Ln;var v=32-Ve(c)-1;c&=~(1<<v),o+=1;var x=32-Ve(s)+v;if(30<x){var _=v-v%5;x=(c&(1<<_)-1).toString(32),c>>=_,v-=_,On=1<<32-Ve(s)+v|o<<v|c,Ln=x+n}else On=1<<x|o<<v|c,Ln=n}function Gc(n){n.return!==null&&(Fn(n,1),Ph(n,1,0))}function Bc(n){for(;n===vo;)vo=Ls[--Ps],Ls[Ps]=null,Fr=Ls[--Ps],Ls[Ps]=null;for(;n===yi;)yi=un[--dn],un[dn]=null,Ln=un[--dn],un[dn]=null,On=un[--dn],un[dn]=null}function zh(n,s){un[dn++]=On,un[dn++]=Ln,un[dn++]=yi,On=s.id,Ln=s.overflow,yi=n}var Et=null,Xe=null,Me=!1,xi=null,fn=!1,$c=Error(r(519));function bi(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jr(cn(s,n)),$c}function qh(n){var s=n.stateNode,o=n.type,c=n.memoizedProps;switch(s[St]=n,s[qt]=c,o){case"dialog":Ce("cancel",s),Ce("close",s);break;case"iframe":case"object":case"embed":Ce("load",s);break;case"video":case"audio":for(o=0;o<ma.length;o++)Ce(ma[o],s);break;case"source":Ce("error",s);break;case"img":case"image":case"link":Ce("error",s),Ce("load",s);break;case"details":Ce("toggle",s);break;case"input":Ce("invalid",s),Zf(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ce("invalid",s);break;case"textarea":Ce("invalid",s),th(s,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||ig(s.textContent,o)?(c.popover!=null&&(Ce("beforetoggle",s),Ce("toggle",s)),c.onScroll!=null&&Ce("scroll",s),c.onScrollEnd!=null&&Ce("scrollend",s),c.onClick!=null&&(s.onclick=Gn),s=!0):s=!1,s||bi(n,!0)}function Vh(n){for(Et=n.return;Et;)switch(Et.tag){case 5:case 31:case 13:fn=!1;return;case 27:case 3:fn=!0;return;default:Et=Et.return}}function zs(n){if(n!==Et)return!1;if(!Me)return Vh(n),Me=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||cd(n.type,n.memoizedProps)),o=!o),o&&Xe&&bi(n),Vh(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Xe=fg(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Xe=fg(n)}else s===27?(s=Xe,ji(n.type)?(n=pd,pd=null,Xe=n):Xe=s):Xe=Et?pn(n.stateNode.nextSibling):null;return!0}function ts(){Xe=Et=null,Me=!1}function Fc(){var n=xi;return n!==null&&($t===null?$t=n:$t.push.apply($t,n),xi=null),n}function Jr(n){xi===null?xi=[n]:xi.push(n)}var Jc=U(null),ns=null,Jn=null;function wi(n,s,o){ne(Jc,s._currentValue),s._currentValue=o}function Kn(n){n._currentValue=Jc.current,X(Jc)}function Kc(n,s,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===o)break;n=n.return}}function Yc(n,s,o,c){var v=n.child;for(v!==null&&(v.return=n);v!==null;){var x=v.dependencies;if(x!==null){var _=v.child;x=x.firstContext;e:for(;x!==null;){var T=x;x=v;for(var I=0;I<s.length;I++)if(T.context===s[I]){x.lanes|=o,T=x.alternate,T!==null&&(T.lanes|=o),Kc(x.return,o,n),c||(_=null);break e}x=T.next}}else if(v.tag===18){if(_=v.return,_===null)throw Error(r(341));_.lanes|=o,x=_.alternate,x!==null&&(x.lanes|=o),Kc(_,o,n),_=null}else _=v.child;if(_!==null)_.return=v;else for(_=v;_!==null;){if(_===n){_=null;break}if(v=_.sibling,v!==null){v.return=_.return,_=v;break}_=_.return}v=_}}function qs(n,s,o,c){n=null;for(var v=s,x=!1;v!==null;){if(!x){if((v.flags&524288)!==0)x=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var _=v.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=v.type;Kt(v.pendingProps.value,_.value)||(n!==null?n.push(T):n=[T])}}else if(v===Ie.current){if(_=v.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(n!==null?n.push(ba):n=[ba])}v=v.return}n!==null&&Yc(s,n,o,c),s.flags|=262144}function yo(n){for(n=n.firstContext;n!==null;){if(!Kt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function is(n){ns=n,Jn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Tt(n){return Hh(ns,n)}function xo(n,s){return ns===null&&is(n),Hh(n,s)}function Hh(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Jn===null){if(n===null)throw Error(r(308));Jn=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Jn=Jn.next=s;return o}var Rb=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},Ib=t.unstable_scheduleCallback,Mb=t.unstable_NormalPriority,ut={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xc(){return{controller:new Rb,data:new Map,refCount:0}}function Kr(n){n.refCount--,n.refCount===0&&Ib(Mb,function(){n.controller.abort()})}var Yr=null,Qc=0,Vs=0,Hs=null;function Db(n,s){if(Yr===null){var o=Yr=[];Qc=0,Vs=ed(),Hs={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Qc++,s.then(Gh,Gh),s}function Gh(){if(--Qc===0&&Yr!==null){Hs!==null&&(Hs.status="fulfilled");var n=Yr;Yr=null,Vs=0,Hs=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function jb(n,s){var o=[],c={status:"pending",value:null,reason:null,then:function(v){o.push(v)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var v=0;v<o.length;v++)(0,o[v])(s)},function(v){for(c.status="rejected",c.reason=v,v=0;v<o.length;v++)(0,o[v])(void 0)}),c}var Bh=H.S;H.S=function(n,s){Cm=zt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Db(n,s),Bh!==null&&Bh(n,s)};var ss=U(null);function Wc(){var n=ss.current;return n!==null?n:Je.pooledCache}function bo(n,s){s===null?ne(ss,ss.current):ne(ss,s.pool)}function $h(){var n=Wc();return n===null?null:{parent:ut._currentValue,pool:n}}var Gs=Error(r(460)),Zc=Error(r(474)),wo=Error(r(542)),_o={then:function(){}};function Fh(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Jh(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Gn,Gn),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Yh(n),n;default:if(typeof s.status=="string")s.then(Gn,Gn);else{if(n=Je,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var v=s;v.status="fulfilled",v.value=c}},function(c){if(s.status==="pending"){var v=s;v.status="rejected",v.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Yh(n),n}throw as=s,Gs}}function rs(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(as=o,Gs):o}}var as=null;function Kh(){if(as===null)throw Error(r(459));var n=as;return as=null,n}function Yh(n){if(n===Gs||n===wo)throw Error(r(483))}var Bs=null,Xr=0;function So(n){var s=Xr;return Xr+=1,Bs===null&&(Bs=[]),Jh(Bs,n,s)}function Qr(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Eo(n,s){throw s.$$typeof===b?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Xh(n){function s(L,D){if(n){var V=L.deletions;V===null?(L.deletions=[D],L.flags|=16):V.push(D)}}function o(L,D){if(!n)return null;for(;D!==null;)s(L,D),D=D.sibling;return null}function c(L){for(var D=new Map;L!==null;)L.key!==null?D.set(L.key,L):D.set(L.index,L),L=L.sibling;return D}function v(L,D){return L=$n(L,D),L.index=0,L.sibling=null,L}function x(L,D,V){return L.index=V,n?(V=L.alternate,V!==null?(V=V.index,V<D?(L.flags|=67108866,D):V):(L.flags|=67108866,D)):(L.flags|=1048576,D)}function _(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function T(L,D,V,Y){return D===null||D.tag!==6?(D=Vc(V,L.mode,Y),D.return=L,D):(D=v(D,V),D.return=L,D)}function I(L,D,V,Y){var he=V.type;return he===A?J(L,D,V.props.children,Y,V.key):D!==null&&(D.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===B&&rs(he)===D.type)?(D=v(D,V.props),Qr(D,V),D.return=L,D):(D=go(V.type,V.key,V.props,null,L.mode,Y),Qr(D,V),D.return=L,D)}function G(L,D,V,Y){return D===null||D.tag!==4||D.stateNode.containerInfo!==V.containerInfo||D.stateNode.implementation!==V.implementation?(D=Hc(V,L.mode,Y),D.return=L,D):(D=v(D,V.children||[]),D.return=L,D)}function J(L,D,V,Y,he){return D===null||D.tag!==7?(D=es(V,L.mode,Y,he),D.return=L,D):(D=v(D,V),D.return=L,D)}function Q(L,D,V){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Vc(""+D,L.mode,V),D.return=L,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case S:return V=go(D.type,D.key,D.props,null,L.mode,V),Qr(V,D),V.return=L,V;case E:return D=Hc(D,L.mode,V),D.return=L,D;case B:return D=rs(D),Q(L,D,V)}if(ce(D)||ae(D))return D=es(D,L.mode,V,null),D.return=L,D;if(typeof D.then=="function")return Q(L,So(D),V);if(D.$$typeof===R)return Q(L,xo(L,D),V);Eo(L,D)}return null}function $(L,D,V,Y){var he=D!==null?D.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return he!==null?null:T(L,D,""+V,Y);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return V.key===he?I(L,D,V,Y):null;case E:return V.key===he?G(L,D,V,Y):null;case B:return V=rs(V),$(L,D,V,Y)}if(ce(V)||ae(V))return he!==null?null:J(L,D,V,Y,null);if(typeof V.then=="function")return $(L,D,So(V),Y);if(V.$$typeof===R)return $(L,D,xo(L,V),Y);Eo(L,V)}return null}function F(L,D,V,Y,he){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return L=L.get(V)||null,T(D,L,""+Y,he);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:return L=L.get(Y.key===null?V:Y.key)||null,I(D,L,Y,he);case E:return L=L.get(Y.key===null?V:Y.key)||null,G(D,L,Y,he);case B:return Y=rs(Y),F(L,D,V,Y,he)}if(ce(Y)||ae(Y))return L=L.get(V)||null,J(D,L,Y,he,null);if(typeof Y.then=="function")return F(L,D,V,So(Y),he);if(Y.$$typeof===R)return F(L,D,V,xo(D,Y),he);Eo(D,Y)}return null}function le(L,D,V,Y){for(var he=null,Le=null,ue=D,Te=D=0,Re=null;ue!==null&&Te<V.length;Te++){ue.index>Te?(Re=ue,ue=null):Re=ue.sibling;var Pe=$(L,ue,V[Te],Y);if(Pe===null){ue===null&&(ue=Re);break}n&&ue&&Pe.alternate===null&&s(L,ue),D=x(Pe,D,Te),Le===null?he=Pe:Le.sibling=Pe,Le=Pe,ue=Re}if(Te===V.length)return o(L,ue),Me&&Fn(L,Te),he;if(ue===null){for(;Te<V.length;Te++)ue=Q(L,V[Te],Y),ue!==null&&(D=x(ue,D,Te),Le===null?he=ue:Le.sibling=ue,Le=ue);return Me&&Fn(L,Te),he}for(ue=c(ue);Te<V.length;Te++)Re=F(ue,L,Te,V[Te],Y),Re!==null&&(n&&Re.alternate!==null&&ue.delete(Re.key===null?Te:Re.key),D=x(Re,D,Te),Le===null?he=Re:Le.sibling=Re,Le=Re);return n&&ue.forEach(function(zi){return s(L,zi)}),Me&&Fn(L,Te),he}function me(L,D,V,Y){if(V==null)throw Error(r(151));for(var he=null,Le=null,ue=D,Te=D=0,Re=null,Pe=V.next();ue!==null&&!Pe.done;Te++,Pe=V.next()){ue.index>Te?(Re=ue,ue=null):Re=ue.sibling;var zi=$(L,ue,Pe.value,Y);if(zi===null){ue===null&&(ue=Re);break}n&&ue&&zi.alternate===null&&s(L,ue),D=x(zi,D,Te),Le===null?he=zi:Le.sibling=zi,Le=zi,ue=Re}if(Pe.done)return o(L,ue),Me&&Fn(L,Te),he;if(ue===null){for(;!Pe.done;Te++,Pe=V.next())Pe=Q(L,Pe.value,Y),Pe!==null&&(D=x(Pe,D,Te),Le===null?he=Pe:Le.sibling=Pe,Le=Pe);return Me&&Fn(L,Te),he}for(ue=c(ue);!Pe.done;Te++,Pe=V.next())Pe=F(ue,L,Te,Pe.value,Y),Pe!==null&&(n&&Pe.alternate!==null&&ue.delete(Pe.key===null?Te:Pe.key),D=x(Pe,D,Te),Le===null?he=Pe:Le.sibling=Pe,Le=Pe);return n&&ue.forEach(function($w){return s(L,$w)}),Me&&Fn(L,Te),he}function Fe(L,D,V,Y){if(typeof V=="object"&&V!==null&&V.type===A&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case S:e:{for(var he=V.key;D!==null;){if(D.key===he){if(he=V.type,he===A){if(D.tag===7){o(L,D.sibling),Y=v(D,V.props.children),Y.return=L,L=Y;break e}}else if(D.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===B&&rs(he)===D.type){o(L,D.sibling),Y=v(D,V.props),Qr(Y,V),Y.return=L,L=Y;break e}o(L,D);break}else s(L,D);D=D.sibling}V.type===A?(Y=es(V.props.children,L.mode,Y,V.key),Y.return=L,L=Y):(Y=go(V.type,V.key,V.props,null,L.mode,Y),Qr(Y,V),Y.return=L,L=Y)}return _(L);case E:e:{for(he=V.key;D!==null;){if(D.key===he)if(D.tag===4&&D.stateNode.containerInfo===V.containerInfo&&D.stateNode.implementation===V.implementation){o(L,D.sibling),Y=v(D,V.children||[]),Y.return=L,L=Y;break e}else{o(L,D);break}else s(L,D);D=D.sibling}Y=Hc(V,L.mode,Y),Y.return=L,L=Y}return _(L);case B:return V=rs(V),Fe(L,D,V,Y)}if(ce(V))return le(L,D,V,Y);if(ae(V)){if(he=ae(V),typeof he!="function")throw Error(r(150));return V=he.call(V),me(L,D,V,Y)}if(typeof V.then=="function")return Fe(L,D,So(V),Y);if(V.$$typeof===R)return Fe(L,D,xo(L,V),Y);Eo(L,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,D!==null&&D.tag===6?(o(L,D.sibling),Y=v(D,V),Y.return=L,L=Y):(o(L,D),Y=Vc(V,L.mode,Y),Y.return=L,L=Y),_(L)):o(L,D)}return function(L,D,V,Y){try{Xr=0;var he=Fe(L,D,V,Y);return Bs=null,he}catch(ue){if(ue===Gs||ue===wo)throw ue;var Le=Yt(29,ue,null,L.mode);return Le.lanes=Y,Le.return=L,Le}finally{}}}var os=Xh(!0),Qh=Xh(!1),_i=!1;function eu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tu(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Si(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ei(n,s,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(qe&2)!==0){var v=c.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),c.pending=s,s=mo(n),jh(n,null,o),s}return po(n,c,s,o),mo(n)}function Wr(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,Hf(n,o)}}function nu(n,s){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var v=null,x=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};x===null?v=x=_:x=x.next=_,o=o.next}while(o!==null);x===null?v=x=s:x=x.next=s}else v=x=s;o={baseState:c.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var iu=!1;function Zr(){if(iu){var n=Hs;if(n!==null)throw n}}function ea(n,s,o,c){iu=!1;var v=n.updateQueue;_i=!1;var x=v.firstBaseUpdate,_=v.lastBaseUpdate,T=v.shared.pending;if(T!==null){v.shared.pending=null;var I=T,G=I.next;I.next=null,_===null?x=G:_.next=G,_=I;var J=n.alternate;J!==null&&(J=J.updateQueue,T=J.lastBaseUpdate,T!==_&&(T===null?J.firstBaseUpdate=G:T.next=G,J.lastBaseUpdate=I))}if(x!==null){var Q=v.baseState;_=0,J=G=I=null,T=x;do{var $=T.lane&-536870913,F=$!==T.lane;if(F?(ke&$)===$:(c&$)===$){$!==0&&$===Vs&&(iu=!0),J!==null&&(J=J.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var le=n,me=T;$=s;var Fe=o;switch(me.tag){case 1:if(le=me.payload,typeof le=="function"){Q=le.call(Fe,Q,$);break e}Q=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=me.payload,$=typeof le=="function"?le.call(Fe,Q,$):le,$==null)break e;Q=w({},Q,$);break e;case 2:_i=!0}}$=T.callback,$!==null&&(n.flags|=64,F&&(n.flags|=8192),F=v.callbacks,F===null?v.callbacks=[$]:F.push($))}else F={lane:$,tag:T.tag,payload:T.payload,callback:T.callback,next:null},J===null?(G=J=F,I=Q):J=J.next=F,_|=$;if(T=T.next,T===null){if(T=v.shared.pending,T===null)break;F=T,T=F.next,F.next=null,v.lastBaseUpdate=F,v.shared.pending=null}}while(!0);J===null&&(I=Q),v.baseState=I,v.firstBaseUpdate=G,v.lastBaseUpdate=J,x===null&&(v.shared.lanes=0),ki|=_,n.lanes=_,n.memoizedState=Q}}function Wh(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function Zh(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Wh(o[n],s)}var $s=U(null),To=U(0);function ep(n,s){n=ii,ne(To,n),ne($s,s),ii=n|s.baseLanes}function su(){ne(To,ii),ne($s,$s.current)}function ru(){ii=To.current,X($s),X(To)}var Xt=U(null),hn=null;function Ti(n){var s=n.alternate;ne(ot,ot.current&1),ne(Xt,n),hn===null&&(s===null||$s.current!==null||s.memoizedState!==null)&&(hn=n)}function au(n){ne(ot,ot.current),ne(Xt,n),hn===null&&(hn=n)}function tp(n){n.tag===22?(ne(ot,ot.current),ne(Xt,n),hn===null&&(hn=n)):Ni()}function Ni(){ne(ot,ot.current),ne(Xt,Xt.current)}function Qt(n){X(Xt),hn===n&&(hn=null),X(ot)}var ot=U(0);function No(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||fd(o)||hd(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Yn=0,Se=null,Be=null,dt=null,Co=!1,Fs=!1,ls=!1,Ao=0,ta=0,Js=null,Ub=0;function nt(){throw Error(r(321))}function ou(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!Kt(n[o],s[o]))return!1;return!0}function lu(n,s,o,c,v,x){return Yn=x,Se=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,H.H=n===null||n.memoizedState===null?Pp:Su,ls=!1,x=o(c,v),ls=!1,Fs&&(x=ip(s,o,c,v)),np(n),x}function np(n){H.H=sa;var s=Be!==null&&Be.next!==null;if(Yn=0,dt=Be=Se=null,Co=!1,ta=0,Js=null,s)throw Error(r(300));n===null||ft||(n=n.dependencies,n!==null&&yo(n)&&(ft=!0))}function ip(n,s,o,c){Se=n;var v=0;do{if(Fs&&(Js=null),ta=0,Fs=!1,25<=v)throw Error(r(301));if(v+=1,dt=Be=null,n.updateQueue!=null){var x=n.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}H.H=zp,x=s(o,c)}while(Fs);return x}function Ob(){var n=H.H,s=n.useState()[0];return s=typeof s.then=="function"?na(s):s,n=n.useState()[0],(Be!==null?Be.memoizedState:null)!==n&&(Se.flags|=1024),s}function cu(){var n=Ao!==0;return Ao=0,n}function uu(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function du(n){if(Co){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Co=!1}Yn=0,dt=Be=Se=null,Fs=!1,ta=Ao=0,Js=null}function Ut(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Se.memoizedState=dt=n:dt=dt.next=n,dt}function lt(){if(Be===null){var n=Se.alternate;n=n!==null?n.memoizedState:null}else n=Be.next;var s=dt===null?Se.memoizedState:dt.next;if(s!==null)dt=s,Be=n;else{if(n===null)throw Se.alternate===null?Error(r(467)):Error(r(310));Be=n,n={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},dt===null?Se.memoizedState=dt=n:dt=dt.next=n}return dt}function ko(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function na(n){var s=ta;return ta+=1,Js===null&&(Js=[]),n=Jh(Js,n,s),s=Se,(dt===null?s.memoizedState:dt.next)===null&&(s=s.alternate,H.H=s===null||s.memoizedState===null?Pp:Su),n}function Ro(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return na(n);if(n.$$typeof===R)return Tt(n)}throw Error(r(438,String(n)))}function fu(n){var s=null,o=Se.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=Se.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(v){return v.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=ko(),Se.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),c=0;c<n;c++)o[c]=W;return s.index++,o}function Xn(n,s){return typeof s=="function"?s(n):s}function Io(n){var s=lt();return hu(s,Be,n)}function hu(n,s,o){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var v=n.baseQueue,x=c.pending;if(x!==null){if(v!==null){var _=v.next;v.next=x.next,x.next=_}s.baseQueue=v=x,c.pending=null}if(x=n.baseState,v===null)n.memoizedState=x;else{s=v.next;var T=_=null,I=null,G=s,J=!1;do{var Q=G.lane&-536870913;if(Q!==G.lane?(ke&Q)===Q:(Yn&Q)===Q){var $=G.revertLane;if($===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),Q===Vs&&(J=!0);else if((Yn&$)===$){G=G.next,$===Vs&&(J=!0);continue}else Q={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},I===null?(T=I=Q,_=x):I=I.next=Q,Se.lanes|=$,ki|=$;Q=G.action,ls&&o(x,Q),x=G.hasEagerState?G.eagerState:o(x,Q)}else $={lane:Q,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},I===null?(T=I=$,_=x):I=I.next=$,Se.lanes|=Q,ki|=Q;G=G.next}while(G!==null&&G!==s);if(I===null?_=x:I.next=T,!Kt(x,n.memoizedState)&&(ft=!0,J&&(o=Hs,o!==null)))throw o;n.memoizedState=x,n.baseState=_,n.baseQueue=I,c.lastRenderedState=x}return v===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function pu(n){var s=lt(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var c=o.dispatch,v=o.pending,x=s.memoizedState;if(v!==null){o.pending=null;var _=v=v.next;do x=n(x,_.action),_=_.next;while(_!==v);Kt(x,s.memoizedState)||(ft=!0),s.memoizedState=x,s.baseQueue===null&&(s.baseState=x),o.lastRenderedState=x}return[x,c]}function sp(n,s,o){var c=Se,v=lt(),x=Me;if(x){if(o===void 0)throw Error(r(407));o=o()}else o=s();var _=!Kt((Be||v).memoizedState,o);if(_&&(v.memoizedState=o,ft=!0),v=v.queue,vu(op.bind(null,c,v,n),[n]),v.getSnapshot!==s||_||dt!==null&&dt.memoizedState.tag&1){if(c.flags|=2048,Ks(9,{destroy:void 0},ap.bind(null,c,v,o,s),null),Je===null)throw Error(r(349));x||(Yn&127)!==0||rp(c,s,o)}return o}function rp(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Se.updateQueue,s===null?(s=ko(),Se.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function ap(n,s,o,c){s.value=o,s.getSnapshot=c,lp(s)&&cp(n)}function op(n,s,o){return o(function(){lp(s)&&cp(n)})}function lp(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!Kt(n,o)}catch{return!0}}function cp(n){var s=Zi(n,2);s!==null&&Ft(s,n,2)}function mu(n){var s=Ut();if(typeof n=="function"){var o=n;if(n=o(),ls){Oe(!0);try{o()}finally{Oe(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:n},s}function up(n,s,o,c){return n.baseState=o,hu(n,Be,typeof c=="function"?c:Xn)}function Lb(n,s,o,c,v){if(jo(n))throw Error(r(485));if(n=s.action,n!==null){var x={payload:v,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){x.listeners.push(_)}};H.T!==null?o(!0):x.isTransition=!1,c(x),o=s.pending,o===null?(x.next=s.pending=x,dp(s,x)):(x.next=o.next,s.pending=o.next=x)}}function dp(n,s){var o=s.action,c=s.payload,v=n.state;if(s.isTransition){var x=H.T,_={};H.T=_;try{var T=o(v,c),I=H.S;I!==null&&I(_,T),fp(n,s,T)}catch(G){gu(n,s,G)}finally{x!==null&&_.types!==null&&(x.types=_.types),H.T=x}}else try{x=o(v,c),fp(n,s,x)}catch(G){gu(n,s,G)}}function fp(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){hp(n,s,c)},function(c){return gu(n,s,c)}):hp(n,s,o)}function hp(n,s,o){s.status="fulfilled",s.value=o,pp(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,dp(n,o)))}function gu(n,s,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,pp(s),s=s.next;while(s!==c)}n.action=null}function pp(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function mp(n,s){return s}function gp(n,s){if(Me){var o=Je.formState;if(o!==null){e:{var c=Se;if(Me){if(Xe){t:{for(var v=Xe,x=fn;v.nodeType!==8;){if(!x){v=null;break t}if(v=pn(v.nextSibling),v===null){v=null;break t}}x=v.data,v=x==="F!"||x==="F"?v:null}if(v){Xe=pn(v.nextSibling),c=v.data==="F!";break e}}bi(c)}c=!1}c&&(s=o[0])}}return o=Ut(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mp,lastRenderedState:s},o.queue=c,o=Up.bind(null,Se,c),c.dispatch=o,c=mu(!1),x=_u.bind(null,Se,!1,c.queue),c=Ut(),v={state:s,dispatch:null,action:n,pending:null},c.queue=v,o=Lb.bind(null,Se,v,x,o),v.dispatch=o,c.memoizedState=n,[s,o,!1]}function vp(n){var s=lt();return yp(s,Be,n)}function yp(n,s,o){if(s=hu(n,s,mp)[0],n=Io(Xn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=na(s)}catch(_){throw _===Gs?wo:_}else c=s;s=lt();var v=s.queue,x=v.dispatch;return o!==s.memoizedState&&(Se.flags|=2048,Ks(9,{destroy:void 0},Pb.bind(null,v,o),null)),[c,x,n]}function Pb(n,s){n.action=s}function xp(n){var s=lt(),o=Be;if(o!==null)return yp(s,o,n);lt(),s=s.memoizedState,o=lt();var c=o.queue.dispatch;return o.memoizedState=n,[s,c,!1]}function Ks(n,s,o,c){return n={tag:n,create:o,deps:c,inst:s,next:null},s=Se.updateQueue,s===null&&(s=ko(),Se.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,s.lastEffect=n),n}function bp(){return lt().memoizedState}function Mo(n,s,o,c){var v=Ut();Se.flags|=n,v.memoizedState=Ks(1|s,{destroy:void 0},o,c===void 0?null:c)}function Do(n,s,o,c){var v=lt();c=c===void 0?null:c;var x=v.memoizedState.inst;Be!==null&&c!==null&&ou(c,Be.memoizedState.deps)?v.memoizedState=Ks(s,x,o,c):(Se.flags|=n,v.memoizedState=Ks(1|s,x,o,c))}function wp(n,s){Mo(8390656,8,n,s)}function vu(n,s){Do(2048,8,n,s)}function zb(n){Se.flags|=4;var s=Se.updateQueue;if(s===null)s=ko(),Se.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function _p(n){var s=lt().memoizedState;return zb({ref:s,nextImpl:n}),function(){if((qe&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Sp(n,s){return Do(4,2,n,s)}function Ep(n,s){return Do(4,4,n,s)}function Tp(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Np(n,s,o){o=o!=null?o.concat([n]):null,Do(4,4,Tp.bind(null,s,n),o)}function yu(){}function Cp(n,s){var o=lt();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&ou(s,c[1])?c[0]:(o.memoizedState=[n,s],n)}function Ap(n,s){var o=lt();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&ou(s,c[1]))return c[0];if(c=n(),ls){Oe(!0);try{n()}finally{Oe(!1)}}return o.memoizedState=[c,s],c}function xu(n,s,o){return o===void 0||(Yn&1073741824)!==0&&(ke&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=km(),Se.lanes|=n,ki|=n,o)}function kp(n,s,o,c){return Kt(o,s)?o:$s.current!==null?(n=xu(n,o,c),Kt(n,s)||(ft=!0),n):(Yn&42)===0||(Yn&1073741824)!==0&&(ke&261930)===0?(ft=!0,n.memoizedState=o):(n=km(),Se.lanes|=n,ki|=n,s)}function Rp(n,s,o,c,v){var x=Z.p;Z.p=x!==0&&8>x?x:8;var _=H.T,T={};H.T=T,_u(n,!1,s,o);try{var I=v(),G=H.S;if(G!==null&&G(T,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var J=jb(I,c);ia(n,s,J,en(n))}else ia(n,s,c,en(n))}catch(Q){ia(n,s,{then:function(){},status:"rejected",reason:Q},en())}finally{Z.p=x,_!==null&&T.types!==null&&(_.types=T.types),H.T=_}}function qb(){}function bu(n,s,o,c){if(n.tag!==5)throw Error(r(476));var v=Ip(n).queue;Rp(n,v,s,ie,o===null?qb:function(){return Mp(n),o(c)})}function Ip(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:ie},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Mp(n){var s=Ip(n);s.next===null&&(s=n.alternate.memoizedState),ia(n,s.next.queue,{},en())}function wu(){return Tt(ba)}function Dp(){return lt().memoizedState}function jp(){return lt().memoizedState}function Vb(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=en();n=Si(o);var c=Ei(s,n,o);c!==null&&(Ft(c,s,o),Wr(c,s,o)),s={cache:Xc()},n.payload=s;return}s=s.return}}function Hb(n,s,o){var c=en();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},jo(n)?Op(s,o):(o=zc(n,s,o,c),o!==null&&(Ft(o,n,c),Lp(o,s,c)))}function Up(n,s,o){var c=en();ia(n,s,o,c)}function ia(n,s,o,c){var v={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(jo(n))Op(s,v);else{var x=n.alternate;if(n.lanes===0&&(x===null||x.lanes===0)&&(x=s.lastRenderedReducer,x!==null))try{var _=s.lastRenderedState,T=x(_,o);if(v.hasEagerState=!0,v.eagerState=T,Kt(T,_))return po(n,s,v,0),Je===null&&ho(),!1}catch{}finally{}if(o=zc(n,s,v,c),o!==null)return Ft(o,n,c),Lp(o,s,c),!0}return!1}function _u(n,s,o,c){if(c={lane:2,revertLane:ed(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},jo(n)){if(s)throw Error(r(479))}else s=zc(n,o,c,2),s!==null&&Ft(s,n,2)}function jo(n){var s=n.alternate;return n===Se||s!==null&&s===Se}function Op(n,s){Fs=Co=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function Lp(n,s,o){if((o&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,Hf(n,o)}}var sa={readContext:Tt,use:Ro,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useLayoutEffect:nt,useInsertionEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useSyncExternalStore:nt,useId:nt,useHostTransitionStatus:nt,useFormState:nt,useActionState:nt,useOptimistic:nt,useMemoCache:nt,useCacheRefresh:nt};sa.useEffectEvent=nt;var Pp={readContext:Tt,use:Ro,useCallback:function(n,s){return Ut().memoizedState=[n,s===void 0?null:s],n},useContext:Tt,useEffect:wp,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Mo(4194308,4,Tp.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Mo(4194308,4,n,s)},useInsertionEffect:function(n,s){Mo(4,2,n,s)},useMemo:function(n,s){var o=Ut();s=s===void 0?null:s;var c=n();if(ls){Oe(!0);try{n()}finally{Oe(!1)}}return o.memoizedState=[c,s],c},useReducer:function(n,s,o){var c=Ut();if(o!==void 0){var v=o(s);if(ls){Oe(!0);try{o(s)}finally{Oe(!1)}}}else v=s;return c.memoizedState=c.baseState=v,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:v},c.queue=n,n=n.dispatch=Hb.bind(null,Se,n),[c.memoizedState,n]},useRef:function(n){var s=Ut();return n={current:n},s.memoizedState=n},useState:function(n){n=mu(n);var s=n.queue,o=Up.bind(null,Se,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:yu,useDeferredValue:function(n,s){var o=Ut();return xu(o,n,s)},useTransition:function(){var n=mu(!1);return n=Rp.bind(null,Se,n.queue,!0,!1),Ut().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var c=Se,v=Ut();if(Me){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),Je===null)throw Error(r(349));(ke&127)!==0||rp(c,s,o)}v.memoizedState=o;var x={value:o,getSnapshot:s};return v.queue=x,wp(op.bind(null,c,x,n),[n]),c.flags|=2048,Ks(9,{destroy:void 0},ap.bind(null,c,x,o,s),null),o},useId:function(){var n=Ut(),s=Je.identifierPrefix;if(Me){var o=Ln,c=On;o=(c&~(1<<32-Ve(c)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Ao++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=Ub++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:wu,useFormState:gp,useActionState:gp,useOptimistic:function(n){var s=Ut();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=_u.bind(null,Se,!0,o),o.dispatch=s,[n,s]},useMemoCache:fu,useCacheRefresh:function(){return Ut().memoizedState=Vb.bind(null,Se)},useEffectEvent:function(n){var s=Ut(),o={impl:n};return s.memoizedState=o,function(){if((qe&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Su={readContext:Tt,use:Ro,useCallback:Cp,useContext:Tt,useEffect:vu,useImperativeHandle:Np,useInsertionEffect:Sp,useLayoutEffect:Ep,useMemo:Ap,useReducer:Io,useRef:bp,useState:function(){return Io(Xn)},useDebugValue:yu,useDeferredValue:function(n,s){var o=lt();return kp(o,Be.memoizedState,n,s)},useTransition:function(){var n=Io(Xn)[0],s=lt().memoizedState;return[typeof n=="boolean"?n:na(n),s]},useSyncExternalStore:sp,useId:Dp,useHostTransitionStatus:wu,useFormState:vp,useActionState:vp,useOptimistic:function(n,s){var o=lt();return up(o,Be,n,s)},useMemoCache:fu,useCacheRefresh:jp};Su.useEffectEvent=_p;var zp={readContext:Tt,use:Ro,useCallback:Cp,useContext:Tt,useEffect:vu,useImperativeHandle:Np,useInsertionEffect:Sp,useLayoutEffect:Ep,useMemo:Ap,useReducer:pu,useRef:bp,useState:function(){return pu(Xn)},useDebugValue:yu,useDeferredValue:function(n,s){var o=lt();return Be===null?xu(o,n,s):kp(o,Be.memoizedState,n,s)},useTransition:function(){var n=pu(Xn)[0],s=lt().memoizedState;return[typeof n=="boolean"?n:na(n),s]},useSyncExternalStore:sp,useId:Dp,useHostTransitionStatus:wu,useFormState:xp,useActionState:xp,useOptimistic:function(n,s){var o=lt();return Be!==null?up(o,Be,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:fu,useCacheRefresh:jp};zp.useEffectEvent=_p;function Eu(n,s,o,c){s=n.memoizedState,o=o(c,s),o=o==null?s:w({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Tu={enqueueSetState:function(n,s,o){n=n._reactInternals;var c=en(),v=Si(c);v.payload=s,o!=null&&(v.callback=o),s=Ei(n,v,c),s!==null&&(Ft(s,n,c),Wr(s,n,c))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var c=en(),v=Si(c);v.tag=1,v.payload=s,o!=null&&(v.callback=o),s=Ei(n,v,c),s!==null&&(Ft(s,n,c),Wr(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=en(),c=Si(o);c.tag=2,s!=null&&(c.callback=s),s=Ei(n,c,o),s!==null&&(Ft(s,n,o),Wr(s,n,o))}};function qp(n,s,o,c,v,x,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,x,_):s.prototype&&s.prototype.isPureReactComponent?!Br(o,c)||!Br(v,x):!0}function Vp(n,s,o,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==n&&Tu.enqueueReplaceState(s,s.state,null)}function cs(n,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(n=n.defaultProps){o===s&&(o=w({},o));for(var v in n)o[v]===void 0&&(o[v]=n[v])}return o}function Hp(n){fo(n)}function Gp(n){console.error(n)}function Bp(n){fo(n)}function Uo(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function $p(n,s,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Nu(n,s,o){return o=Si(o),o.tag=3,o.payload={element:null},o.callback=function(){Uo(n,s)},o}function Fp(n){return n=Si(n),n.tag=3,n}function Jp(n,s,o,c){var v=o.type.getDerivedStateFromError;if(typeof v=="function"){var x=c.value;n.payload=function(){return v(x)},n.callback=function(){$p(s,o,c)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){$p(s,o,c),typeof v!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var T=c.stack;this.componentDidCatch(c.value,{componentStack:T!==null?T:""})})}function Gb(n,s,o,c,v){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&qs(s,o,v,!0),o=Xt.current,o!==null){switch(o.tag){case 31:case 13:return hn===null?Jo():o.alternate===null&&it===0&&(it=3),o.flags&=-257,o.flags|=65536,o.lanes=v,c===_o?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),Qu(n,c,v)),!1;case 22:return o.flags|=65536,c===_o?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),Qu(n,c,v)),!1}throw Error(r(435,o.tag))}return Qu(n,c,v),Jo(),!1}if(Me)return s=Xt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=v,c!==$c&&(n=Error(r(422),{cause:c}),Jr(cn(n,o)))):(c!==$c&&(s=Error(r(423),{cause:c}),Jr(cn(s,o))),n=n.current.alternate,n.flags|=65536,v&=-v,n.lanes|=v,c=cn(c,o),v=Nu(n.stateNode,c,v),nu(n,v),it!==4&&(it=2)),!1;var x=Error(r(520),{cause:c});if(x=cn(x,o),fa===null?fa=[x]:fa.push(x),it!==4&&(it=2),s===null)return!0;c=cn(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=v&-v,o.lanes|=n,n=Nu(o.stateNode,c,n),nu(o,n),!1;case 1:if(s=o.type,x=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ri===null||!Ri.has(x))))return o.flags|=65536,v&=-v,o.lanes|=v,v=Fp(v),Jp(v,n,o,c),nu(o,v),!1}o=o.return}while(o!==null);return!1}var Cu=Error(r(461)),ft=!1;function Nt(n,s,o,c){s.child=n===null?Qh(s,null,o,c):os(s,n.child,o,c)}function Kp(n,s,o,c,v){o=o.render;var x=s.ref;if("ref"in c){var _={};for(var T in c)T!=="ref"&&(_[T]=c[T])}else _=c;return is(s),c=lu(n,s,o,_,x,v),T=cu(),n!==null&&!ft?(uu(n,s,v),Qn(n,s,v)):(Me&&T&&Gc(s),s.flags|=1,Nt(n,s,c,v),s.child)}function Yp(n,s,o,c,v){if(n===null){var x=o.type;return typeof x=="function"&&!qc(x)&&x.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=x,Xp(n,s,x,c,v)):(n=go(o.type,null,c,s,s.mode,v),n.ref=s.ref,n.return=s,s.child=n)}if(x=n.child,!Uu(n,v)){var _=x.memoizedProps;if(o=o.compare,o=o!==null?o:Br,o(_,c)&&n.ref===s.ref)return Qn(n,s,v)}return s.flags|=1,n=$n(x,c),n.ref=s.ref,n.return=s,s.child=n}function Xp(n,s,o,c,v){if(n!==null){var x=n.memoizedProps;if(Br(x,c)&&n.ref===s.ref)if(ft=!1,s.pendingProps=c=x,Uu(n,v))(n.flags&131072)!==0&&(ft=!0);else return s.lanes=n.lanes,Qn(n,s,v)}return Au(n,s,o,c,v)}function Qp(n,s,o,c){var v=c.children,x=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(x=x!==null?x.baseLanes|o:o,n!==null){for(c=s.child=n.child,v=0;c!==null;)v=v|c.lanes|c.childLanes,c=c.sibling;c=v&~x}else c=0,s.child=null;return Wp(n,s,x,o,c)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&bo(s,x!==null?x.cachePool:null),x!==null?ep(s,x):su(),tp(s);else return c=s.lanes=536870912,Wp(n,s,x!==null?x.baseLanes|o:o,o,c)}else x!==null?(bo(s,x.cachePool),ep(s,x),Ni(),s.memoizedState=null):(n!==null&&bo(s,null),su(),Ni());return Nt(n,s,v,o),s.child}function ra(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Wp(n,s,o,c,v){var x=Wc();return x=x===null?null:{parent:ut._currentValue,pool:x},s.memoizedState={baseLanes:o,cachePool:x},n!==null&&bo(s,null),su(),tp(s),n!==null&&qs(n,s,c,!0),s.childLanes=v,null}function Oo(n,s){return s=Po({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Zp(n,s,o){return os(s,n.child,null,o),n=Oo(s,s.pendingProps),n.flags|=2,Qt(s),s.memoizedState=null,n}function Bb(n,s,o){var c=s.pendingProps,v=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Me){if(c.mode==="hidden")return n=Oo(s,c),s.lanes=536870912,ra(null,n);if(au(s),(n=Xe)?(n=dg(n,fn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:yi!==null?{id:On,overflow:Ln}:null,retryLane:536870912,hydrationErrors:null},o=Oh(n),o.return=s,s.child=o,Et=s,Xe=null)):n=null,n===null)throw bi(s);return s.lanes=536870912,null}return Oo(s,c)}var x=n.memoizedState;if(x!==null){var _=x.dehydrated;if(au(s),v)if(s.flags&256)s.flags&=-257,s=Zp(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(ft||qs(n,s,o,!1),v=(o&n.childLanes)!==0,ft||v){if(c=Je,c!==null&&(_=Gf(c,o),_!==0&&_!==x.retryLane))throw x.retryLane=_,Zi(n,_),Ft(c,n,_),Cu;Jo(),s=Zp(n,s,o)}else n=x.treeContext,Xe=pn(_.nextSibling),Et=s,Me=!0,xi=null,fn=!1,n!==null&&zh(s,n),s=Oo(s,c),s.flags|=4096;return s}return n=$n(n.child,{mode:c.mode,children:c.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Lo(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Au(n,s,o,c,v){return is(s),o=lu(n,s,o,c,void 0,v),c=cu(),n!==null&&!ft?(uu(n,s,v),Qn(n,s,v)):(Me&&c&&Gc(s),s.flags|=1,Nt(n,s,o,v),s.child)}function em(n,s,o,c,v,x){return is(s),s.updateQueue=null,o=ip(s,c,o,v),np(n),c=cu(),n!==null&&!ft?(uu(n,s,x),Qn(n,s,x)):(Me&&c&&Gc(s),s.flags|=1,Nt(n,s,o,x),s.child)}function tm(n,s,o,c,v){if(is(s),s.stateNode===null){var x=Os,_=o.contextType;typeof _=="object"&&_!==null&&(x=Tt(_)),x=new o(c,x),s.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Tu,s.stateNode=x,x._reactInternals=s,x=s.stateNode,x.props=c,x.state=s.memoizedState,x.refs={},eu(s),_=o.contextType,x.context=typeof _=="object"&&_!==null?Tt(_):Os,x.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Eu(s,o,_,c),x.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(_=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),_!==x.state&&Tu.enqueueReplaceState(x,x.state,null),ea(s,c,x,v),Zr(),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){x=s.stateNode;var T=s.memoizedProps,I=cs(o,T);x.props=I;var G=x.context,J=o.contextType;_=Os,typeof J=="object"&&J!==null&&(_=Tt(J));var Q=o.getDerivedStateFromProps;J=typeof Q=="function"||typeof x.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,J||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T||G!==_)&&Vp(s,x,c,_),_i=!1;var $=s.memoizedState;x.state=$,ea(s,c,x,v),Zr(),G=s.memoizedState,T||$!==G||_i?(typeof Q=="function"&&(Eu(s,o,Q,c),G=s.memoizedState),(I=_i||qp(s,o,I,c,$,G,_))?(J||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=G),x.props=c,x.state=G,x.context=_,c=I):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{x=s.stateNode,tu(n,s),_=s.memoizedProps,J=cs(o,_),x.props=J,Q=s.pendingProps,$=x.context,G=o.contextType,I=Os,typeof G=="object"&&G!==null&&(I=Tt(G)),T=o.getDerivedStateFromProps,(G=typeof T=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_!==Q||$!==I)&&Vp(s,x,c,I),_i=!1,$=s.memoizedState,x.state=$,ea(s,c,x,v),Zr();var F=s.memoizedState;_!==Q||$!==F||_i||n!==null&&n.dependencies!==null&&yo(n.dependencies)?(typeof T=="function"&&(Eu(s,o,T,c),F=s.memoizedState),(J=_i||qp(s,o,J,c,$,F,I)||n!==null&&n.dependencies!==null&&yo(n.dependencies))?(G||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,F,I),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,F,I)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=F),x.props=c,x.state=F,x.context=I,c=J):(typeof x.componentDidUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(s.flags|=1024),c=!1)}return x=c,Lo(n,s),c=(s.flags&128)!==0,x||c?(x=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:x.render(),s.flags|=1,n!==null&&c?(s.child=os(s,n.child,null,v),s.child=os(s,null,o,v)):Nt(n,s,o,v),s.memoizedState=x.state,n=s.child):n=Qn(n,s,v),n}function nm(n,s,o,c){return ts(),s.flags|=256,Nt(n,s,o,c),s.child}var ku={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ru(n){return{baseLanes:n,cachePool:$h()}}function Iu(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Zt),n}function im(n,s,o){var c=s.pendingProps,v=!1,x=(s.flags&128)!==0,_;if((_=x)||(_=n!==null&&n.memoizedState===null?!1:(ot.current&2)!==0),_&&(v=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if(Me){if(v?Ti(s):Ni(),(n=Xe)?(n=dg(n,fn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:yi!==null?{id:On,overflow:Ln}:null,retryLane:536870912,hydrationErrors:null},o=Oh(n),o.return=s,s.child=o,Et=s,Xe=null)):n=null,n===null)throw bi(s);return hd(n)?s.lanes=32:s.lanes=536870912,null}var T=c.children;return c=c.fallback,v?(Ni(),v=s.mode,T=Po({mode:"hidden",children:T},v),c=es(c,v,o,null),T.return=s,c.return=s,T.sibling=c,s.child=T,c=s.child,c.memoizedState=Ru(o),c.childLanes=Iu(n,_,o),s.memoizedState=ku,ra(null,c)):(Ti(s),Mu(s,T))}var I=n.memoizedState;if(I!==null&&(T=I.dehydrated,T!==null)){if(x)s.flags&256?(Ti(s),s.flags&=-257,s=Du(n,s,o)):s.memoizedState!==null?(Ni(),s.child=n.child,s.flags|=128,s=null):(Ni(),T=c.fallback,v=s.mode,c=Po({mode:"visible",children:c.children},v),T=es(T,v,o,null),T.flags|=2,c.return=s,T.return=s,c.sibling=T,s.child=c,os(s,n.child,null,o),c=s.child,c.memoizedState=Ru(o),c.childLanes=Iu(n,_,o),s.memoizedState=ku,s=ra(null,c));else if(Ti(s),hd(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var G=_.dgst;_=G,c=Error(r(419)),c.stack="",c.digest=_,Jr({value:c,source:null,stack:null}),s=Du(n,s,o)}else if(ft||qs(n,s,o,!1),_=(o&n.childLanes)!==0,ft||_){if(_=Je,_!==null&&(c=Gf(_,o),c!==0&&c!==I.retryLane))throw I.retryLane=c,Zi(n,c),Ft(_,n,c),Cu;fd(T)||Jo(),s=Du(n,s,o)}else fd(T)?(s.flags|=192,s.child=n.child,s=null):(n=I.treeContext,Xe=pn(T.nextSibling),Et=s,Me=!0,xi=null,fn=!1,n!==null&&zh(s,n),s=Mu(s,c.children),s.flags|=4096);return s}return v?(Ni(),T=c.fallback,v=s.mode,I=n.child,G=I.sibling,c=$n(I,{mode:"hidden",children:c.children}),c.subtreeFlags=I.subtreeFlags&65011712,G!==null?T=$n(G,T):(T=es(T,v,o,null),T.flags|=2),T.return=s,c.return=s,c.sibling=T,s.child=c,ra(null,c),c=s.child,T=n.child.memoizedState,T===null?T=Ru(o):(v=T.cachePool,v!==null?(I=ut._currentValue,v=v.parent!==I?{parent:I,pool:I}:v):v=$h(),T={baseLanes:T.baseLanes|o,cachePool:v}),c.memoizedState=T,c.childLanes=Iu(n,_,o),s.memoizedState=ku,ra(n.child,c)):(Ti(s),o=n.child,n=o.sibling,o=$n(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=o,s.memoizedState=null,o)}function Mu(n,s){return s=Po({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Po(n,s){return n=Yt(22,n,null,s),n.lanes=0,n}function Du(n,s,o){return os(s,n.child,null,o),n=Mu(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function sm(n,s,o){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Kc(n.return,s,o)}function ju(n,s,o,c,v,x){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:v,treeForkCount:x}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=o,_.tailMode=v,_.treeForkCount=x)}function rm(n,s,o){var c=s.pendingProps,v=c.revealOrder,x=c.tail;c=c.children;var _=ot.current,T=(_&2)!==0;if(T?(_=_&1|2,s.flags|=128):_&=1,ne(ot,_),Nt(n,s,c,o),c=Me?Fr:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sm(n,o,s);else if(n.tag===19)sm(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(v){case"forwards":for(o=s.child,v=null;o!==null;)n=o.alternate,n!==null&&No(n)===null&&(v=o),o=o.sibling;o=v,o===null?(v=s.child,s.child=null):(v=o.sibling,o.sibling=null),ju(s,!1,v,o,x,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,v=s.child,s.child=null;v!==null;){if(n=v.alternate,n!==null&&No(n)===null){s.child=v;break}n=v.sibling,v.sibling=o,o=v,v=n}ju(s,!0,o,null,x,c);break;case"together":ju(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function Qn(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),ki|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(qs(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=$n(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=$n(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Uu(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&yo(n)))}function $b(n,s,o){switch(s.tag){case 3:tt(s,s.stateNode.containerInfo),wi(s,ut,n.memoizedState.cache),ts();break;case 27:case 5:Dn(s);break;case 4:tt(s,s.stateNode.containerInfo);break;case 10:wi(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,au(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Ti(s),s.flags|=128,null):(o&s.child.childLanes)!==0?im(n,s,o):(Ti(s),n=Qn(n,s,o),n!==null?n.sibling:null);Ti(s);break;case 19:var v=(n.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(qs(n,s,o,!1),c=(o&s.childLanes)!==0),v){if(c)return rm(n,s,o);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ne(ot,ot.current),c)break;return null;case 22:return s.lanes=0,Qp(n,s,o,s.pendingProps);case 24:wi(s,ut,n.memoizedState.cache)}return Qn(n,s,o)}function am(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)ft=!0;else{if(!Uu(n,o)&&(s.flags&128)===0)return ft=!1,$b(n,s,o);ft=(n.flags&131072)!==0}else ft=!1,Me&&(s.flags&1048576)!==0&&Ph(s,Fr,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(n=rs(s.elementType),s.type=n,typeof n=="function")qc(n)?(c=cs(n,c),s.tag=1,s=tm(null,s,n,c,o)):(s.tag=0,s=Au(null,s,n,c,o));else{if(n!=null){var v=n.$$typeof;if(v===M){s.tag=11,s=Kp(null,s,n,c,o);break e}else if(v===j){s.tag=14,s=Yp(null,s,n,c,o);break e}}throw s=ee(n)||n,Error(r(306,s,""))}}return s;case 0:return Au(n,s,s.type,s.pendingProps,o);case 1:return c=s.type,v=cs(c,s.pendingProps),tm(n,s,c,v,o);case 3:e:{if(tt(s,s.stateNode.containerInfo),n===null)throw Error(r(387));c=s.pendingProps;var x=s.memoizedState;v=x.element,tu(n,s),ea(s,c,null,o);var _=s.memoizedState;if(c=_.cache,wi(s,ut,c),c!==x.cache&&Yc(s,[ut],o,!0),Zr(),c=_.element,x.isDehydrated)if(x={element:c,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=x,s.memoizedState=x,s.flags&256){s=nm(n,s,c,o);break e}else if(c!==v){v=cn(Error(r(424)),s),Jr(v),s=nm(n,s,c,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Xe=pn(n.firstChild),Et=s,Me=!0,xi=null,fn=!0,o=Qh(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ts(),c===v){s=Qn(n,s,o);break e}Nt(n,s,c,o)}s=s.child}return s;case 26:return Lo(n,s),n===null?(o=vg(s.type,null,s.pendingProps,null))?s.memoizedState=o:Me||(o=s.type,n=s.pendingProps,c=el(Ee.current).createElement(o),c[St]=s,c[qt]=n,Ct(c,o,n),xt(c),s.stateNode=c):s.memoizedState=vg(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Dn(s),n===null&&Me&&(c=s.stateNode=pg(s.type,s.pendingProps,Ee.current),Et=s,fn=!0,v=Xe,ji(s.type)?(pd=v,Xe=pn(c.firstChild)):Xe=v),Nt(n,s,s.pendingProps.children,o),Lo(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Me&&((v=c=Xe)&&(c=ww(c,s.type,s.pendingProps,fn),c!==null?(s.stateNode=c,Et=s,Xe=pn(c.firstChild),fn=!1,v=!0):v=!1),v||bi(s)),Dn(s),v=s.type,x=s.pendingProps,_=n!==null?n.memoizedProps:null,c=x.children,cd(v,x)?c=null:_!==null&&cd(v,_)&&(s.flags|=32),s.memoizedState!==null&&(v=lu(n,s,Ob,null,null,o),ba._currentValue=v),Lo(n,s),Nt(n,s,c,o),s.child;case 6:return n===null&&Me&&((n=o=Xe)&&(o=_w(o,s.pendingProps,fn),o!==null?(s.stateNode=o,Et=s,Xe=null,n=!0):n=!1),n||bi(s)),null;case 13:return im(n,s,o);case 4:return tt(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=os(s,null,c,o):Nt(n,s,c,o),s.child;case 11:return Kp(n,s,s.type,s.pendingProps,o);case 7:return Nt(n,s,s.pendingProps,o),s.child;case 8:return Nt(n,s,s.pendingProps.children,o),s.child;case 12:return Nt(n,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,wi(s,s.type,c.value),Nt(n,s,c.children,o),s.child;case 9:return v=s.type._context,c=s.pendingProps.children,is(s),v=Tt(v),c=c(v),s.flags|=1,Nt(n,s,c,o),s.child;case 14:return Yp(n,s,s.type,s.pendingProps,o);case 15:return Xp(n,s,s.type,s.pendingProps,o);case 19:return rm(n,s,o);case 31:return Bb(n,s,o);case 22:return Qp(n,s,o,s.pendingProps);case 24:return is(s),c=Tt(ut),n===null?(v=Wc(),v===null&&(v=Je,x=Xc(),v.pooledCache=x,x.refCount++,x!==null&&(v.pooledCacheLanes|=o),v=x),s.memoizedState={parent:c,cache:v},eu(s),wi(s,ut,v)):((n.lanes&o)!==0&&(tu(n,s),ea(s,null,null,o),Zr()),v=n.memoizedState,x=s.memoizedState,v.parent!==c?(v={parent:c,cache:c},s.memoizedState=v,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=v),wi(s,ut,c)):(c=x.cache,wi(s,ut,c),c!==v.cache&&Yc(s,[ut],o,!0))),Nt(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Wn(n){n.flags|=4}function Ou(n,s,o,c,v){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(v&335544128)===v)if(n.stateNode.complete)n.flags|=8192;else if(Dm())n.flags|=8192;else throw as=_o,Zc}else n.flags&=-16777217}function om(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!_g(s))if(Dm())n.flags|=8192;else throw as=_o,Zc}function zo(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?qf():536870912,n.lanes|=s,Ws|=s)}function aa(n,s){if(!Me)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Qe(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(s)for(var v=n.child;v!==null;)o|=v.lanes|v.childLanes,c|=v.subtreeFlags&65011712,c|=v.flags&65011712,v.return=n,v=v.sibling;else for(v=n.child;v!==null;)o|=v.lanes|v.childLanes,c|=v.subtreeFlags,c|=v.flags,v.return=n,v=v.sibling;return n.subtreeFlags|=c,n.childLanes=o,s}function Fb(n,s,o){var c=s.pendingProps;switch(Bc(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(s),null;case 1:return Qe(s),null;case 3:return o=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Kn(ut),Ke(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(zs(s)?Wn(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Fc())),Qe(s),null;case 26:var v=s.type,x=s.memoizedState;return n===null?(Wn(s),x!==null?(Qe(s),om(s,x)):(Qe(s),Ou(s,v,null,c,o))):x?x!==n.memoizedState?(Wn(s),Qe(s),om(s,x)):(Qe(s),s.flags&=-16777217):(n=n.memoizedProps,n!==c&&Wn(s),Qe(s),Ou(s,v,n,c,o)),null;case 27:if(mi(s),o=Ee.current,v=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&Wn(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Qe(s),null}n=oe.current,zs(s)?qh(s):(n=pg(v,c,o),s.stateNode=n,Wn(s))}return Qe(s),null;case 5:if(mi(s),v=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&Wn(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Qe(s),null}if(x=oe.current,zs(s))qh(s);else{var _=el(Ee.current);switch(x){case 1:x=_.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:x=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":x=_.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":x=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":x=_.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof c.is=="string"?_.createElement("select",{is:c.is}):_.createElement("select"),c.multiple?x.multiple=!0:c.size&&(x.size=c.size);break;default:x=typeof c.is=="string"?_.createElement(v,{is:c.is}):_.createElement(v)}}x[St]=s,x[qt]=c;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)x.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=x;e:switch(Ct(x,v,c),v){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Wn(s)}}return Qe(s),Ou(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&Wn(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(n=Ee.current,zs(s)){if(n=s.stateNode,o=s.memoizedProps,c=null,v=Et,v!==null)switch(v.tag){case 27:case 5:c=v.memoizedProps}n[St]=s,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||ig(n.nodeValue,o)),n||bi(s,!0)}else n=el(n).createTextNode(c),n[St]=s,s.stateNode=n}return Qe(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(c=zs(s),o!==null){if(n===null){if(!c)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[St]=s}else ts(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qe(s),n=!1}else o=Fc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(Qt(s),s):(Qt(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Qe(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(v=zs(s),c!==null&&c.dehydrated!==null){if(n===null){if(!v)throw Error(r(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[St]=s}else ts(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qe(s),v=!1}else v=Fc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=v),v=!0;if(!v)return s.flags&256?(Qt(s),s):(Qt(s),null)}return Qt(s),(s.flags&128)!==0?(s.lanes=o,s):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=s.child,v=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(v=c.alternate.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==v&&(c.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),zo(s,s.updateQueue),Qe(s),null);case 4:return Ke(),n===null&&sd(s.stateNode.containerInfo),Qe(s),null;case 10:return Kn(s.type),Qe(s),null;case 19:if(X(ot),c=s.memoizedState,c===null)return Qe(s),null;if(v=(s.flags&128)!==0,x=c.rendering,x===null)if(v)aa(c,!1);else{if(it!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(x=No(n),x!==null){for(s.flags|=128,aa(c,!1),n=x.updateQueue,s.updateQueue=n,zo(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)Uh(o,n),o=o.sibling;return ne(ot,ot.current&1|2),Me&&Fn(s,c.treeForkCount),s.child}n=n.sibling}c.tail!==null&&zt()>Bo&&(s.flags|=128,v=!0,aa(c,!1),s.lanes=4194304)}else{if(!v)if(n=No(x),n!==null){if(s.flags|=128,v=!0,n=n.updateQueue,s.updateQueue=n,zo(s,n),aa(c,!0),c.tail===null&&c.tailMode==="hidden"&&!x.alternate&&!Me)return Qe(s),null}else 2*zt()-c.renderingStartTime>Bo&&o!==536870912&&(s.flags|=128,v=!0,aa(c,!1),s.lanes=4194304);c.isBackwards?(x.sibling=s.child,s.child=x):(n=c.last,n!==null?n.sibling=x:s.child=x,c.last=x)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=zt(),n.sibling=null,o=ot.current,ne(ot,v?o&1|2:o&1),Me&&Fn(s,c.treeForkCount),n):(Qe(s),null);case 22:case 23:return Qt(s),ru(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(Qe(s),s.subtreeFlags&6&&(s.flags|=8192)):Qe(s),o=s.updateQueue,o!==null&&zo(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),n!==null&&X(ss),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Kn(ut),Qe(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Jb(n,s){switch(Bc(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Kn(ut),Ke(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return mi(s),null;case 31:if(s.memoizedState!==null){if(Qt(s),s.alternate===null)throw Error(r(340));ts()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Qt(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));ts()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return X(ot),null;case 4:return Ke(),null;case 10:return Kn(s.type),null;case 22:case 23:return Qt(s),ru(),n!==null&&X(ss),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Kn(ut),null;case 25:return null;default:return null}}function lm(n,s){switch(Bc(s),s.tag){case 3:Kn(ut),Ke();break;case 26:case 27:case 5:mi(s);break;case 4:Ke();break;case 31:s.memoizedState!==null&&Qt(s);break;case 13:Qt(s);break;case 19:X(ot);break;case 10:Kn(s.type);break;case 22:case 23:Qt(s),ru(),n!==null&&X(ss);break;case 24:Kn(ut)}}function oa(n,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var v=c.next;o=v;do{if((o.tag&n)===n){c=void 0;var x=o.create,_=o.inst;c=x(),_.destroy=c}o=o.next}while(o!==v)}}catch(T){Ge(s,s.return,T)}}function Ci(n,s,o){try{var c=s.updateQueue,v=c!==null?c.lastEffect:null;if(v!==null){var x=v.next;c=x;do{if((c.tag&n)===n){var _=c.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,v=s;var I=o,G=T;try{G()}catch(J){Ge(v,I,J)}}}c=c.next}while(c!==x)}}catch(J){Ge(s,s.return,J)}}function cm(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Zh(s,o)}catch(c){Ge(n,n.return,c)}}}function um(n,s,o){o.props=cs(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){Ge(n,s,c)}}function la(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(v){Ge(n,s,v)}}function Pn(n,s){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(v){Ge(n,s,v)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(v){Ge(n,s,v)}else o.current=null}function dm(n){var s=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(v){Ge(n,n.return,v)}}function Lu(n,s,o){try{var c=n.stateNode;mw(c,n.type,o,s),c[qt]=s}catch(v){Ge(n,n.return,v)}}function fm(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ji(n.type)||n.tag===4}function Pu(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||fm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ji(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zu(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Gn));else if(c!==4&&(c===27&&ji(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(zu(n,s,o),n=n.sibling;n!==null;)zu(n,s,o),n=n.sibling}function qo(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(c!==4&&(c===27&&ji(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(qo(n,s,o),n=n.sibling;n!==null;)qo(n,s,o),n=n.sibling}function hm(n){var s=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,v=s.attributes;v.length;)s.removeAttributeNode(v[0]);Ct(s,c,o),s[St]=n,s[qt]=o}catch(x){Ge(n,n.return,x)}}var Zn=!1,ht=!1,qu=!1,pm=typeof WeakSet=="function"?WeakSet:Set,bt=null;function Kb(n,s){if(n=n.containerInfo,od=ol,n=Nh(n),Dc(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var v=c.anchorOffset,x=c.focusNode;c=c.focusOffset;try{o.nodeType,x.nodeType}catch{o=null;break e}var _=0,T=-1,I=-1,G=0,J=0,Q=n,$=null;t:for(;;){for(var F;Q!==o||v!==0&&Q.nodeType!==3||(T=_+v),Q!==x||c!==0&&Q.nodeType!==3||(I=_+c),Q.nodeType===3&&(_+=Q.nodeValue.length),(F=Q.firstChild)!==null;)$=Q,Q=F;for(;;){if(Q===n)break t;if($===o&&++G===v&&(T=_),$===x&&++J===c&&(I=_),(F=Q.nextSibling)!==null)break;Q=$,$=Q.parentNode}Q=F}o=T===-1||I===-1?null:{start:T,end:I}}else o=null}o=o||{start:0,end:0}}else o=null;for(ld={focusedElem:n,selectionRange:o},ol=!1,bt=s;bt!==null;)if(s=bt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,bt=n;else for(;bt!==null;){switch(s=bt,x=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)v=n[o],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&x!==null){n=void 0,o=s,v=x.memoizedProps,x=x.memoizedState,c=o.stateNode;try{var le=cs(o.type,v);n=c.getSnapshotBeforeUpdate(le,x),c.__reactInternalSnapshotBeforeUpdate=n}catch(me){Ge(o,o.return,me)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)dd(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":dd(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,bt=n;break}bt=s.return}}function mm(n,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:ti(n,o),c&4&&oa(5,o);break;case 1:if(ti(n,o),c&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(_){Ge(o,o.return,_)}else{var v=cs(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(v,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){Ge(o,o.return,_)}}c&64&&cm(o),c&512&&la(o,o.return);break;case 3:if(ti(n,o),c&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Zh(n,s)}catch(_){Ge(o,o.return,_)}}break;case 27:s===null&&c&4&&hm(o);case 26:case 5:ti(n,o),s===null&&c&4&&dm(o),c&512&&la(o,o.return);break;case 12:ti(n,o);break;case 31:ti(n,o),c&4&&ym(n,o);break;case 13:ti(n,o),c&4&&xm(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=iw.bind(null,o),Sw(n,o))));break;case 22:if(c=o.memoizedState!==null||Zn,!c){s=s!==null&&s.memoizedState!==null||ht,v=Zn;var x=ht;Zn=c,(ht=s)&&!x?ni(n,o,(o.subtreeFlags&8772)!==0):ti(n,o),Zn=v,ht=x}break;case 30:break;default:ti(n,o)}}function gm(n){var s=n.alternate;s!==null&&(n.alternate=null,gm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&gc(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ze=null,Ht=!1;function ei(n,s,o){for(o=o.child;o!==null;)vm(n,s,o),o=o.sibling}function vm(n,s,o){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(rn,o)}catch{}switch(o.tag){case 26:ht||Pn(o,s),ei(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ht||Pn(o,s);var c=Ze,v=Ht;ji(o.type)&&(Ze=o.stateNode,Ht=!1),ei(n,s,o),va(o.stateNode),Ze=c,Ht=v;break;case 5:ht||Pn(o,s);case 6:if(c=Ze,v=Ht,Ze=null,ei(n,s,o),Ze=c,Ht=v,Ze!==null)if(Ht)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(o.stateNode)}catch(x){Ge(o,s,x)}else try{Ze.removeChild(o.stateNode)}catch(x){Ge(o,s,x)}break;case 18:Ze!==null&&(Ht?(n=Ze,cg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),ar(n)):cg(Ze,o.stateNode));break;case 4:c=Ze,v=Ht,Ze=o.stateNode.containerInfo,Ht=!0,ei(n,s,o),Ze=c,Ht=v;break;case 0:case 11:case 14:case 15:Ci(2,o,s),ht||Ci(4,o,s),ei(n,s,o);break;case 1:ht||(Pn(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&um(o,s,c)),ei(n,s,o);break;case 21:ei(n,s,o);break;case 22:ht=(c=ht)||o.memoizedState!==null,ei(n,s,o),ht=c;break;default:ei(n,s,o)}}function ym(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{ar(n)}catch(o){Ge(s,s.return,o)}}}function xm(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ar(n)}catch(o){Ge(s,s.return,o)}}function Yb(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new pm),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new pm),s;default:throw Error(r(435,n.tag))}}function Vo(n,s){var o=Yb(n);s.forEach(function(c){if(!o.has(c)){o.add(c);var v=sw.bind(null,n,c);c.then(v,v)}})}function Gt(n,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var v=o[c],x=n,_=s,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(ji(T.type)){Ze=T.stateNode,Ht=!1;break e}break;case 5:Ze=T.stateNode,Ht=!1;break e;case 3:case 4:Ze=T.stateNode.containerInfo,Ht=!0;break e}T=T.return}if(Ze===null)throw Error(r(160));vm(x,_,v),Ze=null,Ht=!1,x=v.alternate,x!==null&&(x.return=null),v.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)bm(s,n),s=s.sibling}var Sn=null;function bm(n,s){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Gt(s,n),Bt(n),c&4&&(Ci(3,n,n.return),oa(3,n),Ci(5,n,n.return));break;case 1:Gt(s,n),Bt(n),c&512&&(ht||o===null||Pn(o,o.return)),c&64&&Zn&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var v=Sn;if(Gt(s,n),Bt(n),c&512&&(ht||o===null||Pn(o,o.return)),c&4){var x=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,v=v.ownerDocument||v;t:switch(c){case"title":x=v.getElementsByTagName("title")[0],(!x||x[Ur]||x[St]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=v.createElement(c),v.head.insertBefore(x,v.querySelector("head > title"))),Ct(x,c,o),x[St]=n,xt(x),c=x;break e;case"link":var _=bg("link","href",v).get(c+(o.href||""));if(_){for(var T=0;T<_.length;T++)if(x=_[T],x.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&x.getAttribute("rel")===(o.rel==null?null:o.rel)&&x.getAttribute("title")===(o.title==null?null:o.title)&&x.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(T,1);break t}}x=v.createElement(c),Ct(x,c,o),v.head.appendChild(x);break;case"meta":if(_=bg("meta","content",v).get(c+(o.content||""))){for(T=0;T<_.length;T++)if(x=_[T],x.getAttribute("content")===(o.content==null?null:""+o.content)&&x.getAttribute("name")===(o.name==null?null:o.name)&&x.getAttribute("property")===(o.property==null?null:o.property)&&x.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&x.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(T,1);break t}}x=v.createElement(c),Ct(x,c,o),v.head.appendChild(x);break;default:throw Error(r(468,c))}x[St]=n,xt(x),c=x}n.stateNode=c}else wg(v,n.type,n.stateNode);else n.stateNode=xg(v,c,n.memoizedProps);else x!==c?(x===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):x.count--,c===null?wg(v,n.type,n.stateNode):xg(v,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Lu(n,n.memoizedProps,o.memoizedProps)}break;case 27:Gt(s,n),Bt(n),c&512&&(ht||o===null||Pn(o,o.return)),o!==null&&c&4&&Lu(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Gt(s,n),Bt(n),c&512&&(ht||o===null||Pn(o,o.return)),n.flags&32){v=n.stateNode;try{ks(v,"")}catch(le){Ge(n,n.return,le)}}c&4&&n.stateNode!=null&&(v=n.memoizedProps,Lu(n,v,o!==null?o.memoizedProps:v)),c&1024&&(qu=!0);break;case 6:if(Gt(s,n),Bt(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(le){Ge(n,n.return,le)}}break;case 3:if(il=null,v=Sn,Sn=tl(s.containerInfo),Gt(s,n),Sn=v,Bt(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{ar(s.containerInfo)}catch(le){Ge(n,n.return,le)}qu&&(qu=!1,wm(n));break;case 4:c=Sn,Sn=tl(n.stateNode.containerInfo),Gt(s,n),Bt(n),Sn=c;break;case 12:Gt(s,n),Bt(n);break;case 31:Gt(s,n),Bt(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Vo(n,c)));break;case 13:Gt(s,n),Bt(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Go=zt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Vo(n,c)));break;case 22:v=n.memoizedState!==null;var I=o!==null&&o.memoizedState!==null,G=Zn,J=ht;if(Zn=G||v,ht=J||I,Gt(s,n),ht=J,Zn=G,Bt(n),c&8192)e:for(s=n.stateNode,s._visibility=v?s._visibility&-2:s._visibility|1,v&&(o===null||I||Zn||ht||us(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){I=o=s;try{if(x=I.stateNode,v)_=x.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=I.stateNode;var Q=I.memoizedProps.style,$=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;T.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(le){Ge(I,I.return,le)}}}else if(s.tag===6){if(o===null){I=s;try{I.stateNode.nodeValue=v?"":I.memoizedProps}catch(le){Ge(I,I.return,le)}}}else if(s.tag===18){if(o===null){I=s;try{var F=I.stateNode;v?ug(F,!0):ug(I.stateNode,!1)}catch(le){Ge(I,I.return,le)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Vo(n,o))));break;case 19:Gt(s,n),Bt(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Vo(n,c)));break;case 30:break;case 21:break;default:Gt(s,n),Bt(n)}}function Bt(n){var s=n.flags;if(s&2){try{for(var o,c=n.return;c!==null;){if(fm(c)){o=c;break}c=c.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var v=o.stateNode,x=Pu(n);qo(n,x,v);break;case 5:var _=o.stateNode;o.flags&32&&(ks(_,""),o.flags&=-33);var T=Pu(n);qo(n,T,_);break;case 3:case 4:var I=o.stateNode.containerInfo,G=Pu(n);zu(n,G,I);break;default:throw Error(r(161))}}catch(J){Ge(n,n.return,J)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function wm(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;wm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ti(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)mm(n,s.alternate,s),s=s.sibling}function us(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Ci(4,s,s.return),us(s);break;case 1:Pn(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&um(s,s.return,o),us(s);break;case 27:va(s.stateNode);case 26:case 5:Pn(s,s.return),us(s);break;case 22:s.memoizedState===null&&us(s);break;case 30:us(s);break;default:us(s)}n=n.sibling}}function ni(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,v=n,x=s,_=x.flags;switch(x.tag){case 0:case 11:case 15:ni(v,x,o),oa(4,x);break;case 1:if(ni(v,x,o),c=x,v=c.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(G){Ge(c,c.return,G)}if(c=x,v=c.updateQueue,v!==null){var T=c.stateNode;try{var I=v.shared.hiddenCallbacks;if(I!==null)for(v.shared.hiddenCallbacks=null,v=0;v<I.length;v++)Wh(I[v],T)}catch(G){Ge(c,c.return,G)}}o&&_&64&&cm(x),la(x,x.return);break;case 27:hm(x);case 26:case 5:ni(v,x,o),o&&c===null&&_&4&&dm(x),la(x,x.return);break;case 12:ni(v,x,o);break;case 31:ni(v,x,o),o&&_&4&&ym(v,x);break;case 13:ni(v,x,o),o&&_&4&&xm(v,x);break;case 22:x.memoizedState===null&&ni(v,x,o),la(x,x.return);break;case 30:break;default:ni(v,x,o)}s=s.sibling}}function Vu(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Kr(o))}function Hu(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Kr(n))}function En(n,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)_m(n,s,o,c),s=s.sibling}function _m(n,s,o,c){var v=s.flags;switch(s.tag){case 0:case 11:case 15:En(n,s,o,c),v&2048&&oa(9,s);break;case 1:En(n,s,o,c);break;case 3:En(n,s,o,c),v&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Kr(n)));break;case 12:if(v&2048){En(n,s,o,c),n=s.stateNode;try{var x=s.memoizedProps,_=x.id,T=x.onPostCommit;typeof T=="function"&&T(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(I){Ge(s,s.return,I)}}else En(n,s,o,c);break;case 31:En(n,s,o,c);break;case 13:En(n,s,o,c);break;case 23:break;case 22:x=s.stateNode,_=s.alternate,s.memoizedState!==null?x._visibility&2?En(n,s,o,c):ca(n,s):x._visibility&2?En(n,s,o,c):(x._visibility|=2,Ys(n,s,o,c,(s.subtreeFlags&10256)!==0||!1)),v&2048&&Vu(_,s);break;case 24:En(n,s,o,c),v&2048&&Hu(s.alternate,s);break;default:En(n,s,o,c)}}function Ys(n,s,o,c,v){for(v=v&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var x=n,_=s,T=o,I=c,G=_.flags;switch(_.tag){case 0:case 11:case 15:Ys(x,_,T,I,v),oa(8,_);break;case 23:break;case 22:var J=_.stateNode;_.memoizedState!==null?J._visibility&2?Ys(x,_,T,I,v):ca(x,_):(J._visibility|=2,Ys(x,_,T,I,v)),v&&G&2048&&Vu(_.alternate,_);break;case 24:Ys(x,_,T,I,v),v&&G&2048&&Hu(_.alternate,_);break;default:Ys(x,_,T,I,v)}s=s.sibling}}function ca(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,c=s,v=c.flags;switch(c.tag){case 22:ca(o,c),v&2048&&Vu(c.alternate,c);break;case 24:ca(o,c),v&2048&&Hu(c.alternate,c);break;default:ca(o,c)}s=s.sibling}}var ua=8192;function Xs(n,s,o){if(n.subtreeFlags&ua)for(n=n.child;n!==null;)Sm(n,s,o),n=n.sibling}function Sm(n,s,o){switch(n.tag){case 26:Xs(n,s,o),n.flags&ua&&n.memoizedState!==null&&Uw(o,Sn,n.memoizedState,n.memoizedProps);break;case 5:Xs(n,s,o);break;case 3:case 4:var c=Sn;Sn=tl(n.stateNode.containerInfo),Xs(n,s,o),Sn=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=ua,ua=16777216,Xs(n,s,o),ua=c):Xs(n,s,o));break;default:Xs(n,s,o)}}function Em(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function da(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];bt=c,Nm(c,n)}Em(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Tm(n),n=n.sibling}function Tm(n){switch(n.tag){case 0:case 11:case 15:da(n),n.flags&2048&&Ci(9,n,n.return);break;case 3:da(n);break;case 12:da(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Ho(n)):da(n);break;default:da(n)}}function Ho(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];bt=c,Nm(c,n)}Em(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Ci(8,s,s.return),Ho(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Ho(s));break;default:Ho(s)}n=n.sibling}}function Nm(n,s){for(;bt!==null;){var o=bt;switch(o.tag){case 0:case 11:case 15:Ci(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Kr(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,bt=c;else e:for(o=n;bt!==null;){c=bt;var v=c.sibling,x=c.return;if(gm(c),c===o){bt=null;break e}if(v!==null){v.return=x,bt=v;break e}bt=x}}}var Xb={getCacheForType:function(n){var s=Tt(ut),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return Tt(ut).controller.signal}},Qb=typeof WeakMap=="function"?WeakMap:Map,qe=0,Je=null,Ne=null,ke=0,He=0,Wt=null,Ai=!1,Qs=!1,Gu=!1,ii=0,it=0,ki=0,ds=0,Bu=0,Zt=0,Ws=0,fa=null,$t=null,$u=!1,Go=0,Cm=0,Bo=1/0,$o=null,Ri=null,gt=0,Ii=null,Zs=null,si=0,Fu=0,Ju=null,Am=null,ha=0,Ku=null;function en(){return(qe&2)!==0&&ke!==0?ke&-ke:H.T!==null?ed():Bf()}function km(){if(Zt===0)if((ke&536870912)===0||Me){var n=Wa;Wa<<=1,(Wa&3932160)===0&&(Wa=262144),Zt=n}else Zt=536870912;return n=Xt.current,n!==null&&(n.flags|=32),Zt}function Ft(n,s,o){(n===Je&&(He===2||He===9)||n.cancelPendingCommit!==null)&&(er(n,0),Mi(n,ke,Zt,!1)),jr(n,o),((qe&2)===0||n!==Je)&&(n===Je&&((qe&2)===0&&(ds|=o),it===4&&Mi(n,ke,Zt,!1)),zn(n))}function Rm(n,s,o){if((qe&6)!==0)throw Error(r(327));var c=!o&&(s&127)===0&&(s&n.expiredLanes)===0||Dr(n,s),v=c?ew(n,s):Xu(n,s,!0),x=c;do{if(v===0){Qs&&!c&&Mi(n,s,0,!1);break}else{if(o=n.current.alternate,x&&!Wb(o)){v=Xu(n,s,!1),x=!1;continue}if(v===2){if(x=s,n.errorRecoveryDisabledLanes&x)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var T=n;v=fa;var I=T.current.memoizedState.isDehydrated;if(I&&(er(T,_).flags|=256),_=Xu(T,_,!1),_!==2){if(Gu&&!I){T.errorRecoveryDisabledLanes|=x,ds|=x,v=4;break e}x=$t,$t=v,x!==null&&($t===null?$t=x:$t.push.apply($t,x))}v=_}if(x=!1,v!==2)continue}}if(v===1){er(n,0),Mi(n,s,0,!0);break}e:{switch(c=n,x=v,x){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Mi(c,s,Zt,!Ai);break e;case 2:$t=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(v=Go+300-zt(),10<v)){if(Mi(c,s,Zt,!Ai),eo(c,0,!0)!==0)break e;si=s,c.timeoutHandle=og(Im.bind(null,c,o,$t,$o,$u,s,Zt,ds,Ws,Ai,x,"Throttled",-0,0),v);break e}Im(c,o,$t,$o,$u,s,Zt,ds,Ws,Ai,x,null,-0,0)}}break}while(!0);zn(n)}function Im(n,s,o,c,v,x,_,T,I,G,J,Q,$,F){if(n.timeoutHandle=-1,Q=s.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gn},Sm(s,x,Q);var le=(x&62914560)===x?Go-zt():(x&4194048)===x?Cm-zt():0;if(le=Ow(Q,le),le!==null){si=x,n.cancelPendingCommit=le(zm.bind(null,n,s,x,o,c,v,_,T,I,J,Q,null,$,F)),Mi(n,x,_,!G);return}}zm(n,s,x,o,c,v,_,T,I)}function Wb(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var v=o[c],x=v.getSnapshot;v=v.value;try{if(!Kt(x(),v))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Mi(n,s,o,c){s&=~Bu,s&=~ds,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var v=s;0<v;){var x=31-Ve(v),_=1<<x;c[x]=-1,v&=~_}o!==0&&Vf(n,o,s)}function Fo(){return(qe&6)===0?(pa(0),!1):!0}function Yu(){if(Ne!==null){if(He===0)var n=Ne.return;else n=Ne,Jn=ns=null,du(n),Bs=null,Xr=0,n=Ne;for(;n!==null;)lm(n.alternate,n),n=n.return;Ne=null}}function er(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,yw(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),si=0,Yu(),Je=n,Ne=o=$n(n.current,null),ke=s,He=0,Wt=null,Ai=!1,Qs=Dr(n,s),Gu=!1,Ws=Zt=Bu=ds=ki=it=0,$t=fa=null,$u=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var v=31-Ve(c),x=1<<v;s|=n[v],c&=~x}return ii=s,ho(),o}function Mm(n,s){Se=null,H.H=sa,s===Gs||s===wo?(s=Kh(),He=3):s===Zc?(s=Kh(),He=4):He=s===Cu?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Wt=s,Ne===null&&(it=1,Uo(n,cn(s,n.current)))}function Dm(){var n=Xt.current;return n===null?!0:(ke&4194048)===ke?hn===null:(ke&62914560)===ke||(ke&536870912)!==0?n===hn:!1}function jm(){var n=H.H;return H.H=sa,n===null?sa:n}function Um(){var n=H.A;return H.A=Xb,n}function Jo(){it=4,Ai||(ke&4194048)!==ke&&Xt.current!==null||(Qs=!0),(ki&134217727)===0&&(ds&134217727)===0||Je===null||Mi(Je,ke,Zt,!1)}function Xu(n,s,o){var c=qe;qe|=2;var v=jm(),x=Um();(Je!==n||ke!==s)&&($o=null,er(n,s)),s=!1;var _=it;e:do try{if(He!==0&&Ne!==null){var T=Ne,I=Wt;switch(He){case 8:Yu(),_=6;break e;case 3:case 2:case 9:case 6:Xt.current===null&&(s=!0);var G=He;if(He=0,Wt=null,tr(n,T,I,G),o&&Qs){_=0;break e}break;default:G=He,He=0,Wt=null,tr(n,T,I,G)}}Zb(),_=it;break}catch(J){Mm(n,J)}while(!0);return s&&n.shellSuspendCounter++,Jn=ns=null,qe=c,H.H=v,H.A=x,Ne===null&&(Je=null,ke=0,ho()),_}function Zb(){for(;Ne!==null;)Om(Ne)}function ew(n,s){var o=qe;qe|=2;var c=jm(),v=Um();Je!==n||ke!==s?($o=null,Bo=zt()+500,er(n,s)):Qs=Dr(n,s);e:do try{if(He!==0&&Ne!==null){s=Ne;var x=Wt;t:switch(He){case 1:He=0,Wt=null,tr(n,s,x,1);break;case 2:case 9:if(Fh(x)){He=0,Wt=null,Lm(s);break}s=function(){He!==2&&He!==9||Je!==n||(He=7),zn(n)},x.then(s,s);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:Fh(x)?(He=0,Wt=null,Lm(s)):(He=0,Wt=null,tr(n,s,x,7));break;case 5:var _=null;switch(Ne.tag){case 26:_=Ne.memoizedState;case 5:case 27:var T=Ne;if(_?_g(_):T.stateNode.complete){He=0,Wt=null;var I=T.sibling;if(I!==null)Ne=I;else{var G=T.return;G!==null?(Ne=G,Ko(G)):Ne=null}break t}}He=0,Wt=null,tr(n,s,x,5);break;case 6:He=0,Wt=null,tr(n,s,x,6);break;case 8:Yu(),it=6;break e;default:throw Error(r(462))}}tw();break}catch(J){Mm(n,J)}while(!0);return Jn=ns=null,H.H=c,H.A=v,qe=o,Ne!==null?0:(Je=null,ke=0,ho(),it)}function tw(){for(;Ne!==null&&!Lf();)Om(Ne)}function Om(n){var s=am(n.alternate,n,ii);n.memoizedProps=n.pendingProps,s===null?Ko(n):Ne=s}function Lm(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=em(o,s,s.pendingProps,s.type,void 0,ke);break;case 11:s=em(o,s,s.pendingProps,s.type.render,s.ref,ke);break;case 5:du(s);default:lm(o,s),s=Ne=Uh(s,ii),s=am(o,s,ii)}n.memoizedProps=n.pendingProps,s===null?Ko(n):Ne=s}function tr(n,s,o,c){Jn=ns=null,du(s),Bs=null,Xr=0;var v=s.return;try{if(Gb(n,v,s,o,ke)){it=1,Uo(n,cn(o,n.current)),Ne=null;return}}catch(x){if(v!==null)throw Ne=v,x;it=1,Uo(n,cn(o,n.current)),Ne=null;return}s.flags&32768?(Me||c===1?n=!0:Qs||(ke&536870912)!==0?n=!1:(Ai=n=!0,(c===2||c===9||c===3||c===6)&&(c=Xt.current,c!==null&&c.tag===13&&(c.flags|=16384))),Pm(s,n)):Ko(s)}function Ko(n){var s=n;do{if((s.flags&32768)!==0){Pm(s,Ai);return}n=s.return;var o=Fb(s.alternate,s,ii);if(o!==null){Ne=o;return}if(s=s.sibling,s!==null){Ne=s;return}Ne=s=n}while(s!==null);it===0&&(it=5)}function Pm(n,s){do{var o=Jb(n.alternate,n);if(o!==null){o.flags&=32767,Ne=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Ne=n;return}Ne=n=o}while(n!==null);it=6,Ne=null}function zm(n,s,o,c,v,x,_,T,I){n.cancelPendingCommit=null;do Yo();while(gt!==0);if((qe&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(x=s.lanes|s.childLanes,x|=Pc,jx(n,o,x,_,T,I),n===Je&&(Ne=Je=null,ke=0),Zs=s,Ii=n,si=o,Fu=x,Ju=v,Am=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,rw(We,function(){return Bm(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=H.T,H.T=null,v=Z.p,Z.p=2,_=qe,qe|=4;try{Kb(n,s,o)}finally{qe=_,Z.p=v,H.T=c}}gt=1,qm(),Vm(),Hm()}}function qm(){if(gt===1){gt=0;var n=Ii,s=Zs,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=H.T,H.T=null;var c=Z.p;Z.p=2;var v=qe;qe|=4;try{bm(s,n);var x=ld,_=Nh(n.containerInfo),T=x.focusedElem,I=x.selectionRange;if(_!==T&&T&&T.ownerDocument&&Th(T.ownerDocument.documentElement,T)){if(I!==null&&Dc(T)){var G=I.start,J=I.end;if(J===void 0&&(J=G),"selectionStart"in T)T.selectionStart=G,T.selectionEnd=Math.min(J,T.value.length);else{var Q=T.ownerDocument||document,$=Q&&Q.defaultView||window;if($.getSelection){var F=$.getSelection(),le=T.textContent.length,me=Math.min(I.start,le),Fe=I.end===void 0?me:Math.min(I.end,le);!F.extend&&me>Fe&&(_=Fe,Fe=me,me=_);var L=Eh(T,me),D=Eh(T,Fe);if(L&&D&&(F.rangeCount!==1||F.anchorNode!==L.node||F.anchorOffset!==L.offset||F.focusNode!==D.node||F.focusOffset!==D.offset)){var V=Q.createRange();V.setStart(L.node,L.offset),F.removeAllRanges(),me>Fe?(F.addRange(V),F.extend(D.node,D.offset)):(V.setEnd(D.node,D.offset),F.addRange(V))}}}}for(Q=[],F=T;F=F.parentNode;)F.nodeType===1&&Q.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<Q.length;T++){var Y=Q[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}ol=!!od,ld=od=null}finally{qe=v,Z.p=c,H.T=o}}n.current=s,gt=2}}function Vm(){if(gt===2){gt=0;var n=Ii,s=Zs,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=H.T,H.T=null;var c=Z.p;Z.p=2;var v=qe;qe|=4;try{mm(n,s.alternate,s)}finally{qe=v,Z.p=c,H.T=o}}gt=3}}function Hm(){if(gt===4||gt===3){gt=0,Pf();var n=Ii,s=Zs,o=si,c=Am;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?gt=5:(gt=0,Zs=Ii=null,Gm(n,n.pendingLanes));var v=n.pendingLanes;if(v===0&&(Ri=null),pc(o),s=s.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(rn,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=H.T,v=Z.p,Z.p=2,H.T=null;try{for(var x=n.onRecoverableError,_=0;_<c.length;_++){var T=c[_];x(T.value,{componentStack:T.stack})}}finally{H.T=s,Z.p=v}}(si&3)!==0&&Yo(),zn(n),v=n.pendingLanes,(o&261930)!==0&&(v&42)!==0?n===Ku?ha++:(ha=0,Ku=n):ha=0,pa(0)}}function Gm(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Kr(s)))}function Yo(){return qm(),Vm(),Hm(),Bm()}function Bm(){if(gt!==5)return!1;var n=Ii,s=Fu;Fu=0;var o=pc(si),c=H.T,v=Z.p;try{Z.p=32>o?32:o,H.T=null,o=Ju,Ju=null;var x=Ii,_=si;if(gt=0,Zs=Ii=null,si=0,(qe&6)!==0)throw Error(r(331));var T=qe;if(qe|=4,Tm(x.current),_m(x,x.current,_,o),qe=T,pa(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(rn,x)}catch{}return!0}finally{Z.p=v,H.T=c,Gm(n,s)}}function $m(n,s,o){s=cn(o,s),s=Nu(n.stateNode,s,2),n=Ei(n,s,2),n!==null&&(jr(n,2),zn(n))}function Ge(n,s,o){if(n.tag===3)$m(n,n,o);else for(;s!==null;){if(s.tag===3){$m(s,n,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ri===null||!Ri.has(c))){n=cn(o,n),o=Fp(2),c=Ei(s,o,2),c!==null&&(Jp(o,c,s,n),jr(c,2),zn(c));break}}s=s.return}}function Qu(n,s,o){var c=n.pingCache;if(c===null){c=n.pingCache=new Qb;var v=new Set;c.set(s,v)}else v=c.get(s),v===void 0&&(v=new Set,c.set(s,v));v.has(o)||(Gu=!0,v.add(o),n=nw.bind(null,n,s,o),s.then(n,n))}function nw(n,s,o){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Je===n&&(ke&o)===o&&(it===4||it===3&&(ke&62914560)===ke&&300>zt()-Go?(qe&2)===0&&er(n,0):Bu|=o,Ws===ke&&(Ws=0)),zn(n)}function Fm(n,s){s===0&&(s=qf()),n=Zi(n,s),n!==null&&(jr(n,s),zn(n))}function iw(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),Fm(n,o)}function sw(n,s){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,v=n.memoizedState;v!==null&&(o=v.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),Fm(n,o)}function rw(n,s){return Ya(n,s)}var Xo=null,nr=null,Wu=!1,Qo=!1,Zu=!1,Di=0;function zn(n){n!==nr&&n.next===null&&(nr===null?Xo=nr=n:nr=nr.next=n),Qo=!0,Wu||(Wu=!0,ow())}function pa(n,s){if(!Zu&&Qo){Zu=!0;do for(var o=!1,c=Xo;c!==null;){if(n!==0){var v=c.pendingLanes;if(v===0)var x=0;else{var _=c.suspendedLanes,T=c.pingedLanes;x=(1<<31-Ve(42|n)+1)-1,x&=v&~(_&~T),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(o=!0,Xm(c,x))}else x=ke,x=eo(c,c===Je?x:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(x&3)===0||Dr(c,x)||(o=!0,Xm(c,x));c=c.next}while(o);Zu=!1}}function aw(){Jm()}function Jm(){Qo=Wu=!1;var n=0;Di!==0&&vw()&&(n=Di);for(var s=zt(),o=null,c=Xo;c!==null;){var v=c.next,x=Km(c,s);x===0?(c.next=null,o===null?Xo=v:o.next=v,v===null&&(nr=o)):(o=c,(n!==0||(x&3)!==0)&&(Qo=!0)),c=v}gt!==0&&gt!==5||pa(n),Di!==0&&(Di=0)}function Km(n,s){for(var o=n.suspendedLanes,c=n.pingedLanes,v=n.expirationTimes,x=n.pendingLanes&-62914561;0<x;){var _=31-Ve(x),T=1<<_,I=v[_];I===-1?((T&o)===0||(T&c)!==0)&&(v[_]=Dx(T,s)):I<=s&&(n.expiredLanes|=T),x&=~T}if(s=Je,o=ke,o=eo(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===s&&(He===2||He===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Xa(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Dr(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(c!==null&&Xa(c),pc(o)){case 2:case 8:o=je;break;case 32:o=We;break;case 268435456:o=at;break;default:o=We}return c=Ym.bind(null,n),o=Ya(o,c),n.callbackPriority=s,n.callbackNode=o,s}return c!==null&&c!==null&&Xa(c),n.callbackPriority=2,n.callbackNode=null,2}function Ym(n,s){if(gt!==0&&gt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Yo()&&n.callbackNode!==o)return null;var c=ke;return c=eo(n,n===Je?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Rm(n,c,s),Km(n,zt()),n.callbackNode!=null&&n.callbackNode===o?Ym.bind(null,n):null)}function Xm(n,s){if(Yo())return null;Rm(n,s,!0)}function ow(){xw(function(){(qe&6)!==0?Ya(we,aw):Jm()})}function ed(){if(Di===0){var n=Vs;n===0&&(n=Qa,Qa<<=1,(Qa&261888)===0&&(Qa=256)),Di=n}return Di}function Qm(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:so(""+n)}function Wm(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function lw(n,s,o,c,v){if(s==="submit"&&o&&o.stateNode===v){var x=Qm((v[qt]||null).action),_=c.submitter;_&&(s=(s=_[qt]||null)?Qm(s.formAction):_.getAttribute("formAction"),s!==null&&(x=s,_=null));var T=new lo("action","action",null,c,v);n.push({event:T,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Di!==0){var I=_?Wm(v,_):new FormData(v);bu(o,{pending:!0,data:I,method:v.method,action:x},null,I)}}else typeof x=="function"&&(T.preventDefault(),I=_?Wm(v,_):new FormData(v),bu(o,{pending:!0,data:I,method:v.method,action:x},x,I))},currentTarget:v}]})}}for(var td=0;td<Lc.length;td++){var nd=Lc[td],cw=nd.toLowerCase(),uw=nd[0].toUpperCase()+nd.slice(1);_n(cw,"on"+uw)}_n(kh,"onAnimationEnd"),_n(Rh,"onAnimationIteration"),_n(Ih,"onAnimationStart"),_n("dblclick","onDoubleClick"),_n("focusin","onFocus"),_n("focusout","onBlur"),_n(Nb,"onTransitionRun"),_n(Cb,"onTransitionStart"),_n(Ab,"onTransitionCancel"),_n(Mh,"onTransitionEnd"),Cs("onMouseEnter",["mouseout","mouseover"]),Cs("onMouseLeave",["mouseout","mouseover"]),Cs("onPointerEnter",["pointerout","pointerover"]),Cs("onPointerLeave",["pointerout","pointerover"]),Yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ma));function Zm(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],v=c.event;c=c.listeners;e:{var x=void 0;if(s)for(var _=c.length-1;0<=_;_--){var T=c[_],I=T.instance,G=T.currentTarget;if(T=T.listener,I!==x&&v.isPropagationStopped())break e;x=T,v.currentTarget=G;try{x(v)}catch(J){fo(J)}v.currentTarget=null,x=I}else for(_=0;_<c.length;_++){if(T=c[_],I=T.instance,G=T.currentTarget,T=T.listener,I!==x&&v.isPropagationStopped())break e;x=T,v.currentTarget=G;try{x(v)}catch(J){fo(J)}v.currentTarget=null,x=I}}}}function Ce(n,s){var o=s[mc];o===void 0&&(o=s[mc]=new Set);var c=n+"__bubble";o.has(c)||(eg(s,n,2,!1),o.add(c))}function id(n,s,o){var c=0;s&&(c|=4),eg(o,n,c,s)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function sd(n){if(!n[Wo]){n[Wo]=!0,Jf.forEach(function(o){o!=="selectionchange"&&(dw.has(o)||id(o,!1,n),id(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Wo]||(s[Wo]=!0,id("selectionchange",!1,s))}}function eg(n,s,o,c){switch(kg(s)){case 2:var v=zw;break;case 8:v=qw;break;default:v=xd}o=v.bind(null,s,o,n),v=void 0,!Ec||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),c?v!==void 0?n.addEventListener(s,o,{capture:!0,passive:v}):n.addEventListener(s,o,!0):v!==void 0?n.addEventListener(s,o,{passive:v}):n.addEventListener(s,o,!1)}function rd(n,s,o,c,v){var x=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var T=c.stateNode.containerInfo;if(T===v)break;if(_===4)for(_=c.return;_!==null;){var I=_.tag;if((I===3||I===4)&&_.stateNode.containerInfo===v)return;_=_.return}for(;T!==null;){if(_=Es(T),_===null)return;if(I=_.tag,I===5||I===6||I===26||I===27){c=x=_;continue e}T=T.parentNode}}c=c.return}rh(function(){var G=x,J=_c(o),Q=[];e:{var $=Dh.get(n);if($!==void 0){var F=lo,le=n;switch(n){case"keypress":if(ao(o)===0)break e;case"keydown":case"keyup":F=sb;break;case"focusin":le="focus",F=Ac;break;case"focusout":le="blur",F=Ac;break;case"beforeblur":case"afterblur":F=Ac;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=lh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Fx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=ob;break;case kh:case Rh:case Ih:F=Yx;break;case Mh:F=cb;break;case"scroll":case"scrollend":F=Bx;break;case"wheel":F=db;break;case"copy":case"cut":case"paste":F=Qx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=uh;break;case"toggle":case"beforetoggle":F=hb}var me=(s&4)!==0,Fe=!me&&(n==="scroll"||n==="scrollend"),L=me?$!==null?$+"Capture":null:$;me=[];for(var D=G,V;D!==null;){var Y=D;if(V=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||V===null||L===null||(Y=Lr(D,L),Y!=null&&me.push(ga(D,Y,V))),Fe)break;D=D.return}0<me.length&&($=new F($,le,null,o,J),Q.push({event:$,listeners:me}))}}if((s&7)===0){e:{if($=n==="mouseover"||n==="pointerover",F=n==="mouseout"||n==="pointerout",$&&o!==wc&&(le=o.relatedTarget||o.fromElement)&&(Es(le)||le[Ss]))break e;if((F||$)&&($=J.window===J?J:($=J.ownerDocument)?$.defaultView||$.parentWindow:window,F?(le=o.relatedTarget||o.toElement,F=G,le=le?Es(le):null,le!==null&&(Fe=l(le),me=le.tag,le!==Fe||me!==5&&me!==27&&me!==6)&&(le=null)):(F=null,le=G),F!==le)){if(me=lh,Y="onMouseLeave",L="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(me=uh,Y="onPointerLeave",L="onPointerEnter",D="pointer"),Fe=F==null?$:Or(F),V=le==null?$:Or(le),$=new me(Y,D+"leave",F,o,J),$.target=Fe,$.relatedTarget=V,Y=null,Es(J)===G&&(me=new me(L,D+"enter",le,o,J),me.target=V,me.relatedTarget=Fe,Y=me),Fe=Y,F&&le)t:{for(me=fw,L=F,D=le,V=0,Y=L;Y;Y=me(Y))V++;Y=0;for(var he=D;he;he=me(he))Y++;for(;0<V-Y;)L=me(L),V--;for(;0<Y-V;)D=me(D),Y--;for(;V--;){if(L===D||D!==null&&L===D.alternate){me=L;break t}L=me(L),D=me(D)}me=null}else me=null;F!==null&&tg(Q,$,F,me,!1),le!==null&&Fe!==null&&tg(Q,Fe,le,me,!0)}}e:{if($=G?Or(G):window,F=$.nodeName&&$.nodeName.toLowerCase(),F==="select"||F==="input"&&$.type==="file")var Le=yh;else if(gh($))if(xh)Le=Sb;else{Le=wb;var ue=bb}else F=$.nodeName,!F||F.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?G&&bc(G.elementType)&&(Le=yh):Le=_b;if(Le&&(Le=Le(n,G))){vh(Q,Le,o,J);break e}ue&&ue(n,$,G),n==="focusout"&&G&&$.type==="number"&&G.memoizedProps.value!=null&&xc($,"number",$.value)}switch(ue=G?Or(G):window,n){case"focusin":(gh(ue)||ue.contentEditable==="true")&&(Ds=ue,jc=G,$r=null);break;case"focusout":$r=jc=Ds=null;break;case"mousedown":Uc=!0;break;case"contextmenu":case"mouseup":case"dragend":Uc=!1,Ch(Q,o,J);break;case"selectionchange":if(Tb)break;case"keydown":case"keyup":Ch(Q,o,J)}var Te;if(Rc)e:{switch(n){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Ms?ph(n,o)&&(Re="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Re="onCompositionStart");Re&&(dh&&o.locale!=="ko"&&(Ms||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Ms&&(Te=ah()):(vi=J,Tc="value"in vi?vi.value:vi.textContent,Ms=!0)),ue=Zo(G,Re),0<ue.length&&(Re=new ch(Re,n,null,o,J),Q.push({event:Re,listeners:ue}),Te?Re.data=Te:(Te=mh(o),Te!==null&&(Re.data=Te)))),(Te=mb?gb(n,o):vb(n,o))&&(Re=Zo(G,"onBeforeInput"),0<Re.length&&(ue=new ch("onBeforeInput","beforeinput",null,o,J),Q.push({event:ue,listeners:Re}),ue.data=Te)),lw(Q,n,G,o,J)}Zm(Q,s)})}function ga(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Zo(n,s){for(var o=s+"Capture",c=[];n!==null;){var v=n,x=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||x===null||(v=Lr(n,o),v!=null&&c.unshift(ga(n,v,x)),v=Lr(n,s),v!=null&&c.push(ga(n,v,x))),n.tag===3)return c;n=n.return}return[]}function fw(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function tg(n,s,o,c,v){for(var x=s._reactName,_=[];o!==null&&o!==c;){var T=o,I=T.alternate,G=T.stateNode;if(T=T.tag,I!==null&&I===c)break;T!==5&&T!==26&&T!==27||G===null||(I=G,v?(G=Lr(o,x),G!=null&&_.unshift(ga(o,G,I))):v||(G=Lr(o,x),G!=null&&_.push(ga(o,G,I)))),o=o.return}_.length!==0&&n.push({event:s,listeners:_})}var hw=/\r\n?/g,pw=/\u0000|\uFFFD/g;function ng(n){return(typeof n=="string"?n:""+n).replace(hw,`
`).replace(pw,"")}function ig(n,s){return s=ng(s),ng(n)===s}function $e(n,s,o,c,v,x){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||ks(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&ks(n,""+c);break;case"className":no(n,"class",c);break;case"tabIndex":no(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":no(n,o,c);break;case"style":ih(n,c,x);break;case"data":if(s!=="object"){no(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=so(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(o==="formAction"?(s!=="input"&&$e(n,s,"name",v.name,v,null),$e(n,s,"formEncType",v.formEncType,v,null),$e(n,s,"formMethod",v.formMethod,v,null),$e(n,s,"formTarget",v.formTarget,v,null)):($e(n,s,"encType",v.encType,v,null),$e(n,s,"method",v.method,v,null),$e(n,s,"target",v.target,v,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=so(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=Gn);break;case"onScroll":c!=null&&Ce("scroll",n);break;case"onScrollEnd":c!=null&&Ce("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(v.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=so(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ce("beforetoggle",n),Ce("toggle",n),to(n,"popover",c);break;case"xlinkActuate":Hn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Hn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Hn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Hn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Hn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Hn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":to(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Hx.get(o)||o,to(n,o,c))}}function ad(n,s,o,c,v,x){switch(o){case"style":ih(n,c,x);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(v.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof c=="string"?ks(n,c):(typeof c=="number"||typeof c=="bigint")&&ks(n,""+c);break;case"onScroll":c!=null&&Ce("scroll",n);break;case"onScrollEnd":c!=null&&Ce("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kf.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(v=o.endsWith("Capture"),s=o.slice(2,v?o.length-7:void 0),x=n[qt]||null,x=x!=null?x[o]:null,typeof x=="function"&&n.removeEventListener(s,x,v),typeof c=="function")){typeof x!="function"&&x!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,c,v);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):to(n,o,c)}}}function Ct(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",n),Ce("load",n);var c=!1,v=!1,x;for(x in o)if(o.hasOwnProperty(x)){var _=o[x];if(_!=null)switch(x){case"src":c=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:$e(n,s,x,_,o,null)}}v&&$e(n,s,"srcSet",o.srcSet,o,null),c&&$e(n,s,"src",o.src,o,null);return;case"input":Ce("invalid",n);var T=x=_=v=null,I=null,G=null;for(c in o)if(o.hasOwnProperty(c)){var J=o[c];if(J!=null)switch(c){case"name":v=J;break;case"type":_=J;break;case"checked":I=J;break;case"defaultChecked":G=J;break;case"value":x=J;break;case"defaultValue":T=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:$e(n,s,c,J,o,null)}}Zf(n,x,T,I,G,_,v,!1);return;case"select":Ce("invalid",n),c=_=x=null;for(v in o)if(o.hasOwnProperty(v)&&(T=o[v],T!=null))switch(v){case"value":x=T;break;case"defaultValue":_=T;break;case"multiple":c=T;default:$e(n,s,v,T,o,null)}s=x,o=_,n.multiple=!!c,s!=null?As(n,!!c,s,!1):o!=null&&As(n,!!c,o,!0);return;case"textarea":Ce("invalid",n),x=v=c=null;for(_ in o)if(o.hasOwnProperty(_)&&(T=o[_],T!=null))switch(_){case"value":c=T;break;case"defaultValue":v=T;break;case"children":x=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:$e(n,s,_,T,o,null)}th(n,c,v,x);return;case"option":for(I in o)if(o.hasOwnProperty(I)&&(c=o[I],c!=null))switch(I){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:$e(n,s,I,c,o,null)}return;case"dialog":Ce("beforetoggle",n),Ce("toggle",n),Ce("cancel",n),Ce("close",n);break;case"iframe":case"object":Ce("load",n);break;case"video":case"audio":for(c=0;c<ma.length;c++)Ce(ma[c],n);break;case"image":Ce("error",n),Ce("load",n);break;case"details":Ce("toggle",n);break;case"embed":case"source":case"link":Ce("error",n),Ce("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(c=o[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:$e(n,s,G,c,o,null)}return;default:if(bc(s)){for(J in o)o.hasOwnProperty(J)&&(c=o[J],c!==void 0&&ad(n,s,J,c,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(c=o[T],c!=null&&$e(n,s,T,c,o,null))}function mw(n,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,x=null,_=null,T=null,I=null,G=null,J=null;for(F in o){var Q=o[F];if(o.hasOwnProperty(F)&&Q!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":I=Q;default:c.hasOwnProperty(F)||$e(n,s,F,null,c,Q)}}for(var $ in c){var F=c[$];if(Q=o[$],c.hasOwnProperty($)&&(F!=null||Q!=null))switch($){case"type":x=F;break;case"name":v=F;break;case"checked":G=F;break;case"defaultChecked":J=F;break;case"value":_=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,s));break;default:F!==Q&&$e(n,s,$,F,c,Q)}}yc(n,_,T,I,G,J,x,v);return;case"select":F=_=T=$=null;for(x in o)if(I=o[x],o.hasOwnProperty(x)&&I!=null)switch(x){case"value":break;case"multiple":F=I;default:c.hasOwnProperty(x)||$e(n,s,x,null,c,I)}for(v in c)if(x=c[v],I=o[v],c.hasOwnProperty(v)&&(x!=null||I!=null))switch(v){case"value":$=x;break;case"defaultValue":T=x;break;case"multiple":_=x;default:x!==I&&$e(n,s,v,x,c,I)}s=T,o=_,c=F,$!=null?As(n,!!o,$,!1):!!c!=!!o&&(s!=null?As(n,!!o,s,!0):As(n,!!o,o?[]:"",!1));return;case"textarea":F=$=null;for(T in o)if(v=o[T],o.hasOwnProperty(T)&&v!=null&&!c.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:$e(n,s,T,null,c,v)}for(_ in c)if(v=c[_],x=o[_],c.hasOwnProperty(_)&&(v!=null||x!=null))switch(_){case"value":$=v;break;case"defaultValue":F=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==x&&$e(n,s,_,v,c,x)}eh(n,$,F);return;case"option":for(var le in o)if($=o[le],o.hasOwnProperty(le)&&$!=null&&!c.hasOwnProperty(le))switch(le){case"selected":n.selected=!1;break;default:$e(n,s,le,null,c,$)}for(I in c)if($=c[I],F=o[I],c.hasOwnProperty(I)&&$!==F&&($!=null||F!=null))switch(I){case"selected":n.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:$e(n,s,I,$,c,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in o)$=o[me],o.hasOwnProperty(me)&&$!=null&&!c.hasOwnProperty(me)&&$e(n,s,me,null,c,$);for(G in c)if($=c[G],F=o[G],c.hasOwnProperty(G)&&$!==F&&($!=null||F!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,s));break;default:$e(n,s,G,$,c,F)}return;default:if(bc(s)){for(var Fe in o)$=o[Fe],o.hasOwnProperty(Fe)&&$!==void 0&&!c.hasOwnProperty(Fe)&&ad(n,s,Fe,void 0,c,$);for(J in c)$=c[J],F=o[J],!c.hasOwnProperty(J)||$===F||$===void 0&&F===void 0||ad(n,s,J,$,c,F);return}}for(var L in o)$=o[L],o.hasOwnProperty(L)&&$!=null&&!c.hasOwnProperty(L)&&$e(n,s,L,null,c,$);for(Q in c)$=c[Q],F=o[Q],!c.hasOwnProperty(Q)||$===F||$==null&&F==null||$e(n,s,Q,$,c,F)}function sg(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function gw(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var v=o[c],x=v.transferSize,_=v.initiatorType,T=v.duration;if(x&&T&&sg(_)){for(_=0,T=v.responseEnd,c+=1;c<o.length;c++){var I=o[c],G=I.startTime;if(G>T)break;var J=I.transferSize,Q=I.initiatorType;J&&sg(Q)&&(I=I.responseEnd,_+=J*(I<T?1:(T-G)/(I-G)))}if(--c,s+=8*(x+_)/(v.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var od=null,ld=null;function el(n){return n.nodeType===9?n:n.ownerDocument}function rg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ag(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function cd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ud=null;function vw(){var n=window.event;return n&&n.type==="popstate"?n===ud?!1:(ud=n,!0):(ud=null,!1)}var og=typeof setTimeout=="function"?setTimeout:void 0,yw=typeof clearTimeout=="function"?clearTimeout:void 0,lg=typeof Promise=="function"?Promise:void 0,xw=typeof queueMicrotask=="function"?queueMicrotask:typeof lg<"u"?function(n){return lg.resolve(null).then(n).catch(bw)}:og;function bw(n){setTimeout(function(){throw n})}function ji(n){return n==="head"}function cg(n,s){var o=s,c=0;do{var v=o.nextSibling;if(n.removeChild(o),v&&v.nodeType===8)if(o=v.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(v),ar(s);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")va(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,va(o);for(var x=o.firstChild;x;){var _=x.nextSibling,T=x.nodeName;x[Ur]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&x.rel.toLowerCase()==="stylesheet"||o.removeChild(x),x=_}}else o==="body"&&va(n.ownerDocument.body);o=v}while(o);ar(s)}function ug(n,s){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function dd(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":dd(o),gc(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function ww(n,s,o,c){for(;n.nodeType===1;){var v=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Ur])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(x=n.getAttribute("rel"),x==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(x!==v.rel||n.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||n.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||n.getAttribute("title")!==(v.title==null?null:v.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(x=n.getAttribute("src"),(x!==(v.src==null?null:v.src)||n.getAttribute("type")!==(v.type==null?null:v.type)||n.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&x&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var x=v.name==null?null:""+v.name;if(v.type==="hidden"&&n.getAttribute("name")===x)return n}else return n;if(n=pn(n.nextSibling),n===null)break}return null}function _w(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=pn(n.nextSibling),n===null))return null;return n}function dg(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=pn(n.nextSibling),n===null))return null;return n}function fd(n){return n.data==="$?"||n.data==="$~"}function hd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Sw(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function pn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var pd=null;function fg(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return pn(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function hg(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function pg(n,s,o){switch(s=el(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function va(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);gc(n)}var mn=new Map,mg=new Set;function tl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ri=Z.d;Z.d={f:Ew,r:Tw,D:Nw,C:Cw,L:Aw,m:kw,X:Iw,S:Rw,M:Mw};function Ew(){var n=ri.f(),s=Fo();return n||s}function Tw(n){var s=Ts(n);s!==null&&s.tag===5&&s.type==="form"?Mp(s):ri.r(n)}var ir=typeof document>"u"?null:document;function gg(n,s,o){var c=ir;if(c&&typeof s=="string"&&s){var v=on(s);v='link[rel="'+n+'"][href="'+v+'"]',typeof o=="string"&&(v+='[crossorigin="'+o+'"]'),mg.has(v)||(mg.add(v),n={rel:n,crossOrigin:o,href:s},c.querySelector(v)===null&&(s=c.createElement("link"),Ct(s,"link",n),xt(s),c.head.appendChild(s)))}}function Nw(n){ri.D(n),gg("dns-prefetch",n,null)}function Cw(n,s){ri.C(n,s),gg("preconnect",n,s)}function Aw(n,s,o){ri.L(n,s,o);var c=ir;if(c&&n&&s){var v='link[rel="preload"][as="'+on(s)+'"]';s==="image"&&o&&o.imageSrcSet?(v+='[imagesrcset="'+on(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(v+='[imagesizes="'+on(o.imageSizes)+'"]')):v+='[href="'+on(n)+'"]';var x=v;switch(s){case"style":x=sr(n);break;case"script":x=rr(n)}mn.has(x)||(n=w({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),mn.set(x,n),c.querySelector(v)!==null||s==="style"&&c.querySelector(ya(x))||s==="script"&&c.querySelector(xa(x))||(s=c.createElement("link"),Ct(s,"link",n),xt(s),c.head.appendChild(s)))}}function kw(n,s){ri.m(n,s);var o=ir;if(o&&n){var c=s&&typeof s.as=="string"?s.as:"script",v='link[rel="modulepreload"][as="'+on(c)+'"][href="'+on(n)+'"]',x=v;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=rr(n)}if(!mn.has(x)&&(n=w({rel:"modulepreload",href:n},s),mn.set(x,n),o.querySelector(v)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(xa(x)))return}c=o.createElement("link"),Ct(c,"link",n),xt(c),o.head.appendChild(c)}}}function Rw(n,s,o){ri.S(n,s,o);var c=ir;if(c&&n){var v=Ns(c).hoistableStyles,x=sr(n);s=s||"default";var _=v.get(x);if(!_){var T={loading:0,preload:null};if(_=c.querySelector(ya(x)))T.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":s},o),(o=mn.get(x))&&md(n,o);var I=_=c.createElement("link");xt(I),Ct(I,"link",n),I._p=new Promise(function(G,J){I.onload=G,I.onerror=J}),I.addEventListener("load",function(){T.loading|=1}),I.addEventListener("error",function(){T.loading|=2}),T.loading|=4,nl(_,s,c)}_={type:"stylesheet",instance:_,count:1,state:T},v.set(x,_)}}}function Iw(n,s){ri.X(n,s);var o=ir;if(o&&n){var c=Ns(o).hoistableScripts,v=rr(n),x=c.get(v);x||(x=o.querySelector(xa(v)),x||(n=w({src:n,async:!0},s),(s=mn.get(v))&&gd(n,s),x=o.createElement("script"),xt(x),Ct(x,"link",n),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},c.set(v,x))}}function Mw(n,s){ri.M(n,s);var o=ir;if(o&&n){var c=Ns(o).hoistableScripts,v=rr(n),x=c.get(v);x||(x=o.querySelector(xa(v)),x||(n=w({src:n,async:!0,type:"module"},s),(s=mn.get(v))&&gd(n,s),x=o.createElement("script"),xt(x),Ct(x,"link",n),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},c.set(v,x))}}function vg(n,s,o,c){var v=(v=Ee.current)?tl(v):null;if(!v)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=sr(o.href),o=Ns(v).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=sr(o.href);var x=Ns(v).hoistableStyles,_=x.get(n);if(_||(v=v.ownerDocument||v,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(n,_),(x=v.querySelector(ya(n)))&&!x._p&&(_.instance=x,_.state.loading=5),mn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},mn.set(n,o),x||Dw(v,n,o,_.state))),s&&c===null)throw Error(r(528,""));return _}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=rr(o),o=Ns(v).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function sr(n){return'href="'+on(n)+'"'}function ya(n){return'link[rel="stylesheet"]['+n+"]"}function yg(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function Dw(n,s,o,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Ct(s,"link",o),xt(s),n.head.appendChild(s))}function rr(n){return'[src="'+on(n)+'"]'}function xa(n){return"script[async]"+n}function xg(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+on(o.href)+'"]');if(c)return s.instance=c,xt(c),c;var v=w({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),xt(c),Ct(c,"style",v),nl(c,o.precedence,n),s.instance=c;case"stylesheet":v=sr(o.href);var x=n.querySelector(ya(v));if(x)return s.state.loading|=4,s.instance=x,xt(x),x;c=yg(o),(v=mn.get(v))&&md(c,v),x=(n.ownerDocument||n).createElement("link"),xt(x);var _=x;return _._p=new Promise(function(T,I){_.onload=T,_.onerror=I}),Ct(x,"link",c),s.state.loading|=4,nl(x,o.precedence,n),s.instance=x;case"script":return x=rr(o.src),(v=n.querySelector(xa(x)))?(s.instance=v,xt(v),v):(c=o,(v=mn.get(x))&&(c=w({},o),gd(c,v)),n=n.ownerDocument||n,v=n.createElement("script"),xt(v),Ct(v,"link",c),n.head.appendChild(v),s.instance=v);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,nl(c,o.precedence,n));return s.instance}function nl(n,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=c.length?c[c.length-1]:null,x=v,_=0;_<c.length;_++){var T=c[_];if(T.dataset.precedence===s)x=T;else if(x!==v)break}x?x.parentNode.insertBefore(n,x.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function md(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function gd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var il=null;function bg(n,s,o){if(il===null){var c=new Map,v=il=new Map;v.set(o,c)}else v=il,c=v.get(o),c||(c=new Map,v.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),v=0;v<o.length;v++){var x=o[v];if(!(x[Ur]||x[St]||n==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var _=x.getAttribute(s)||"";_=n+_;var T=c.get(_);T?T.push(x):c.set(_,[x])}}return c}function wg(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function jw(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function _g(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Uw(n,s,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var v=sr(c.href),x=s.querySelector(ya(v));if(x){s=x._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=sl.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=x,xt(x);return}x=s.ownerDocument||s,c=yg(c),(v=mn.get(v))&&md(c,v),x=x.createElement("link"),xt(x);var _=x;_._p=new Promise(function(T,I){_.onload=T,_.onerror=I}),Ct(x,"link",c),o.instance=x}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=sl.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var vd=0;function Ow(n,s){return n.stylesheets&&n.count===0&&al(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&al(n,n.stylesheets),n.unsuspend){var x=n.unsuspend;n.unsuspend=null,x()}},6e4+s);0<n.imgBytes&&vd===0&&(vd=62500*gw());var v=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&al(n,n.stylesheets),n.unsuspend)){var x=n.unsuspend;n.unsuspend=null,x()}},(n.imgBytes>vd?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(v)}}:null}function sl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)al(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var rl=null;function al(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,rl=new Map,s.forEach(Lw,n),rl=null,sl.call(n))}function Lw(n,s){if(!(s.state.loading&4)){var o=rl.get(n);if(o)var c=o.get(null);else{o=new Map,rl.set(n,o);for(var v=n.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<v.length;x++){var _=v[x];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),c=_)}c&&o.set(null,c)}v=s.instance,_=v.getAttribute("data-precedence"),x=o.get(_)||c,x===c&&o.set(null,v),o.set(_,v),this.count++,c=sl.bind(this),v.addEventListener("load",c),v.addEventListener("error",c),x?x.parentNode.insertBefore(v,x.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(v,n.firstChild)),s.state.loading|=4}}var ba={$$typeof:R,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function Pw(n,s,o,c,v,x,_,T,I){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fc(0),this.hiddenUpdates=fc(null),this.identifierPrefix=c,this.onUncaughtError=v,this.onCaughtError=x,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function Sg(n,s,o,c,v,x,_,T,I,G,J,Q){return n=new Pw(n,s,o,_,I,G,J,Q,T),s=1,x===!0&&(s|=24),x=Yt(3,null,null,s),n.current=x,x.stateNode=n,s=Xc(),s.refCount++,n.pooledCache=s,s.refCount++,x.memoizedState={element:c,isDehydrated:o,cache:s},eu(x),n}function Eg(n){return n?(n=Os,n):Os}function Tg(n,s,o,c,v,x){v=Eg(v),c.context===null?c.context=v:c.pendingContext=v,c=Si(s),c.payload={element:o},x=x===void 0?null:x,x!==null&&(c.callback=x),o=Ei(n,c,s),o!==null&&(Ft(o,n,s),Wr(o,n,s))}function Ng(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function yd(n,s){Ng(n,s),(n=n.alternate)&&Ng(n,s)}function Cg(n){if(n.tag===13||n.tag===31){var s=Zi(n,67108864);s!==null&&Ft(s,n,67108864),yd(n,67108864)}}function Ag(n){if(n.tag===13||n.tag===31){var s=en();s=hc(s);var o=Zi(n,s);o!==null&&Ft(o,n,s),yd(n,s)}}var ol=!0;function zw(n,s,o,c){var v=H.T;H.T=null;var x=Z.p;try{Z.p=2,xd(n,s,o,c)}finally{Z.p=x,H.T=v}}function qw(n,s,o,c){var v=H.T;H.T=null;var x=Z.p;try{Z.p=8,xd(n,s,o,c)}finally{Z.p=x,H.T=v}}function xd(n,s,o,c){if(ol){var v=bd(c);if(v===null)rd(n,s,c,ll,o),Rg(n,c);else if(Hw(v,n,s,o,c))c.stopPropagation();else if(Rg(n,c),s&4&&-1<Vw.indexOf(n)){for(;v!==null;){var x=Ts(v);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var _=Ki(x.pendingLanes);if(_!==0){var T=x;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var I=1<<31-Ve(_);T.entanglements[1]|=I,_&=~I}zn(x),(qe&6)===0&&(Bo=zt()+500,pa(0))}}break;case 31:case 13:T=Zi(x,2),T!==null&&Ft(T,x,2),Fo(),yd(x,2)}if(x=bd(c),x===null&&rd(n,s,c,ll,o),x===v)break;v=x}v!==null&&c.stopPropagation()}else rd(n,s,c,null,o)}}function bd(n){return n=_c(n),wd(n)}var ll=null;function wd(n){if(ll=null,n=Es(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=u(s),n!==null)return n;n=null}else if(o===31){if(n=h(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return ll=n,null}function kg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zf()){case we:return 2;case je:return 8;case We:case ct:return 32;case at:return 268435456;default:return 32}default:return 32}}var _d=!1,Ui=null,Oi=null,Li=null,wa=new Map,_a=new Map,Pi=[],Vw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rg(n,s){switch(n){case"focusin":case"focusout":Ui=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":wa.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_a.delete(s.pointerId)}}function Sa(n,s,o,c,v,x){return n===null||n.nativeEvent!==x?(n={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:x,targetContainers:[v]},s!==null&&(s=Ts(s),s!==null&&Cg(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),n)}function Hw(n,s,o,c,v){switch(s){case"focusin":return Ui=Sa(Ui,n,s,o,c,v),!0;case"dragenter":return Oi=Sa(Oi,n,s,o,c,v),!0;case"mouseover":return Li=Sa(Li,n,s,o,c,v),!0;case"pointerover":var x=v.pointerId;return wa.set(x,Sa(wa.get(x)||null,n,s,o,c,v)),!0;case"gotpointercapture":return x=v.pointerId,_a.set(x,Sa(_a.get(x)||null,n,s,o,c,v)),!0}return!1}function Ig(n){var s=Es(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){n.blockedOn=s,$f(n.priority,function(){Ag(o)});return}}else if(s===31){if(s=h(o),s!==null){n.blockedOn=s,$f(n.priority,function(){Ag(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function cl(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=bd(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);wc=c,o.target.dispatchEvent(c),wc=null}else return s=Ts(o),s!==null&&Cg(s),n.blockedOn=o,!1;s.shift()}return!0}function Mg(n,s,o){cl(n)&&o.delete(s)}function Gw(){_d=!1,Ui!==null&&cl(Ui)&&(Ui=null),Oi!==null&&cl(Oi)&&(Oi=null),Li!==null&&cl(Li)&&(Li=null),wa.forEach(Mg),_a.forEach(Mg)}function ul(n,s){n.blockedOn===s&&(n.blockedOn=null,_d||(_d=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Gw)))}var dl=null;function Dg(n){dl!==n&&(dl=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){dl===n&&(dl=null);for(var s=0;s<n.length;s+=3){var o=n[s],c=n[s+1],v=n[s+2];if(typeof c!="function"){if(wd(c||o)===null)continue;break}var x=Ts(o);x!==null&&(n.splice(s,3),s-=3,bu(x,{pending:!0,data:v,method:o.method,action:c},c,v))}}))}function ar(n){function s(I){return ul(I,n)}Ui!==null&&ul(Ui,n),Oi!==null&&ul(Oi,n),Li!==null&&ul(Li,n),wa.forEach(s),_a.forEach(s);for(var o=0;o<Pi.length;o++){var c=Pi[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Pi.length&&(o=Pi[0],o.blockedOn===null);)Ig(o),o.blockedOn===null&&Pi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var v=o[c],x=o[c+1],_=v[qt]||null;if(typeof x=="function")_||Dg(o);else if(_){var T=null;if(x&&x.hasAttribute("formAction")){if(v=x,_=x[qt]||null)T=_.formAction;else if(wd(v)!==null)continue}else T=_.action;typeof T=="function"?o[c+1]=T:(o.splice(c,3),c-=3),Dg(o)}}}function jg(){function n(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(_){return v=_})},focusReset:"manual",scroll:"manual"})}function s(){v!==null&&(v(),v=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,v=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),v!==null&&(v(),v=null)}}}function Sd(n){this._internalRoot=n}fl.prototype.render=Sd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,c=en();Tg(o,c,n,s,null,null)},fl.prototype.unmount=Sd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Tg(n.current,2,null,n,null,null),Fo(),s[Ss]=null}};function fl(n){this._internalRoot=n}fl.prototype.unstable_scheduleHydration=function(n){if(n){var s=Bf();n={blockedOn:null,target:n,priority:s};for(var o=0;o<Pi.length&&s!==0&&s<Pi[o].priority;o++);Pi.splice(o,0,n),o===0&&Ig(n)}};var Ug=e.version;if(Ug!=="19.2.4")throw Error(r(527,Ug,"19.2.4"));Z.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(s),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var Bw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hl.isDisabled&&hl.supportsFiber)try{rn=hl.inject(Bw),Ue=hl}catch{}}return Ta.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,c="",v=Hp,x=Gp,_=Bp;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(v=s.onUncaughtError),s.onCaughtError!==void 0&&(x=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=Sg(n,1,!1,null,null,o,c,null,v,x,_,jg),n[Ss]=s.current,sd(n),new Sd(s)},Ta.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var c=!1,v="",x=Hp,_=Gp,T=Bp,I=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(v=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(I=o.formState)),s=Sg(n,1,!0,s,o??null,c,v,I,x,_,T,jg),s.context=Eg(null),o=s.current,c=en(),c=hc(c),v=Si(c),v.callback=null,Ei(o,v,c),o=c,s.current.lanes=o,jr(s,o),zn(s),n[Ss]=s.current,sd(n),new fl(s)},Ta.version="19.2.4",Ta}var Fg;function x_(){if(Fg)return Td.exports;Fg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Td.exports=y_(),Td.exports}var b_=x_(),P=xf();const w_=u_(P);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ry=(...t)=>t.filter((e,i,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===i).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var S_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=P.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:u,...h},g)=>P.createElement("svg",{ref:g,...S_,width:e,height:e,stroke:t,strokeWidth:r?Number(i)*24/Number(e):i,className:ry("lucide",a),...h},[...u.map(([p,y])=>P.createElement(p,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=(t,e)=>{const i=P.forwardRef(({className:r,...a},l)=>P.createElement(E_,{ref:l,iconNode:e,className:ry(`lucide-${__(t)}`,r),...a}));return i.displayName=`${t}`,i};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],N_=se("ArrowLeft",T_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Cl=se("ArrowRight",C_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],k_=se("Bell",A_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ay=se("Briefcase",R_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],oy=se("Calendar",I_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Cr=se("Camera",M_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],j_=se("Car",D_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],O_=se("CheckCheck",U_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ly=se("Check",L_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],It=se("ChevronLeft",P_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$a=se("ChevronRight",z_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],bf=se("CircleAlert",q_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],H_=se("CircleCheckBig",V_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ql=se("CircleCheck",G_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],$_=se("CirclePlus",B_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],J_=se("CircleX",F_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ar=se("Clock",K_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],X_=se("CreditCard",Y_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]],W_=se("Diamond",Q_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],e1=se("DollarSign",Z_);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],n1=se("Droplet",t1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],cy=se("EllipsisVertical",i1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],r1=se("EyeOff",s1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],o1=se("Eye",a1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],c1=se("Filter",l1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Vd=se("Globe",u1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]],Dl=se("Hammer",d1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],jl=se("Heart",f1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],p1=se("History",h1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Ul=se("House",m1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],bs=se("Image",g1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ol=se("Info",v1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],uy=se("LayoutGrid",y1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],b1=se("Leaf",x1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],_1=se("Lightbulb",w1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Lt=se("LoaderCircle",S1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],dy=se("Lock",E1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],N1=se("LogOut",T1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Wl=se("Mail",C1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],di=se("MapPin",A1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],xs=se("Maximize2",k1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],wf=se("MessageCircle",R1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M13 8H7",key:"14i4kc"}],["path",{d:"M17 12H7",key:"16if0g"}]],M1=se("MessageSquareText",I1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Zl=se("MessageSquare",D1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],fy=se("Mic",j1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],O1=se("Moon",U1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],P1=se("Package",L1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],q1=se("Paintbrush",z1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],_f=se("Pen",V1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],ec=se("Phone",H1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],B1=se("Plus",G1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],F1=se("Quote",$1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ci=se("Search",J1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],tc=se("Send",K1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],X1=se("Settings",Y1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Hd=se("Share2",Q1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Jg=se("ShieldAlert",W1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ws=se("ShieldCheck",Z1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Gd=se("Shield",eS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],hy=se("SlidersHorizontal",tS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],iS=se("Smile",nS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Tr=se("Sparkles",sS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],aS=se("SquarePen",rS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],jt=se("Star",oS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Kg=se("Target",lS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Fa=se("Trash2",cS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dS=se("TriangleAlert",uS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],hS=se("UserCheck",fS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ll=se("User",pS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Pl=se("Users",mS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],vS=se("Wallet",gS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],xS=se("Wind",yS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],wS=se("Wrench",bS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yn=se("X",_S);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],li=se("Zap",SS),Nr=[{id:"1",name:"Climatisation",icon:"Wind",color:"bg-teal-500/20 text-teal-400",count:12,description:"Installation et entretien de systmes de climatisation.",image:"",interventions:[]},{id:"2",name:"Plomberie",icon:"Droplet",color:"bg-blue-500/20 text-blue-400",count:24,description:"Experts certifis pour tous vos besoins de plomberie.",image:"",interventions:[]},{id:"3",name:"lectricit",icon:"Lightbulb",color:"bg-yellow-500/20 text-yellow-400",count:18,description:"Solutions lectriques sres et modernes.",image:"",interventions:[]},{id:"4",name:"Peinture",icon:"Paintbrush",color:"bg-pink-500/20 text-pink-400",count:15,description:"Embellissez votre intrieur avec nos peintres experts.",image:"",interventions:[]},{id:"5",name:"Menuiserie",icon:"Wrench",color:"bg-purple-500/20 text-purple-400",count:9,description:"Conception et rparation de meubles.",image:"",interventions:[]},{id:"6",name:"Scurit",icon:"Shield",color:"bg-emerald-500/20 text-emerald-400",count:7,description:"Systmes d'alarme et surveillance.",image:"",interventions:[]},{id:"7",name:"Maonnerie",icon:"Hammer",color:"bg-indigo-500/20 text-indigo-400",count:11,description:"Gros uvre et rnovations murales.",image:"",interventions:[]},{id:"8",name:"Nettoyage",icon:"Sparkles",color:"bg-cyan-500/20 text-cyan-400",count:30,description:"Nettoyage professionnel rsidentiel et commercial.",image:"",interventions:[]},{id:"9",name:"Dcoration",icon:"Home",color:"bg-fuchsia-500/20 text-fuchsia-400",count:8,description:"Amnagement d'intrieur et design.",image:"",interventions:[]},{id:"10",name:"Mcanique",icon:"Car",color:"bg-orange-500/20 text-orange-400",count:14,description:"Entretien et rparation automobile.",image:"",interventions:[]},{id:"11",name:"Jardinage",icon:"Leaf",color:"bg-green-500/20 text-green-400",count:10,description:"Entretien d'espaces verts et paysagisme.",image:"",interventions:[]},{id:"12",name:"Photographie",icon:"Camera",color:"bg-violet-500/20 text-violet-400",count:6,description:"Capturez vos moments importants.",image:"",interventions:[]}],ES={apiKey:"AIzaSyChaguaGghhYRdmKRJsO7AStFM7VeT1SHc",authDomain:"vork-1092c.firebaseapp.com",projectId:"vork-1092c",storageBucket:"vork-1092c.firebasestorage.app",messagingSenderId:"587012804050",appId:"1:587012804050:web:d93a8a3f6345b9bebe4c0b"},Sf=Fw(ES),fe=Jw(Sf);Zw(Sf);const sn=e_(Sf);var TS=10,yr="0123456789bcdefghjkmnpqrstuvwxyz",NS=40007860,py=110574,Da=5,my=22*Da,CS=6378137,AS=.00669447819799,kS=1e-12;function gy(t){return Math.log(t)/Math.log(2)}function zl(t){var e;if(!Array.isArray(t))e="location must be an array";else if(t.length!==2)e="expected array of length 2, got length "+t.length;else{var i=t[0],r=t[1];typeof i!="number"||isNaN(i)?e="latitude must be a number":i<-90||i>90?e="latitude must be within the range [-90, 90]":typeof r!="number"||isNaN(r)?e="longitude must be a number":(r<-180||r>180)&&(e="longitude must be within the range [-180, 180]")}if(typeof e<"u")throw new Error("Invalid GeoFire location '"+t+"': "+e)}function RS(t){var e;if(typeof t!="string")e="geohash must be a string";else if(t.length===0)e="geohash cannot be the empty string";else for(var i=0,r=t;i<r.length;i++){var a=r[i];yr.indexOf(a)===-1&&(e="geohash cannot contain '"+a+"'")}if(typeof e<"u")throw new Error("Invalid GeoFire geohash '"+t+"': "+e)}function ka(t){if(typeof t!="number"||isNaN(t))throw new Error("Error: degrees must be a number");return t*Math.PI/180}function vy(t,e){if(e===void 0&&(e=TS),zl(t),typeof e<"u"){if(typeof e!="number"||isNaN(e))throw new Error("precision must be a number");if(e<=0)throw new Error("precision must be greater than 0");if(e>22)throw new Error("precision cannot be greater than 22");if(Math.round(e)!==e)throw new Error("precision must be an integer")}for(var i={min:-90,max:90},r={min:-180,max:180},a="",l=0,u=0,h=1;a.length<e;){var g=h?t[1]:t[0],p=h?r:i,y=(p.min+p.max)/2;g>y?(l=(l<<1)+1,p.min=y):(l=(l<<1)+0,p.max=y),h=!h,u<4?u++:(u=0,a+=yr[l],l=0)}return a}function Bd(t,e){var i=ka(e),r=Math.cos(i)*CS*Math.PI/180,a=1/Math.sqrt(1-AS*Math.sin(i)*Math.sin(i)),l=r*a;return l<kS?t>0?360:0:Math.min(360,t/l)}function Yg(t,e){var i=Bd(t,e);return Math.abs(i)>1e-6?Math.max(1,gy(360/i)):1}function IS(t){return Math.min(gy(NS/2/t),my)}function or(t){if(t<=180&&t>=-180)return t;var e=t+180;return e>0?e%360-180:180- -e%360}function MS(t,e){var i=e/py,r=Math.min(90,t[0]+i),a=Math.max(-90,t[0]-i),l=Math.floor(IS(e))*2,u=Math.floor(Yg(e,r))*2-1,h=Math.floor(Yg(e,a))*2-1;return Math.min(l,u,h,my)}function DS(t,e){var i=e/py,r=Math.min(90,t[0]+i),a=Math.max(-90,t[0]-i),l=Bd(e,r),u=Bd(e,a),h=Math.max(l,u);return[[t[0],t[1]],[t[0],or(t[1]-h)],[t[0],or(t[1]+h)],[r,t[1]],[r,or(t[1]-h)],[r,or(t[1]+h)],[a,t[1]],[a,or(t[1]-h)],[a,or(t[1]+h)]]}function jS(t,e){RS(t);var i=Math.ceil(e/Da);if(t.length<i)return[t,t+"~"];t=t.substring(0,i);var r=t.substring(0,t.length-1),a=yr.indexOf(t.charAt(t.length-1)),l=e-r.length*Da,u=Da-l,h=a>>u<<u,g=h+(1<<u);return g>31?[r+yr[h],r+"~"]:[r+yr[h],r+yr[g]]}function US(t,e){zl(t);var i=Math.max(1,MS(t,e)),r=Math.ceil(i/Da),a=DS(t,e),l=a.map(function(u){return jS(vy(u,r),i)});return l.filter(function(u,h){return!l.some(function(g,p){return h>p&&u[0]===g[0]&&u[1]===g[1]})})}function yy(t,e){zl(t),zl(e);var i=6371,r=ka(e[0]-t[0]),a=ka(e[1]-t[1]),l=Math.sin(r/2)*Math.sin(r/2)+Math.cos(ka(t[0]))*Math.cos(ka(e[0]))*Math.sin(a/2)*Math.sin(a/2),u=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return i*u}const ql=(t,e)=>{if(!t||!e||t.lat===0&&t.lng===0||e.lat===0&&e.lng===0)return 1/0;const i=6371e3,r=(e.lat-t.lat)*Math.PI/180,a=(e.lng-t.lng)*Math.PI/180,l=Math.sin(r/2)*Math.sin(r/2)+Math.cos(t.lat*Math.PI/180)*Math.cos(e.lat*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2),u=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return i*u},xy=(t,e)=>{if(!t||!e)return null;const i=ql(t,e);return i===1/0?null:i<1e3?`${Math.round(i)} m`:`${(i/1e3).toFixed(1)} km`},OS=async(t,e,i)=>{if(!(e===0&&i===0))try{const r=Ae(fe,"users",t);await Jt(r,{locationCoords:{lat:e,lng:i},lastSeen:Ma()}),console.debug(`[Location] Client ${t} updated.`)}catch(r){console.error("[Location] Failed to update client location:",r)}},LS=async(t,e,i)=>{if(!(!e&&!i)&&!(e===0&&i===0))try{const r=vy([e,i]),a=Ae(fe,"artisans",t);await Jt(a,{g:r,lastUpdate:Ma(),locationCoords:{lat:e,lng:i},location:"Localisation GPS"}),console.debug(`[Location] Artisan ${t} updated (Hash: ${r}).`)}catch(r){console.error("[Location] Failed to update artisan location:",r)}},by=({name:t,className:e})=>{switch(t){case"Wind":return d.jsx(xS,{className:e});case"Droplet":return d.jsx(n1,{className:e});case"Lightbulb":return d.jsx(_1,{className:e});case"Paintbrush":return d.jsx(q1,{className:e});case"Wrench":return d.jsx(wS,{className:e});case"Shield":return d.jsx(Gd,{className:e});case"Hammer":return d.jsx(Dl,{className:e});case"Sparkles":return d.jsx(Tr,{className:e});case"Home":return d.jsx(Ul,{className:e});case"Car":return d.jsx(j_,{className:e});case"Leaf":return d.jsx(b1,{className:e});case"Camera":return d.jsx(Cr,{className:e});default:return d.jsx(Dl,{className:e})}},PS=t=>{if(!t||typeof t!="string")return"??";const e=t.trim().split(/\s+/);return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():e[0][0].toUpperCase()},zS=t=>!t||typeof t!="string"?!1:t.startsWith("data:")||t.startsWith("http")||t.startsWith("blob:"),yt=({src:t,name:e,className:i="w-full h-full",initialsClassName:r="text-xl font-black text-white/90",timeout:a=2e3})=>{const[l,u]=P.useState(!1),[h,g]=P.useState(!1),p=P.useRef(null),y=typeof t=="string"?t:"";P.useEffect(()=>{u(!1),g(!1);let b;const S=()=>{p.current&&p.current.complete&&p.current.naturalWidth>0&&(u(!0),b&&clearInterval(b))};return y&&(S(),b=setInterval(S,100)),()=>{b&&clearInterval(b)}},[y]);const w=PS(e);return d.jsxs("div",{className:`relative overflow-hidden flex items-center justify-center bg-slate-800 ${i}`,children:[d.jsx("span",{className:`${r} absolute z-0 select-none text-center px-1 transition-opacity duration-300 ${l?"opacity-0":"opacity-100"}`,children:w}),y&&zS(y)&&!h&&d.jsx("img",{ref:p,src:y,alt:e,className:`absolute inset-0 w-full h-full object-cover z-10 transition-opacity duration-700 ${l?"opacity-100":"opacity-0"}`,onLoad:()=>u(!0),onError:()=>g(!0)})]})},Xg=({title:t,onSeeAll:e})=>d.jsxs("div",{className:"flex justify-between items-end mb-4 px-6",children:[d.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:t}),e&&d.jsxs("button",{onClick:e,className:"text-[#a855f7] text-sm font-semibold flex items-center gap-1 hover:text-[#ec4899] transition-colors",children:["Voir tout ",d.jsx($a,{className:"w-4 h-4"})]})]}),qS=({art:t,userLocation:e,onSelect:i,onReserve:r})=>{const a=xy(e,t.locationCoords)||t.distance;return d.jsxs("div",{onClick:i,className:"relative glass-card rounded-[2.5rem] p-6 shadow-2xl border border-white/5 hover:border-[#a855f7]/20 transition-all cursor-pointer group bg-[#121214]/60",children:[d.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-[#a855f7]/5 rounded-full blur-3xl pointer-events-none group-hover:bg-[#a855f7]/15 transition-colors"}),d.jsxs("div",{className:"flex flex-col gap-6 relative z-10",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"w-[72px] h-[72px] rounded-full border-2 border-[#a855f7] shadow-[0_0_15px_rgba(168,85,247,0.2)] overflow-hidden",children:d.jsx(yt,{src:t.image,name:t.name,initialsClassName:"text-xl font-black text-white"})}),t.available&&d.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 bg-[#0a0a0c] rounded-full p-1 z-20",children:d.jsx("div",{className:"w-3.5 h-3.5 bg-[#34d399] rounded-full border border-[#0a0a0c]"})})]}),d.jsxs("div",{className:"pt-1",children:[d.jsx("h3",{className:"text-white text-lg font-black leading-tight tracking-tight mb-1",children:t.name}),d.jsxs("p",{className:"text-[#6366f1] text-[10px] font-black uppercase tracking-[0.1em]",children:[t.category," Expert"]}),d.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[d.jsx(jt,{className:"w-3 h-3 text-yellow-400 fill-current"}),d.jsx("span",{className:"text-yellow-400 text-xs font-black",children:t.rating})]})]})]}),d.jsx("div",{className:"bg-white/5 px-3 py-1.5 rounded-xl border border-white/5",children:d.jsx("span",{className:"text-[10px] text-slate-400 font-black tracking-widest uppercase",children:a})})]}),d.jsxs("div",{className:"flex items-center gap-2 px-1",children:[d.jsx(ws,{className:"w-4 h-4 text-[#34d399]"}),d.jsx("span",{className:"text-[#34d399] text-[10px] font-bold uppercase tracking-widest",children:"VORK Verified Expert"})]}),d.jsxs("div",{className:"flex gap-3 pt-2",children:[d.jsx("button",{onClick:l=>{l.stopPropagation(),i()},className:"flex-1 bg-white/5 py-4 rounded-2xl font-black text-[11px] text-white uppercase tracking-widest hover:bg-white/10 transition-colors border border-white/5",children:"Profil"}),d.jsx("button",{onClick:l=>{l.stopPropagation(),r(t)},className:"flex-1 bg-gradient-to-br from-[#a855f7] to-[#ec4899] py-4 rounded-2xl font-black text-[11px] text-white uppercase tracking-widest shadow-xl shadow-purple-500/20 active:scale-95 transition-all",children:"Rserver"})]})]})]})},VS=({userRole:t,setView:e,artisans:i,userLocation:r,setSelectedArtisan:a,openCategory:l,onReserve:u,onOpenAllCategories:h})=>{const g=t!=="artisan";return d.jsxs("div",{className:"pt-6 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-40",children:[g&&d.jsx("div",{className:"px-6 mb-10",children:d.jsxs("button",{onClick:()=>e("urgent"),className:"relative w-full glass-card p-8 rounded-[2.5rem] border border-red-500/20 flex flex-col items-start gap-4 active:scale-[0.98] transition-all overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-red-600/10 blur-3xl"}),d.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-2xl flex items-center justify-center shadow-2xl shadow-red-600/40",children:d.jsx(li,{className:"w-10 h-10 text-white animate-pulse"})}),d.jsxs("div",{className:"text-left relative z-10",children:[d.jsx("h3",{className:"text-3xl font-black text-white tracking-tighter uppercase leading-none mb-1",children:"BESOIN URGENT ?"}),d.jsx("p",{className:"text-red-200/60 font-medium",children:"Rponse d'experts en 2 min chrono"})]})]})}),d.jsxs("div",{className:"mb-10",children:[d.jsx(Xg,{title:"Catgories",onSeeAll:h}),d.jsx("div",{className:"flex overflow-x-auto gap-4 px-6 hide-scrollbar",children:Nr.map(p=>d.jsxs("button",{onClick:()=>l(p,"home"),className:"flex flex-col items-center gap-3 min-w-[100px] p-5 glass-card rounded-[2rem] hover:bg-white/10 transition-all active:scale-90",children:[d.jsx("div",{className:`${p.color.split(" ")[0]} w-12 h-12 rounded-2xl flex items-center justify-center shadow-xl shadow-white/5`,children:d.jsx(by,{name:p.icon,className:p.color.split(" ")[1]})}),d.jsx("span",{className:"text-[11px] font-bold text-slate-300 uppercase tracking-tight",children:p.name})]},p.id))})]}),d.jsxs("div",{className:"mb-10",children:[d.jsx(Xg,{title:"Top Artisans Pro",onSeeAll:()=>e("search")}),d.jsx("div",{className:"grid grid-cols-1 gap-6 px-6",children:i.slice(0,5).map(p=>d.jsx(qS,{art:p,userLocation:r,onSelect:()=>{a(p),e("artisan-detail")},onReserve:u},p.id))})]})]})},HS=({artisan:t,activeOrders:e,archivedOrders:i,onViewOrder:r,setView:a})=>{const l=i.reduce((u,h)=>{if(!h.assignedPrice)return u;const g=parseInt(h.assignedPrice.replace(/[^0-9]/g,""),10);return isNaN(g)?u:u+g},0);return d.jsxs("div",{className:"pt-6 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-40 px-6",children:[d.jsxs("div",{className:"mb-10",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.4em]",children:"TABLEAU DE BORD EXPERT"}),d.jsx("div",{className:"bg-emerald-500/10 text-emerald-400 px-3 py-1 rounded-full text-[8px] font-black uppercase tracking-widest border border-emerald-500/20",children:"EN LIGNE"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"bg-[#121214] border border-white/5 p-6 rounded-[2.5rem] shadow-xl relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-emerald-500/5 blur-2xl group-hover:bg-emerald-500/10 transition-all"}),d.jsx(vS,{size:16,className:"text-emerald-500 mb-2"}),d.jsxs("h3",{className:"text-2xl font-black text-white tracking-tighter",children:[l.toLocaleString()," F"]}),d.jsx("p",{className:"text-[9px] font-black text-slate-600 uppercase tracking-widest",children:"Revenus Estims"})]}),d.jsxs("div",{className:"bg-[#121214] border border-white/5 p-6 rounded-[2.5rem] shadow-xl relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-indigo-500/5 blur-2xl group-hover:bg-indigo-500/10 transition-all"}),d.jsx(ay,{size:16,className:"text-indigo-500 mb-2"}),d.jsx("h3",{className:"text-2xl font-black text-white tracking-tighter",children:t.jobsDone}),d.jsx("p",{className:"text-[9px] font-black text-slate-600 uppercase tracking-widest",children:"Jobs Effectus"})]})]})]}),d.jsxs("div",{className:"mb-10 group relative",children:[d.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 to-emerald-600 rounded-[2.6rem] blur opacity-25 group-hover:opacity-40 transition duration-1000"}),d.jsxs("button",{onClick:()=>a("marketplace"),className:"relative w-full py-8 bg-[#121214] border border-white/10 rounded-[2.5rem] flex items-center justify-between px-8 shadow-2xl active:scale-[0.98] transition-all",children:[d.jsxs("div",{className:"flex items-center gap-5",children:[d.jsx("div",{className:"size-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-indigo-600/30",children:d.jsx(li,{size:24,className:"fill-current animate-pulse"})}),d.jsxs("div",{className:"text-left",children:[d.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tight",children:"Ouvrir le March"}),d.jsx("p",{className:"text-slate-500 text-[9px] font-bold uppercase tracking-widest",children:"Postulez aux nouvelles offres"})]})]}),d.jsx(Cl,{className:"text-slate-700 group-hover:text-indigo-400 group-hover:translate-x-1 transition-all"})]})]}),d.jsxs("div",{className:"space-y-4 mb-10",children:[d.jsxs("div",{className:"flex justify-between items-end px-2",children:[d.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.3em]",children:"MISSIONS ACTIVES"}),d.jsxs("span",{className:"text-[9px] font-black text-indigo-500 uppercase",children:[e.length," EN COURS"]})]}),e.length>0?e.map(u=>d.jsxs("div",{onClick:()=>r(u),className:"bg-[#121214] border border-white/5 p-5 rounded-[2.2rem] flex items-center justify-between group cursor-pointer hover:border-indigo-500/30 transition-all",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"size-12 bg-white/5 rounded-xl flex items-center justify-center text-indigo-400",children:d.jsx(Ar,{size:24})}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-black text-sm uppercase tracking-tight",children:u.category}),d.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:u.location})]})]}),d.jsxs("div",{className:"flex flex-col items-end gap-1",children:[d.jsx("span",{className:"text-[8px] font-black px-2 py-0.5 bg-indigo-500/10 text-indigo-400 rounded-full border border-indigo-500/20",children:u.status}),d.jsx(Cl,{size:14,className:"text-slate-700 group-hover:translate-x-1 transition-all"})]})]},u.id)):d.jsxs("div",{className:"py-16 bg-white/[0.02] border border-dashed border-white/10 rounded-[2.5rem] text-center flex flex-col items-center justify-center gap-4",children:[d.jsx("div",{className:"size-16 bg-white/5 rounded-full flex items-center justify-center text-slate-700",children:d.jsx(uy,{size:32})}),d.jsx("p",{className:"text-slate-600 font-black text-[10px] uppercase tracking-widest",children:"Aucune mission en cours"})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-end px-2",children:[d.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.3em]",children:"HISTORIQUE & RALISATIONS"}),d.jsxs("button",{onClick:()=>a("artisan-history"),className:"text-[9px] font-black text-emerald-500 hover:text-emerald-400 uppercase flex items-center gap-1 transition-colors",children:["Voir tout ",d.jsx(Cl,{size:10})]})]}),i.length>0?i.slice(0,5).map(u=>d.jsxs("div",{onClick:()=>r(u),className:"bg-[#121214] border border-white/5 p-6 rounded-[2.5rem] flex items-center justify-between group cursor-pointer hover:border-emerald-500/30 transition-all relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 size-20 bg-emerald-500/5 blur-xl pointer-events-none"}),d.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[d.jsx("div",{className:"size-14 rounded-2xl overflow-hidden bg-slate-800 border border-white/5 shadow-lg",children:d.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-emerald-500 to-teal-600 text-white",children:d.jsx(Ql,{size:24})})}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-black text-sm uppercase tracking-tight",children:u.category}),d.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[d.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:u.date}),u.finalReview&&d.jsxs("div",{className:"flex items-center gap-0.5 bg-white/5 px-1.5 py-0.5 rounded-md",children:[d.jsx(jt,{size:8,className:"text-yellow-400 fill-current"}),d.jsx("span",{className:"text-[8px] font-bold text-white",children:u.finalReview.rating})]})]})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("span",{className:"text-emerald-400 font-black text-sm tracking-tight",children:u.assignedPrice||"N/A"}),d.jsx("p",{className:"text-[8px] text-slate-600 font-black uppercase tracking-widest mt-0.5",children:"Gagn"})]})]},u.id)):d.jsx("div",{className:"py-10 bg-white/[0.02] border border-dashed border-white/10 rounded-[2.5rem] text-center flex flex-col items-center justify-center",children:d.jsx("p",{className:"text-slate-600 font-black text-[10px] uppercase tracking-widest",children:"Aucune ralisation pour le moment"})})]})]})},rt=(t,e=new WeakSet)=>{if(t==null||typeof t!="object")return t;if(e.has(t))return"[Circular]";if(e.add(t),t instanceof Date)return t.toISOString();if(typeof t.toDate=="function")try{return t.toDate().toISOString()}catch{return null}if(typeof t.path=="string"&&typeof t.id=="string"&&t.parent)return t.path;if(typeof t.latitude=="number"&&typeof t.longitude=="number"&&Object.keys(t).length<=4)return{lat:t.latitude,lng:t.longitude};if(Array.isArray(t))return t.map(r=>rt(r,e));if(typeof t.toJSON=="function"&&!t.toDate)return t.toJSON();const i={};try{for(const r in t)r.startsWith("_")||r.startsWith("$")||r==="firestore"||r==="app"||r==="database"||Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=rt(t[r],e));return i}catch{try{const a=String(t);return a==="[object Object]"?null:a}catch{return null}}},GS=t=>!t||typeof t!="string"?!1:t.startsWith("data:")||t.startsWith("http")||t.startsWith("blob:"),$d=t=>!t||typeof t!="string"?"":t.replace(/vork-profile%20pic%20bucket/g,"vork-profilepic-bucket").replace(/vork-profile pic bucket/g,"vork-profilepic-bucket"),Qg=()=>d.jsx("div",{className:"bg-[#121214] border border-white/5 rounded-[2.5rem] p-5 animate-pulse",children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"size-20 rounded-[1.8rem] bg-white/5"}),d.jsxs("div",{className:"flex-1 space-y-3 py-1",children:[d.jsx("div",{className:"h-4 bg-white/5 rounded w-3/4"}),d.jsx("div",{className:"h-3 bg-white/5 rounded w-1/2"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("div",{className:"h-3 bg-white/5 rounded w-1/4"}),d.jsx("div",{className:"h-3 bg-white/5 rounded w-1/4"})]})]})]})}),BS=({setView:t,artisans:e,userLocation:i,setSelectedArtisan:r,searchFilterCategory:a,setSearchFilterCategory:l,searchFilterRating:u,setSearchFilterRating:h})=>{const[g,p]=P.useState("Tous"),[y,w]=P.useState(""),[b,S]=P.useState(e),[E,A]=P.useState(!1),[N,C]=P.useState(!0),k=P.useRef(null),R=P.useRef(null),M=P.useCallback(async(z=!1)=>{if(E||!z&&!N)return;A(!0);const O=et(fe,"artisans"),j=[Oa(20)],B=a!=="Tous";B?j.push(Rt("category","==",a)):g==="Mieux nots"?j.push(kn("rating","desc")):g==="Plus proche"?j.push(kn("distance","asc")):j.push(kn("createdAt","desc")),!z&&k.current&&j.push(iy(k.current));try{const q=wt(O,...j),W=await Xl(q);let te=W.docs.map(ce=>({id:ce.id,...rt(ce.data())}));B&&(g==="Mieux nots"?te.sort((ce,H)=>H.rating-ce.rating):g==="Plus proche"&&i?te.sort((ce,H)=>{const Z=ce.locationCoords?ql(i,ce.locationCoords):1/0,ie=H.locationCoords?ql(i,H.locationCoords):1/0;return Z-ie}):te.sort((ce,H)=>(H.createdAt||"").localeCompare(ce.createdAt||"")));const ae=y?te.filter(ce=>ce.name.toLowerCase().includes(y.toLowerCase())):te,K=ce=>ce.reduce((H,Z)=>H.find(ve=>ve.name===Z.name&&ve.category===Z.category)?H:H.concat([Z]),[]);S(z?K(ae):ce=>K([...ce,...ae]));const ee=W.docs[W.docs.length-1];if(ee){const ce=ee.data();B?k.current=ee:g==="Mieux nots"?k.current=ce.rating:g==="Plus proche"?k.current=ce.distance:k.current=ce.createdAt}else k.current=null;C(W.docs.length>=20)}catch(q){console.error("Error fetching artisans:",q),z&&S(e)}finally{A(!1)}},[a,y,g,e]);return P.useEffect(()=>{k.current=null,C(!0),M(!0)},[a,y,g]),P.useEffect(()=>{const z=new IntersectionObserver(O=>{O[0].isIntersecting&&N&&!E&&M(!1)},{threshold:.1,rootMargin:"500px"});return R.current&&z.observe(R.current),()=>z.disconnect()},[N,E,M]),d.jsxs("div",{className:"min-h-screen flex flex-col bg-[#0a0a0c] animate-in slide-in-from-right duration-300 pb-40",children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 flex items-center gap-4 sticky top-0 bg-[#0a0a0c]/95 backdrop-blur-md z-[60] border-b border-white/5",children:[d.jsx("button",{onClick:()=>t("home"),className:"p-2 bg-white/5 rounded-xl border border-white/10",children:d.jsx(It,{className:"w-6 h-6 text-white"})}),d.jsx("h1",{className:"text-xl font-black text-white tracking-tight uppercase",children:"Dcouvrir"})]}),d.jsx("div",{className:"px-6 mt-6 mb-4 relative z-50",children:d.jsxs("div",{className:"flex gap-3",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(ci,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),d.jsx("input",{type:"text",value:y,onChange:z=>w(z.target.value),placeholder:"Chercher un expert ou un service...",className:"w-full bg-[#121214] border border-white/5 rounded-2xl py-4 pl-12 pr-10 text-sm text-white font-medium placeholder:text-slate-600 focus:outline-none focus:border-purple-500/50 transition-all shadow-xl"})]}),d.jsx("button",{className:"p-4 bg-[#121214] border border-white/5 rounded-2xl shadow-xl hover:bg-white/5 transition-colors",children:d.jsx(hy,{className:"w-5 h-5 text-white"})})]})}),d.jsx("div",{className:"px-6 flex gap-3 overflow-x-auto no-scrollbar mb-6 scroll-smooth",children:["Tous","Mieux nots","Plus proche"].map(z=>d.jsx("button",{onClick:()=>p(z),className:`px-6 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest border transition-all whitespace-nowrap shadow-xl ${g===z?"bg-gradient-to-r from-purple-600 to-pink-500 border-transparent text-white shadow-purple-600/20":"bg-[#121214] border-white/5 text-slate-500 hover:border-white/10"}`,children:z},z))}),d.jsxs("div",{className:"px-6 mb-8",children:[d.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-700 mb-4 px-1",children:"Filtrer par expertise"}),d.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-2",children:["Tous",...Nr.map(z=>z.name)].map(z=>d.jsx("button",{onClick:()=>l(z),className:`px-5 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest border transition-all shrink-0 ${a===z?"bg-emerald-600/10 border-emerald-500/50 text-emerald-400 shadow-lg":"bg-white/5 border-white/5 text-slate-600 hover:bg-white/10 hover:text-slate-400"}`,children:z},z))})]}),d.jsxs("div",{className:"px-6 space-y-4",children:[b.length>0?b.map(z=>d.jsx("div",{onClick:()=>{r(z),t("artisan-detail")},className:"bg-[#121214] border border-white/5 rounded-[2.5rem] p-5 relative transition-all hover:border-purple-500/20 group cursor-pointer active:scale-[0.98] shadow-2xl",children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsxs("div",{className:"relative shrink-0",children:[d.jsx("div",{className:"size-20 rounded-[1.8rem] overflow-hidden border border-white/10 group-hover:scale-105 transition-transform duration-500 shadow-xl",children:d.jsx(yt,{src:z.image,name:z.name,initialsClassName:"text-2xl font-black text-white"})}),z.available&&d.jsx("div",{className:"absolute -bottom-1 -right-1 size-5 bg-emerald-500 rounded-full border-4 border-[#121214]"})]}),d.jsxs("div",{className:"flex-1 py-1",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-black text-lg uppercase tracking-tight group-hover:text-purple-400 transition-colors leading-none mb-1",children:z.name}),d.jsxs("p",{className:"text-purple-400 text-[10px] font-black uppercase tracking-[0.1em]",children:[z.category," Expert"]})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-white/5 px-2 py-1 rounded-lg border border-white/5",children:[d.jsx(jt,{className:"size-3 text-yellow-400 fill-yellow-400"}),d.jsx("span",{className:"text-white text-[10px] font-black",children:z.rating})]})]}),d.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[d.jsx(ws,{className:"size-4 text-emerald-500"}),d.jsx("span",{className:"text-emerald-500 text-[9px] font-bold uppercase tracking-widest",children:"Vrifi par VORK"})]}),d.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[d.jsxs("div",{className:"flex items-center gap-1 text-slate-500",children:[d.jsx(di,{className:"size-3"}),d.jsx("span",{className:"text-[10px] font-bold",children:z.location})]}),d.jsx("div",{className:"h-1 w-1 bg-slate-800 rounded-full"}),d.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase",children:xy(i,z.locationCoords)||z.distance})]})]})]})},z.id)):!E&&d.jsxs("div",{className:"text-center py-20 opacity-20 flex flex-col items-center gap-4",children:[d.jsx(ci,{className:"size-12 text-slate-500"}),d.jsx("p",{className:"font-black uppercase tracking-[0.3em] text-[10px]",children:"Aucun expert trouv"})]}),E&&d.jsxs(d.Fragment,{children:[d.jsx(Qg,{}),d.jsx(Qg,{})]}),d.jsx("div",{ref:R,className:"h-24 flex items-center justify-center pt-4",children:!N&&b.length>0&&!E&&d.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/5 rounded-full border border-white/5",children:[d.jsx("div",{className:"size-2 bg-purple-500 rounded-full"}),d.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Fin des rsultats"})]})})]})]})},$S=({isOpen:t,onClose:e,artisan:i,onShareViaDM:r})=>{if(!t)return null;const a=()=>{r(),e()},l=u=>{console.log(`Sharing ${i.name}'s profile on ${u}`)};return d.jsxs("div",{className:"fixed inset-0 z-[120] flex items-end justify-center animate-in fade-in duration-200",onClick:e,children:[d.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-md bg-[#0a0a0c] glass-card rounded-t-[3rem] p-8 pb-safe-bottom shadow-2xl animate-in slide-in-from-bottom duration-300",onClick:u=>u.stopPropagation(),children:[d.jsx("button",{onClick:e,className:"absolute top-4 right-4 size-10 bg-white/5 rounded-xl flex items-center justify-center text-slate-400 hover:text-white hover:bg-white/10 transition-all active:scale-90",children:d.jsx(yn,{size:20})}),d.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[d.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-purple-500 mb-6",children:"Partager le Profil"}),d.jsx("div",{className:"size-24 rounded-full overflow-hidden border-4 border-white/10 shadow-xl mb-4",children:d.jsx(yt,{src:i.image,name:i.name,initialsClassName:"text-3xl font-black text-white"})}),d.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:i.name}),d.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:[i.category," Expert"]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("button",{onClick:a,className:"w-full py-5 rounded-2xl bg-gradient-to-r from-purple-600 to-pink-500 text-white font-black text-sm uppercase tracking-[0.2em] shadow-[0_10px_20px_rgba(168,85,247,0.3)] active:scale-[0.98] transition-all flex items-center justify-center gap-3",children:[d.jsx(M1,{size:20}),"Envoyer en Message Direct"]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-4 text-center",children:"Partager sur les Rseaux"}),d.jsx("div",{className:"flex justify-center gap-4",children:[{icon:d.jsx(Zl,{size:22}),platform:"WhatsApp"},{icon:d.jsx(Hd,{size:22}),platform:"Facebook"},{icon:d.jsx(Hd,{size:22}),platform:"X"},{icon:d.jsx(Pl,{size:22}),platform:"Instagram"},{icon:d.jsx(Pl,{size:22}),platform:"LinkedIn"}].map((u,h)=>d.jsx("button",{onClick:()=>l(u.platform),className:"size-12 bg-white/5 rounded-full flex items-center justify-center text-slate-400 hover:bg-white/10 hover:text-white transition-all active:scale-90",children:u.icon},h))})]})]})]})]})},FS=({art:t,setView:e,onBack:i,onOpenChats:r,reviewRatingFilter:a,setReviewRatingFilter:l,onSelectWork:u,onReserve:h,isFavorite:g,onToggleFavorite:p})=>{const[y,w]=P.useState(!1),[b,S]=P.useState(!1),[E,A]=P.useState([]),[N,C]=P.useState([]),[k,R]=P.useState(t);P.useEffect(()=>{const q=gn(Ae(fe,"artisans",t.id),W=>{if(W.exists()){const te=rt(W.data()),ae=$d(te.image||te.avatar);R({...te,id:W.id,image:ae})}});return()=>q()},[t.id]),P.useEffect(()=>{const q=wt(et(fe,"archivedOrders"),Rt("artisanId","==",t.id),kn(Rl(),"desc"),Oa(10)),W=gn(q,te=>{const K=te.docs.map(ee=>({...rt(ee.data()),id:ee.id})).filter(ee=>ee.resultImages&&ee.resultImages.length>0||ee.images&&ee.images.length>0).map(ee=>({id:`job-${ee.id}`,title:`Mission ${ee.category}`,image:ee.resultImages&&ee.resultImages.length>0?ee.resultImages[0]:ee.images[0],description:ee.description,customerReview:ee.finalReview?{id:`rev-${ee.id}`,userName:"Client Vork",userAvatar:"CV",rating:ee.finalReview.rating,date:ee.completedAt?new Date(ee.completedAt).toLocaleDateString():"Rcemment",comment:ee.finalReview.comment}:void 0}));A(K)});return()=>W()},[t.id]),P.useEffect(()=>{const q=wt(et(fe,"reviews"),Rt("artisanId","==",t.id),kn(Rl(),"desc"),Oa(3)),W=gn(q,te=>{const ae=te.docs.map(K=>({...rt(K.data()),id:K.id}));C(ae)});return()=>W()},[t.id]);const M=[...E,...k.portfolio||[]],z=N.length>0?N:k.reviews||[],O=k.rating?k.rating.toFixed(1):"5.0",j=k.reviewsCount||0,B=k.jobsDone||0;return d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] animate-in slide-in-from-right duration-500 overflow-y-auto no-scrollbar pb-40",children:[d.jsxs("div",{className:"relative h-[420px] w-full overflow-hidden",children:[d.jsx(yt,{src:k.image,name:k.name,className:"w-full h-full transform scale-105",initialsClassName:"text-8xl font-black text-white/10 select-none"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0c] via-transparent to-black/10"}),d.jsxs("div",{className:"absolute top-12 left-6 right-6 flex justify-between items-center z-40",children:[d.jsx("button",{onClick:i,className:"size-10 bg-black/30 backdrop-blur-xl rounded-xl flex items-center justify-center text-white border border-white/10 hover:bg-black/50 transition-all active:scale-90",children:d.jsx(It,{className:"w-5 h-5"})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:q=>{q.stopPropagation(),p==null||p()},className:`size-10 bg-black/30 backdrop-blur-xl rounded-xl flex items-center justify-center border border-white/10 hover:bg-black/50 transition-all active:scale-90 ${g?"text-red-500":"text-white"}`,children:d.jsx(jl,{className:`w-5 h-5 ${g?"fill-current":""}`})}),d.jsx("button",{onClick:()=>S(!0),className:"size-10 bg-black/30 backdrop-blur-xl rounded-xl flex items-center justify-center text-white border border-white/10 hover:bg-black/50 transition-all active:scale-90",children:d.jsx(Hd,{className:"w-4 h-4"})})]})]})]}),d.jsx("div",{className:"px-6 -mt-20 relative z-30",children:d.jsxs("div",{className:"glass-card p-6 rounded-[2.8rem] bg-[#121214]/60 backdrop-blur-3xl border border-white/10 shadow-[0_30px_60px_-15px_rgba(0,0,0,0.7)] relative overflow-hidden min-h-[220px] flex flex-col justify-center",children:[y&&d.jsxs("div",{className:"absolute inset-0 bg-[#0a0a0c] z-[50] p-6 flex flex-col justify-center items-center animate-in fade-in zoom-in-95 duration-300",children:[d.jsx("button",{onClick:()=>w(!1),className:"absolute top-4 right-4 size-8 bg-white/5 rounded-full flex items-center justify-center text-slate-400 hover:text-white hover:bg-white/10 transition-all active:scale-90 shadow-xl",children:d.jsx(yn,{size:16})}),d.jsx("h4",{className:"text-[9px] font-black uppercase tracking-[0.4em] text-purple-500 mb-6 text-center",children:"Contact Direct"}),d.jsxs("div",{className:"w-full max-w-sm space-y-3",children:[k.phone&&d.jsxs("a",{href:`tel:${k.phone}`,className:"flex items-center gap-4 group bg-white/[0.03] p-3.5 rounded-[1.5rem] border border-white/5 hover:bg-purple-600/10 transition-all shadow-xl",children:[d.jsx("div",{className:"size-10 bg-purple-600 rounded-xl flex items-center justify-center text-white",children:d.jsx(ec,{size:18})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-[7px] text-slate-500 font-black uppercase tracking-[0.15em]",children:"Appeler"}),d.jsx("p",{className:"text-white font-black text-sm tracking-tight",children:k.phone})]})]}),k.email&&d.jsxs("a",{href:`mailto:${k.email}`,className:"flex items-center gap-4 group bg-white/[0.03] p-3.5 rounded-[1.5rem] border border-white/5 hover:bg-blue-600/10 transition-all shadow-xl",children:[d.jsx("div",{className:"size-10 bg-blue-600 rounded-xl flex items-center justify-center text-white",children:d.jsx(Wl,{size:18})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-[7px] text-slate-500 font-black uppercase tracking-[0.15em]",children:"Email"}),d.jsx("p",{className:"text-white font-black text-sm truncate tracking-tight",children:k.email})]})]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{className:"space-y-1 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsxs("div",{className:"flex items-center gap-1.5 bg-[#1a2e26]/80 px-2 py-0.5 rounded-md border border-[#34d399]/20",children:[d.jsx("div",{className:"size-1.5 bg-[#34d399] rounded-full animate-pulse"}),d.jsx("span",{className:"text-[7px] text-[#34d399] font-black uppercase tracking-widest",children:"Disponible"})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-white/5 px-2 py-0.5 rounded-md border border-white/5 text-[#34d399]",children:[d.jsx(ws,{className:"size-2.5"}),d.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest",children:"Vrifi"})]})]}),d.jsxs(d.Fragment,{children:[d.jsxs("h2",{className:"text-[1.8rem] font-black text-white tracking-tighter leading-[0.85] mb-1",children:[k.name.split(" ")[0],d.jsx("br",{}),d.jsx("span",{className:"text-slate-500",children:k.name.split(" ").slice(1).join(" ")})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"bg-purple-500/10 px-2 py-0.5 rounded-md border border-purple-500/20",children:d.jsx("span",{className:"text-purple-400 font-black text-[7px] uppercase tracking-[0.2em]",children:k.category})}),d.jsxs("div",{className:"flex items-center gap-1 text-slate-500",children:[d.jsx(di,{className:"size-3 text-slate-600"}),d.jsx("span",{className:"text-[10px] font-bold tracking-tight",children:k.location})]})]})]})]}),d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsx("button",{onClick:()=>w(!0),className:"size-11 bg-white/[0.04] border border-white/10 rounded-xl flex items-center justify-center text-slate-300 shadow-xl active:scale-90 transition-transform group",title:"Voir contact",children:d.jsx(Ol,{size:20,className:"group-hover:scale-110 transition-transform"})}),d.jsx("button",{onClick:r,className:"size-11 bg-white/[0.04] border border-white/10 rounded-xl flex items-center justify-center text-blue-400 shadow-xl active:scale-90 transition-transform group",title:"Envoyer un message",children:d.jsx(wf,{size:20,className:"fill-blue-400/5 group-hover:scale-110 transition-transform"})})]})]}),d.jsx("div",{className:"flex gap-2.5",children:d.jsxs("button",{onClick:()=>h(k),className:"flex-1 py-4 rounded-2xl bg-gradient-to-r from-purple-600 via-purple-500 to-pink-500 text-white font-black text-[11px] uppercase tracking-[0.2em] shadow-[0_10px_20px_rgba(168,85,247,0.3)] active:scale-[0.98] transition-all relative overflow-hidden group",children:[d.jsx("span",{className:"relative z-10",children:"Rserver l'expert"}),d.jsx("div",{className:"absolute inset-0 bg-white/10 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]})})]})]})}),d.jsx("div",{className:"px-6 grid grid-cols-3 gap-3 mt-8 relative z-20",children:[{label:"Note",value:O,icon:d.jsx(jt,{className:"size-3 fill-current"}),color:"text-yellow-400"},{label:"Exp.",value:`${k.experience} ans`,icon:null,color:"text-white"},{label:"Missions",value:B,icon:null,color:"text-white"}].map((q,W)=>d.jsxs("div",{className:"bg-[#121214]/90 backdrop-blur-xl border border-white/5 p-5 rounded-[2.2rem] flex flex-col items-center justify-center gap-1 shadow-2xl transition-transform hover:-translate-y-1",children:[d.jsxs("div",{className:`flex items-center gap-1 ${q.color}`,children:[d.jsx("span",{className:"text-lg font-black tracking-tighter",children:q.value}),q.icon]}),d.jsx("span",{className:"text-[8px] text-slate-500 font-black uppercase tracking-[0.2em]",children:q.label})]},W))}),d.jsxs("div",{className:"mt-14 px-6",children:[d.jsxs("div",{className:"flex justify-between items-end mb-6 px-1",children:[d.jsxs("div",{className:"space-y-0.5",children:[d.jsx("h3",{className:"text-xl font-black text-white tracking-tighter uppercase",children:"Ralisations"}),d.jsxs("p",{className:"text-[8px] text-slate-500 font-black uppercase tracking-widest",children:["Travaux rcents (",M.length,")"]})]}),d.jsx("button",{onClick:()=>e("portfolio"),className:"text-purple-500 text-[9px] font-black hover:text-white transition-colors uppercase tracking-[0.2em] bg-purple-500/10 px-3 py-1.5 rounded-full",children:"Voir Tout"})]}),d.jsxs("div",{className:"flex gap-4 overflow-x-auto no-scrollbar pb-4 snap-x",children:[M.map(q=>d.jsxs("div",{onClick:()=>u(q),className:"min-w-[200px] h-[140px] rounded-[2.2rem] overflow-hidden relative group cursor-pointer shadow-xl border border-white/5 snap-center",children:[d.jsx("img",{src:q.image,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-[1.5s]",alt:q.title}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent"}),d.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:d.jsx("span",{className:"text-white text-[9px] font-black uppercase tracking-tight line-clamp-1",children:q.title})})]},q.id)),M.length===0&&d.jsx("div",{className:"min-w-[200px] h-[140px] rounded-[2.2rem] border border-dashed border-white/10 flex flex-col items-center justify-center opacity-40",children:d.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest text-slate-400",children:"Aucune photo"})})]})]}),d.jsxs("div",{className:"px-6 mt-12 pb-32",children:[d.jsxs("div",{className:"flex justify-between items-end mb-6 px-1",children:[d.jsxs("div",{className:"space-y-0.5",children:[d.jsx("h3",{className:"text-xl font-black text-white tracking-tighter uppercase",children:"Tmoignages"}),d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsxs("div",{className:"flex items-center gap-0.5 text-yellow-400",children:[d.jsx(jt,{className:"size-2.5 fill-current"}),d.jsx("span",{className:"text-[9px] font-black",children:O})]}),d.jsxs("span",{className:"text-[9px] text-slate-600 font-black uppercase tracking-widest",children:[" ",j," avis"]})]})]}),d.jsx("button",{onClick:()=>e("reviews"),className:"text-purple-500 text-[9px] font-black hover:text-white transition-colors uppercase tracking-[0.2em] bg-purple-500/10 px-3 py-1.5 rounded-full",children:"Voir Tout"})]}),d.jsxs("div",{className:"space-y-4",children:[z.slice(0,3).map(q=>d.jsxs("div",{className:"glass-card p-5 rounded-[2.2rem] bg-[#121214]/40 border border-white/5 shadow-xl",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"size-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-black text-xs",children:q.userAvatar}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-xs font-black text-white uppercase tracking-tight",children:q.userName}),d.jsx("p",{className:"text-[8px] text-slate-600 font-bold uppercase tracking-widest mt-0.5",children:q.date})]})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-black/30 px-2 py-1 rounded-lg border border-white/5",children:[d.jsx(jt,{className:"size-3 text-yellow-400 fill-current"}),d.jsx("span",{className:"text-[10px] font-black text-white",children:q.rating})]})]}),d.jsx("div",{className:"relative pl-3 border-l border-purple-500/20",children:d.jsxs("p",{className:"text-slate-400 text-xs leading-relaxed font-medium italic",children:['"',q.comment,'"']})})]},q.id)),z.length===0&&d.jsx("div",{className:"py-10 text-center opacity-40",children:d.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500",children:"Aucun avis pour le moment"})})]})]}),d.jsx($S,{isOpen:b,onClose:()=>S(!1),artisan:k,onShareViaDM:r})]})},JS=({onBack:t,onSelectCategory:e})=>d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] pb-24 animate-in slide-in-from-right duration-500",children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 flex items-center gap-4 sticky top-0 bg-[#0a0a0c]/90 backdrop-blur-xl z-50 border-b border-white/5",children:[d.jsx("button",{onClick:t,className:"p-2 bg-white/5 rounded-xl border border-white/10 text-white",children:d.jsx(It,{className:"w-5 h-5"})}),d.jsx("h1",{className:"text-xl font-black text-white uppercase tracking-tight",children:"Tous les Services"})]}),d.jsxs("div",{className:"px-6 mt-8",children:[d.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-6 px-1",children:"Quel service recherchez-vous ?"}),d.jsx("div",{className:"grid grid-cols-2 gap-4",children:Nr.map(i=>d.jsxs("button",{onClick:()=>e(i,"all-categories"),className:"flex flex-col items-start gap-4 p-6 rounded-[2.2rem] bg-[#121214] border border-white/5 hover:border-purple-500/30 transition-all text-left group shadow-xl",children:[d.jsx("div",{className:`${i.color.split(" ")[0]} p-3 rounded-2xl shadow-lg`,children:d.jsx(by,{name:i.icon,className:`w-6 h-6 ${i.color.split(" ")[1]}`})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-black text-sm leading-tight uppercase tracking-tight",children:i.name}),d.jsxs("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-widest mt-1",children:[i.count," Pros"]})]})]},i.id))})]})]}),KS=({category:t,artisans:e,onBack:i,onSelectArtisan:r})=>{const[a,l]=P.useState("Tous"),[u,h]=P.useState(""),g=e.filter(p=>{const y=p.category===t.name,w=p.name.toLowerCase().includes(u.toLowerCase());return y&&w});return d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] pb-24 animate-in slide-in-from-right duration-500",children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 flex items-center justify-between sticky top-0 bg-[#0a0a0c]/95 backdrop-blur-md z-50 border-b border-white/5",children:[d.jsx("button",{onClick:i,className:"p-2 bg-white/5 rounded-xl border border-white/10",children:d.jsx(It,{className:"w-6 h-6 text-white"})}),d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-lg font-black text-white uppercase tracking-tight",children:t.name}),d.jsxs("p",{className:"text-[10px] text-purple-400 font-bold uppercase tracking-widest",children:[g.length," Experts"]})]}),d.jsx("div",{className:"w-10"})," "]}),d.jsxs("div",{className:"px-6 mt-6 mb-6 flex gap-3",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(ci,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),d.jsx("input",{type:"text",value:u,onChange:p=>h(p.target.value),placeholder:"Rechercher par nom...",className:"w-full bg-[#121214] border border-white/5 rounded-2xl py-4 pl-12 pr-4 text-sm text-white placeholder:text-slate-600 focus:outline-none focus:border-purple-500/50"})]}),d.jsx("button",{className:"p-4 bg-[#121214] border border-white/5 rounded-2xl",children:d.jsx(hy,{className:"w-5 h-5 text-white"})})]}),d.jsx("div",{className:"px-6 flex gap-3 overflow-x-auto no-scrollbar mb-8",children:["Tous","Mieux nots","Plus proche"].map(p=>d.jsx("button",{onClick:()=>l(p),className:`px-6 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest border transition-all ${a===p?"bg-purple-600 border-purple-500 text-white shadow-lg shadow-purple-600/20":"bg-[#121214] border-white/5 text-slate-500"}`,children:p},p))}),d.jsx("div",{className:"px-6 space-y-4",children:g.length>0?g.map(p=>{var y;return d.jsx("div",{className:"bg-[#121214] border border-white/5 rounded-[2.5rem] p-5 relative group hover:border-purple-500/20 transition-all shadow-xl",children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsxs("div",{className:"relative shrink-0",children:[d.jsx("div",{className:"size-16 rounded-2xl overflow-hidden border border-white/10 group-hover:scale-105 transition-transform",children:d.jsx(yt,{src:p.image,name:p.name,initialsClassName:"text-lg font-black text-white"})}),p.available&&d.jsx("div",{className:"absolute -bottom-1 -right-1 size-4 bg-emerald-500 rounded-full border-2 border-[#121214]"})]}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-black text-base uppercase tracking-tight",children:p.name}),d.jsx("p",{className:"text-purple-400 text-[10px] font-black uppercase tracking-widest",children:((y=p.services)==null?void 0:y[0])||p.category})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-white/5 px-2 py-1 rounded-lg",children:[d.jsx(jt,{className:"size-3 text-yellow-400 fill-yellow-400"}),d.jsx("span",{className:"text-white text-[10px] font-black",children:p.rating})]})]}),d.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[d.jsx(ws,{className:"size-4 text-emerald-500"}),d.jsx("span",{className:"text-emerald-500 text-[9px] font-bold uppercase tracking-widest",children:"Vrifi par VORK"})]}),d.jsxs("div",{className:"flex items-center justify-between mt-4",children:[d.jsxs("div",{className:"flex items-center gap-1 text-slate-500",children:[d.jsx(di,{className:"size-3"}),d.jsxs("span",{className:"text-[10px] font-bold",children:[p.distance,"  ",p.location]})]}),d.jsx("button",{onClick:()=>r(p),className:"bg-gradient-to-r from-purple-600 to-pink-500 px-6 py-2.5 rounded-2xl text-white text-[10px] font-black uppercase tracking-[0.1em] shadow-lg active:scale-95 transition-all",children:"Profil"})]})]})]})},p.id)}):d.jsxs("div",{className:"text-center py-20 opacity-20 flex flex-col items-center gap-4",children:[d.jsx(ci,{className:"size-12 text-slate-500"}),d.jsx("p",{className:"font-black uppercase tracking-[0.3em] text-[10px]",children:"Aucun expert disponible"})]})})]})},YS=({art:t,onBack:e,onSelectWork:i})=>{const[r,a]=P.useState([]),[l,u]=P.useState(!0);P.useEffect(()=>{const g=wt(et(fe,"archivedOrders"),Rt("artisanId","==",t.id),kn(Rl(),"desc")),p=gn(g,y=>{const w=y.docs.map(b=>({...rt(b.data()),id:b.id})).filter(b=>b.resultImages&&b.resultImages.length>0||b.images&&b.images.length>0).map(b=>({id:`job-${b.id}`,title:`Mission ${b.category}`,image:b.resultImages&&b.resultImages.length>0?b.resultImages[0]:b.images[0],description:b.description,customerReview:b.finalReview?{id:`rev-${b.id}`,userName:"Client Vork",userAvatar:"CV",rating:b.finalReview.rating,date:b.completedAt?new Date(b.completedAt).toLocaleDateString():"Termin",comment:b.finalReview.comment}:void 0}));a(w),u(!1)},y=>{console.error("Error fetching portfolio:",y),u(!1)});return()=>p()},[t.id]);const h=[...r,...t.portfolio||[]];return d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] animate-in slide-in-from-right duration-500 pb-20 overflow-y-auto no-scrollbar",children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 flex items-center gap-4 sticky top-0 bg-[#0a0a0c]/80 backdrop-blur-xl z-50 border-b border-white/5",children:[d.jsx("button",{onClick:e,className:"size-10 bg-white/5 rounded-xl flex items-center justify-center text-white border border-white/10 hover:bg-white/10 transition-colors active:scale-90",children:d.jsx(It,{className:"w-5 h-5"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-black text-white tracking-tight",children:"Portfolio"}),d.jsx("p",{className:"text-[10px] text-purple-400 font-bold uppercase tracking-widest",children:t.name})]})]}),d.jsx("div",{className:"p-6",children:l?d.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[d.jsx(Lt,{className:"animate-spin text-purple-500 mb-2",size:32}),d.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Chargement des projets..."})]}):d.jsx("div",{className:"grid grid-cols-2 gap-4",children:h.map(g=>d.jsxs("div",{onClick:()=>i(g),className:"relative aspect-square rounded-[2.2rem] overflow-hidden border border-white/5 shadow-2xl group cursor-pointer bg-[#121214]",children:[d.jsx("img",{src:g.image,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",alt:g.title,onError:p=>{p.target.src="https://images.unsplash.com/photo-1621905231184-7a9a36ad2960?auto=format&fit=crop&q=80"}}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),d.jsx("div",{className:"absolute bottom-3 left-3 right-3 bg-white/5 backdrop-blur-md border border-white/10 rounded-xl p-2.5 translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300",children:d.jsx("p",{className:"text-white text-[10px] font-black uppercase tracking-tight truncate",children:g.title})}),d.jsx("div",{className:"absolute top-3 right-3 size-8 bg-white/10 backdrop-blur-md rounded-lg flex items-center justify-center text-white opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(xs,{size:14})})]},g.id))})}),!l&&h.length===0&&d.jsxs("div",{className:"flex flex-col items-center justify-center py-40 opacity-20",children:[d.jsx("div",{className:"size-20 bg-white/5 rounded-3xl flex items-center justify-center mb-4",children:d.jsx(bs,{size:32,className:"text-slate-400"})}),d.jsx("p",{className:"font-black uppercase tracking-widest text-xs text-slate-500",children:"Aucun projet  afficher"})]})]})},XS=({item:t,art:e,onBack:i})=>d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] animate-in slide-in-from-bottom duration-500 pb-20 overflow-y-auto no-scrollbar",children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 flex items-center justify-between sticky top-0 bg-[#0a0a0c]/90 backdrop-blur-xl z-50 border-b border-white/5",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("button",{onClick:i,className:"size-10 bg-white/5 rounded-xl flex items-center justify-center text-white border border-white/10 hover:bg-white/10 transition-colors",children:d.jsx(It,{className:"w-5 h-5"})}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"size-10 rounded-xl overflow-hidden border border-white/10 shadow-lg",children:d.jsx(yt,{src:e.image,name:e.name,initialsClassName:"text-sm font-black text-white"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-sm font-black text-white uppercase tracking-tight truncate max-w-[150px]",children:t.title}),d.jsxs("p",{className:"text-[9px] text-purple-400 font-bold uppercase tracking-widest",children:["Ralis par ",e.name.split(" ")[0]]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-white/5 px-2 py-1 rounded-lg border border-white/5",children:[d.jsx(jt,{className:"size-3 text-yellow-400 fill-yellow-400"}),d.jsx("span",{className:"text-[10px] font-black text-white",children:e.rating})]})]}),d.jsxs("div",{className:"px-6 pt-4 flex flex-col items-center",children:[d.jsxs("div",{className:"w-full aspect-[4/5] rounded-[3rem] overflow-hidden shadow-[0_0_80px_rgba(168,85,247,0.15)] border border-white/10 mb-10 group relative bg-[#121214]",children:[d.jsx(yt,{src:t.image,name:t.title,className:"w-full h-full transition-transform duration-1000 group-hover:scale-105",initialsClassName:"text-4xl font-black text-white/20"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/40 pointer-events-none"})]}),d.jsxs("div",{className:"w-full space-y-8",children:[d.jsxs("div",{className:"text-center px-4",children:[d.jsx("h2",{className:"text-3xl font-black text-white tracking-tighter uppercase mb-3 leading-none",children:t.title}),d.jsx("div",{className:"w-12 h-1 bg-gradient-to-r from-purple-500 to-pink-500 mx-auto rounded-full mb-6"}),d.jsx("p",{className:"text-slate-400 font-medium leading-relaxed",children:t.description||`Un exemple de l'expertise de ${e.name.split(" ")[0]} dans ses projets rcents de ${e.category.toLowerCase()}. Chaque dtail a t soign pour rpondre aux exigences du client.`})]}),t.customerReview&&d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(F1,{className:"size-4 text-purple-400 fill-purple-400"}),d.jsx("h4",{className:"text-[11px] font-black uppercase tracking-[0.2em] text-purple-400",children:"Avis du client"})]}),d.jsxs("div",{className:"glass-card p-6 rounded-[2.5rem] bg-[#121214]/60 border border-white/5 relative overflow-hidden group shadow-2xl",children:[d.jsx("div",{className:"absolute -right-4 -top-4 size-24 bg-purple-500/10 rounded-full blur-2xl group-hover:bg-purple-500/20 transition-colors"}),d.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"size-12 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-black text-base shadow-lg overflow-hidden",children:d.jsx(yt,{src:t.customerReview.userAvatar,name:t.customerReview.userName})}),d.jsxs("div",{children:[d.jsx("h5",{className:"text-sm font-bold text-white",children:t.customerReview.userName}),d.jsx("p",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:t.customerReview.date})]})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-black/30 px-2 py-1 rounded-xl border border-white/5",children:[d.jsx(jt,{className:"size-3 text-yellow-400 fill-current"}),d.jsxs("span",{className:"text-[11px] font-black text-yellow-400",children:[t.customerReview.rating,".0"]})]})]}),d.jsxs("p",{className:"text-slate-300 text-sm leading-relaxed font-medium italic relative z-10",children:['"',t.customerReview.comment,'"']})]})]})]})]})]}),QS=({art:t,onBack:e})=>{const[i,r]=P.useState(t),[a,l]=P.useState([]),[u,h]=P.useState("Tous"),[g,p]=P.useState(!1),[y,w]=P.useState(!0),b=P.useRef(null),S=P.useRef(null),E=P.useRef(null);P.useEffect(()=>{const C=gn(Ae(fe,"artisans",t.id),k=>{k.exists()&&r({...rt(k.data()),id:k.id})});return()=>C()},[t.id]);const A=P.useCallback(async(C=!1)=>{if(!(g||!C&&!y)){p(!0);try{const k=[Rt("artisanId","==",t.id),kn(Rl(),"desc"),Oa(5)];u!=="Tous"&&k.splice(1,0,Rt("rating","==",u)),!C&&b.current&&k.push(iy(b.current));const R=wt(et(fe,"reviews"),...k),M=await Xl(R),z=M.docs.map(O=>{const j=rt(O.data());return{id:O.id,userName:j.userName||"Client Vork",userAvatar:j.userAvatar||"CV",rating:j.rating,date:j.createdAt?new Date(j.createdAt).toLocaleDateString():"Rcemment",comment:j.comment}});l(C?z:O=>[...O,...z]),b.current=M.docs[M.docs.length-1],w(M.docs.length===5)}catch(k){console.error("Error fetching reviews:",k),C&&u==="Tous"&&(l(t.reviews||[]),w(!1))}finally{p(!1)}}},[t.id,u,g,y,t.reviews]);P.useEffect(()=>{l([]),b.current=null,w(!0),A(!0)},[u]),P.useEffect(()=>(S.current&&S.current.disconnect(),S.current=new IntersectionObserver(C=>{C[0].isIntersecting&&y&&!g&&A(!1)},{threshold:.1,rootMargin:"500px"}),E.current&&S.current.observe(E.current),()=>{var C;return(C=S.current)==null?void 0:C.disconnect()}),[y,g,A]);const N=C=>{const k=i.rating||5;return Math.round(k)===C?70:Math.round(k)===C+1||Math.round(k)===C-1?20:5};return d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] animate-in slide-in-from-right duration-500 pb-32 overflow-y-auto no-scrollbar",children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 flex items-center gap-4 sticky top-0 bg-[#0a0a0c]/90 backdrop-blur-xl z-50 border-b border-white/5 shadow-2xl",children:[d.jsx("button",{onClick:e,className:"size-10 bg-white/5 rounded-xl flex items-center justify-center text-white border border-white/10 hover:bg-white/10 transition-colors active:scale-90",children:d.jsx(It,{className:"w-5 h-5"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-black text-white tracking-tight uppercase",children:"Avis Clients"}),d.jsx("p",{className:"text-[10px] text-purple-400 font-bold uppercase tracking-widest",children:i.name})]})]}),d.jsx("div",{className:"px-6 pt-8 pb-10",children:d.jsxs("div",{className:"flex gap-8 items-center bg-[#121214] border border-white/5 p-8 rounded-[2.5rem] shadow-2xl relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-600/5 blur-3xl rounded-full pointer-events-none"}),d.jsxs("div",{className:"text-center relative z-10",children:[d.jsx("h2",{className:"text-5xl font-black text-white tracking-tighter mb-1 transition-all duration-500",children:i.rating?i.rating.toFixed(1):"5.0"}),d.jsx("div",{className:"flex items-center justify-center gap-0.5 mb-2",children:[...Array(5)].map((C,k)=>d.jsx(jt,{className:`size-3 ${k<Math.round(i.rating||5)?"text-yellow-400 fill-current":"text-slate-800"}`},k))}),d.jsxs("p",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest whitespace-nowrap animate-pulse",children:[i.reviewsCount||0," avis"]})]}),d.jsx("div",{className:"flex-1 space-y-2 relative z-10 border-l border-white/5 pl-8",children:[5,4,3,2,1].map(C=>d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-[10px] font-black text-slate-500 w-2",children:C}),d.jsx("div",{className:"flex-1 h-1.5 bg-white/5 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full opacity-80",style:{width:`${N(C)}%`}})})]},C))})]})}),d.jsx("div",{className:"px-6 mb-8 overflow-x-auto no-scrollbar flex gap-2",children:["Tous",5,4,3,2,1].map(C=>d.jsx("button",{onClick:()=>h(C),className:`px-5 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest border transition-all whitespace-nowrap active:scale-95 ${u===C?"bg-purple-600 border-purple-500 text-white shadow-lg shadow-purple-600/20":"bg-white/5 border-white/5 text-slate-500 hover:bg-white/10"}`,children:C==="Tous"?"TOUS":`${C} TOILES`},C))}),d.jsxs("div",{className:"px-6 space-y-4 min-h-[300px]",children:[a.length>0?a.map((C,k)=>d.jsxs("div",{className:"glass-card p-6 rounded-[2.5rem] bg-[#121214] border border-white/5 shadow-lg transition-all hover:border-white/10 hover:bg-[#16161a] animate-in slide-in-from-bottom-2 duration-500",style:{animationDelay:`${k*100}ms`},children:[d.jsxs("div",{className:"flex justify-between items-start mb-5",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"size-12 rounded-2xl bg-gradient-to-br from-indigo-500/20 to-purple-500/20 border border-white/5 flex items-center justify-center text-indigo-400 font-black text-sm shadow-inner",children:C.userAvatar}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-black text-white uppercase tracking-tight",children:C.userName}),d.jsx("p",{className:"text-[9px] text-slate-600 font-bold uppercase tracking-widest mt-0.5",children:C.date})]})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-white/5 px-2 py-1 rounded-lg",children:[d.jsx(jt,{className:"size-3 text-yellow-400 fill-current"}),d.jsx("span",{className:"text-[10px] font-bold text-white",children:C.rating})]})]}),d.jsx("div",{className:"relative pl-4 border-l-2 border-purple-500/20",children:d.jsxs("p",{className:"text-slate-300 text-xs leading-relaxed font-medium italic",children:['"',C.comment,'"']})})]},`${C.id}-${k}`)):!g&&d.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-30 text-center",children:[d.jsx("div",{className:"size-16 bg-white/5 rounded-full flex items-center justify-center mb-4",children:d.jsx(c1,{className:"size-8 text-slate-500"})}),d.jsx("p",{className:"font-black uppercase tracking-[0.2em] text-xs text-slate-400",children:"Aucun avis trouv"}),d.jsx("p",{className:"text-[9px] font-bold uppercase tracking-widest text-slate-600 mt-2",children:"Essayez un autre filtre"})]}),d.jsxs("div",{ref:E,className:"h-24 flex items-center justify-center w-full",children:[g&&d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx(Lt,{className:"animate-spin text-purple-500",size:24}),d.jsx("span",{className:"text-[9px] font-black text-purple-500/50 uppercase tracking-widest",children:"Chargement..."})]}),!y&&a.length>0&&!g&&d.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/5 rounded-full border border-white/5",children:[d.jsx("div",{className:"size-2 bg-emerald-500 rounded-full"}),d.jsx("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Tous les avis affichs"})]})]})]})]})},WS=Object.prototype.toString,ZS=t=>WS.call(t)==="[object Error]",eE=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function tE(t){if(!(t&&ZS(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:i,stack:r}=t;return i==="Load failed"?r===void 0||"__sentry_captured__"in t:i.startsWith("error sending request for url")?!0:eE.has(i)}function nE(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function pl(t,e,{min:i=0,allowInfinity:r=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<i)throw new TypeError(`Expected \`${t}\` to be  ${i}.`)}}class wy extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function iE(t,e){const i=Math.max(1,t+1),r=e.randomize?Math.random()+1:1;let a=Math.round(r*e.minTimeout*e.factor**(i-1));return a=Math.min(a,e.maxTimeout),a}function Wg(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function sE({error:t,attemptNumber:e,retriesConsumed:i,startTime:r,options:a}){var S,E,A,N;const l=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(l instanceof wy)throw l.originalError;const u=Number.isFinite(a.retries)?Math.max(0,a.retries-i):a.retries,h=a.maxRetryTime??Number.POSITIVE_INFINITY,g=Object.freeze({error:l,attemptNumber:e,retriesLeft:u,retriesConsumed:i});if(await a.onFailedAttempt(g),Wg(r,h)<=0)throw l;const p=await a.shouldConsumeRetry(g),y=Wg(r,h);if(y<=0||u<=0)throw l;if(l instanceof TypeError&&!tE(l)){if(p)throw l;return(S=a.signal)==null||S.throwIfAborted(),!1}if(!await a.shouldRetry(g))throw l;if(!p)return(E=a.signal)==null||E.throwIfAborted(),!1;const w=iE(i,a),b=Math.min(w,y);return(A=a.signal)==null||A.throwIfAborted(),b>0&&await new Promise((C,k)=>{var z,O;const R=()=>{var j;clearTimeout(M),(j=a.signal)==null||j.removeEventListener("abort",R),k(a.signal.reason)},M=setTimeout(()=>{var j;(j=a.signal)==null||j.removeEventListener("abort",R),C()},b);a.unref&&((z=M.unref)==null||z.call(M)),(O=a.signal)==null||O.addEventListener("abort",R,{once:!0})}),(N=a.signal)==null||N.throwIfAborted(),!0}async function rE(t,e={}){var l,u,h;if(e={...e},nE(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),pl("factor",e.factor,{min:0,allowInfinity:!1}),pl("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),pl("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),pl("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(l=e.signal)==null||l.throwIfAborted();let i=0,r=0;const a=performance.now();for(;!Number.isFinite(e.retries)||r<=e.retries;){i++;try{(u=e.signal)==null||u.throwIfAborted();const g=await t(i);return(h=e.signal)==null||h.throwIfAborted(),g}catch(g){await sE({error:g,attemptNumber:i,retriesConsumed:r,startTime:a,options:e})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}var aE={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let oE,lE;function cE(){return{geminiUrl:oE,vertexUrl:lE}}function uE(t,e,i,r){var a,l;if(!(t!=null&&t.baseUrl)){const u=cE();return e?(a=u.vertexUrl)!==null&&a!==void 0?a:i:(l=u.geminiUrl)!==null&&l!==void 0?l:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fi{}function re(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(r,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function m(t,e,i){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const h=u.slice(0,-2);if(!(h in t))if(Array.isArray(i))t[h]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(i))for(let p=0;p<g.length;p++){const y=g[p];m(y,e.slice(l+1),i[p])}else for(const p of g)m(p,e.slice(l+1),i)}return}else if(u.endsWith("[0]")){const h=u.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];m(g[0],e.slice(l+1),i);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const r=e[e.length-1],a=t[r];if(a!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===a)return;if(typeof a=="object"&&typeof i=="object"&&a!==null&&i!==null)Object.assign(a,i);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[r]=i}function f(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return i;const a=e[r];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in t){const u=t[l];return Array.isArray(u)?u.map(h=>f(h,e.slice(r+1),i)):i}else return i}else t=t[a]}return t}catch(r){if(r instanceof TypeError)return i;throw r}}function dE(t,e){for(const[i,r]of Object.entries(e)){const a=i.split("."),l=r.split("."),u=new Set;let h=-1;for(let g=0;g<a.length;g++)if(a[g]==="*"){h=g;break}if(h!==-1&&l.length>h)for(let g=h;g<l.length;g++){const p=l[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}Fd(t,a,l,0,u)}}function Fd(t,e,i,r,a){if(r>=e.length||typeof t!="object"||t===null)return;const l=e[r];if(l.endsWith("[]")){const u=l.slice(0,-2),h=t;if(u in h&&Array.isArray(h[u]))for(const g of h[u])Fd(g,e,i,r+1,a)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,h=Object.keys(u).filter(p=>!p.startsWith("_")&&!a.has(p)),g={};for(const p of h)g[p]=u[p];for(const[p,y]of Object.entries(g)){const w=[];for(const b of i.slice(r))b==="*"?w.push(p):w.push(b);m(u,w,y)}for(const p of h)delete u[p]}}else{const u=t;l in u&&Fd(u[l],e,i,r+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ef(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fE(t){const e={},i=f(t,["operationName"]);i!=null&&m(e,["operationName"],i);const r=f(t,["resourceName"]);return r!=null&&m(e,["_url","resourceName"],r),e}function hE(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const a=f(t,["done"]);a!=null&&m(e,["done"],a);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const u=f(t,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],mE(u)),e}function pE(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const a=f(t,["done"]);a!=null&&m(e,["done"],a);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const u=f(t,["response"]);return u!=null&&m(e,["response"],gE(u)),e}function mE(t){const e={},i=f(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>vE(u))),m(e,["generatedVideos"],l)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const a=f(t,["raiMediaFilteredReasons"]);return a!=null&&m(e,["raiMediaFilteredReasons"],a),e}function gE(t){const e={},i=f(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>yE(u))),m(e,["generatedVideos"],l)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const a=f(t,["raiMediaFilteredReasons"]);return a!=null&&m(e,["raiMediaFilteredReasons"],a),e}function vE(t){const e={},i=f(t,["video"]);return i!=null&&m(e,["video"],EE(i)),e}function yE(t){const e={},i=f(t,["_self"]);return i!=null&&m(e,["video"],TE(i)),e}function xE(t){const e={},i=f(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function bE(t){const e={},i=f(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function wE(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const a=f(t,["done"]);a!=null&&m(e,["done"],a);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const u=f(t,["response"]);return u!=null&&m(e,["response"],_E(u)),e}function _E(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=f(t,["parent"]);r!=null&&m(e,["parent"],r);const a=f(t,["documentName"]);return a!=null&&m(e,["documentName"],a),e}function _y(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const a=f(t,["done"]);a!=null&&m(e,["done"],a);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const u=f(t,["response"]);return u!=null&&m(e,["response"],SE(u)),e}function SE(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=f(t,["parent"]);r!=null&&m(e,["parent"],r);const a=f(t,["documentName"]);return a!=null&&m(e,["documentName"],a),e}function EE(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["uri"],i);const r=f(t,["encodedVideo"]);r!=null&&m(e,["videoBytes"],Ef(r));const a=f(t,["encoding"]);return a!=null&&m(e,["mimeType"],a),e}function TE(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const r=f(t,["bytesBase64Encoded"]);r!=null&&m(e,["videoBytes"],Ef(r));const a=f(t,["mimeType"]);return a!=null&&m(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Zg;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Zg||(Zg={}));var e0;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(e0||(e0={}));var t0;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(t0||(t0={}));var Gi;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Gi||(Gi={}));var n0;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(n0||(n0={}));var i0;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(i0||(i0={}));var s0;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(s0||(s0={}));var r0;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(r0||(r0={}));var a0;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(a0||(a0={}));var o0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(o0||(o0={}));var l0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(l0||(l0={}));var c0;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(c0||(c0={}));var u0;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(u0||(u0={}));var d0;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(d0||(d0={}));var f0;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(f0||(f0={}));var h0;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(h0||(h0={}));var p0;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(p0||(p0={}));var m0;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(m0||(m0={}));var g0;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(g0||(g0={}));var v0;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(v0||(v0={}));var y0;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(y0||(y0={}));var Vl;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Vl||(Vl={}));var x0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(x0||(x0={}));var b0;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(b0||(b0={}));var w0;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(w0||(w0={}));var Jd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Jd||(Jd={}));var _0;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(_0||(_0={}));var S0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(S0||(S0={}));var Kd;(function(t){t.COLLECTION="COLLECTION"})(Kd||(Kd={}));var E0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(E0||(E0={}));var T0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(T0||(T0={}));var N0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(N0||(N0={}));var C0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(C0||(C0={}));var A0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(A0||(A0={}));var k0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(k0||(k0={}));var R0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(R0||(R0={}));var I0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(I0||(I0={}));var M0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(M0||(M0={}));var D0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(D0||(D0={}));var j0;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(j0||(j0={}));var U0;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(U0||(U0={}));var O0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(O0||(O0={}));var L0;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(L0||(L0={}));var P0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(P0||(P0={}));var z0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(z0||(z0={}));var q0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(q0||(q0={}));var V0;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(V0||(V0={}));var H0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(H0||(H0={}));var G0;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(G0||(G0={}));var B0;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(B0||(B0={}));var $0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})($0||($0={}));var F0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(F0||(F0={}));var J0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(J0||(J0={}));var K0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(K0||(K0={}));var Y0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Y0||(Y0={}));var X0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(X0||(X0={}));var xr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(xr||(xr={}));class Yd{constructor(e){const i={};for(const r of e.headers.entries())i[r[0]]=r[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class Na{get text(){var e,i,r,a,l,u,h,g;if(((a=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",y=!1;const w=[];for(const b of(g=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[S,E]of Object.entries(b))S!=="text"&&S!=="thought"&&S!=="thoughtSignature"&&(E!==null||E!==void 0)&&w.push(S);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;y=!0,p+=b.text}}return w.length>0&&console.warn(`there are non-text parts ${w} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?p:void 0}get data(){var e,i,r,a,l,u,h,g;if(((a=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const y=[];for(const w of(g=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[b,S]of Object.entries(w))b!=="inlineData"&&(S!==null||S!==void 0)&&y.push(b);w.inlineData&&typeof w.inlineData.data=="string"&&(p+=atob(w.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,i,r,a,l,u,h,g;if(((a=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,i,r,a,l,u,h,g,p;if(((a=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(g=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(w=>w.executableCode).map(w=>w.executableCode).filter(w=>w!==void 0);if((y==null?void 0:y.length)!==0)return(p=y==null?void 0:y[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,i,r,a,l,u,h,g,p;if(((a=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(g=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(w=>w.codeExecutionResult).map(w=>w.codeExecutionResult).filter(w=>w!==void 0);if((y==null?void 0:y.length)!==0)return(p=y==null?void 0:y[0])===null||p===void 0?void 0:p.output}}class Q0{}class W0{}class NE{}class CE{}class AE{}class kE{}class Z0{}class ev{}class tv{}class RE{}class Hl{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const r=new Hl;let a;const l=e;return i?a=pE(l):a=hE(l),Object.assign(r,a),r}}class nv{}class iv{}class sv{}class rv{}class IE{}class ME{}class DE{}class Tf{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const r=new Tf,l=wE(e);return Object.assign(r,l),r}}class jE{}class UE{}class OE{}class LE{}class av{}class PE{get text(){var e,i,r;let a="",l=!1;const u=[];for(const h of(r=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&r!==void 0?r:[]){for(const[g,p]of Object.entries(h))g!=="text"&&g!=="thought"&&p!==null&&u.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,i,r;let a="";const l=[];for(const u of(r=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&r!==void 0?r:[]){for(const[h,g]of Object.entries(u))h!=="inlineData"&&g!==null&&l.push(h);u.inlineData&&typeof u.inlineData.data=="string"&&(a+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class zE{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Nf{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const r=new Nf,l=_y(e);return Object.assign(r,l),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ze(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Sy(t,e){const i=ze(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function Ey(t){return Array.isArray(t)?t.map(e=>Gl(e)):[Gl(t)]}function Gl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Ty(t){const e=Gl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ny(t){const e=Gl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ov(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Cy(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>ov(e)):[ov(t)]}function Xd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function lv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function cv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Dt(t){if(t==null)throw new Error("ContentUnion is required");return Xd(t)?t:{role:"user",parts:Cy(t)}}function Cf(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const r=Dt(i);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const i=Dt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>Dt(i)):[Dt(e)]}function vn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(lv(t)||cv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Dt(t)]}const e=[],i=[],r=Xd(t[0]);for(const a of t){const l=Xd(a);if(l!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(lv(a)||cv(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(a)}}return r||e.push({role:"user",parts:Cy(i)}),e}function qE(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(r=>r!=="null");if(i.length===1)e.type=Object.values(Gi).includes(i[0].toUpperCase())?i[0].toUpperCase():Gi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of i)e.anyOf.push({type:Object.values(Gi).includes(r.toUpperCase())?r.toUpperCase():Gi.TYPE_UNSPECIFIED})}}function _r(t){const e={},i=["items"],r=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&qE(t.type,e);for(const[u,h]of Object.entries(t))if(h!=null)if(u=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Gi).includes(h.toUpperCase())?h.toUpperCase():Gi.TYPE_UNSPECIFIED}else if(i.includes(u))e[u]=_r(h);else if(r.includes(u)){const g=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}g.push(_r(p))}e[u]=g}else if(a.includes(u)){const g={};for(const[p,y]of Object.entries(h))g[p]=_r(y);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=h}return e}function Af(t){return _r(t)}function kf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Rf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function kr(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=_r(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=_r(e.response));return t}function Rr(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function VE(t,e,i,r=1){const a=!e.startsWith(`${i}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:a?`${i}/${e}`:e}function hi(t,e){if(typeof e!="string")throw new Error("name must be a string");return VE(t,e,"cachedContents")}function Ay(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Bi(t){return Ef(t)}function HE(t){return t!=null&&typeof t=="object"&&"name"in t}function GE(t){return t!=null&&typeof t=="object"&&"video"in t}function BE(t){return t!=null&&typeof t=="object"&&"uri"in t}function ky(t){var e;let i;if(HE(t)&&(i=t.name),!(BE(t)&&(i=t.uri,i===void 0))&&!(GE(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const a=i.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${i}`);i=a[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function Ry(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function Iy(t){for(const e of["models","tunedModels","publisherModels"])if($E(t,e))return t[e];return[]}function $E(t,e){return t!==null&&typeof t=="object"&&e in t}function FE(t,e={}){const i=t,r={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(r.responseJsonSchema=i.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function JE(t,e={}){const i=[],r=new Set;for(const a of t){const l=a.name;if(r.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);r.add(l);const u=FE(a,e);u.functionDeclarations&&i.push(...u.functionDeclarations)}return{functionDeclarations:i}}function My(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const r=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,a=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function KE(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Dy(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const a=i.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let l=!1;for(const u of a){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ir(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function jy(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YE(t){const e={},i=f(t,["responsesFile"]);i!=null&&m(e,["fileName"],i);const r=f(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>kT(u))),m(e,["inlinedResponses"],l)}const a=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["inlinedEmbedContentResponses"],l)}return e}function XE(t){const e={},i=f(t,["predictionsFormat"]);i!=null&&m(e,["format"],i);const r=f(t,["gcsDestination","outputUriPrefix"]);r!=null&&m(e,["gcsUri"],r);const a=f(t,["bigqueryDestination","outputUri"]);return a!=null&&m(e,["bigqueryUri"],a),e}function QE(t){const e={},i=f(t,["format"]);i!=null&&m(e,["predictionsFormat"],i);const r=f(t,["gcsUri"]);r!=null&&m(e,["gcsDestination","outputUriPrefix"],r);const a=f(t,["bigqueryUri"]);if(a!=null&&m(e,["bigqueryDestination","outputUri"],a),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Al(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const r=f(t,["metadata","displayName"]);r!=null&&m(e,["displayName"],r);const a=f(t,["metadata","state"]);a!=null&&m(e,["state"],jy(a));const l=f(t,["metadata","createTime"]);l!=null&&m(e,["createTime"],l);const u=f(t,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const h=f(t,["metadata","updateTime"]);h!=null&&m(e,["updateTime"],h);const g=f(t,["metadata","model"]);g!=null&&m(e,["model"],g);const p=f(t,["metadata","output"]);return p!=null&&m(e,["dest"],YE(Dy(p))),e}function Qd(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const r=f(t,["displayName"]);r!=null&&m(e,["displayName"],r);const a=f(t,["state"]);a!=null&&m(e,["state"],jy(a));const l=f(t,["error"]);l!=null&&m(e,["error"],l);const u=f(t,["createTime"]);u!=null&&m(e,["createTime"],u);const h=f(t,["startTime"]);h!=null&&m(e,["startTime"],h);const g=f(t,["endTime"]);g!=null&&m(e,["endTime"],g);const p=f(t,["updateTime"]);p!=null&&m(e,["updateTime"],p);const y=f(t,["model"]);y!=null&&m(e,["model"],y);const w=f(t,["inputConfig"]);w!=null&&m(e,["src"],WE(w));const b=f(t,["outputConfig"]);b!=null&&m(e,["dest"],XE(Dy(b)));const S=f(t,["completionStats"]);return S!=null&&m(e,["completionStats"],S),e}function WE(t){const e={},i=f(t,["instancesFormat"]);i!=null&&m(e,["format"],i);const r=f(t,["gcsSource","uris"]);r!=null&&m(e,["gcsUri"],r);const a=f(t,["bigquerySource","inputUri"]);return a!=null&&m(e,["bigqueryUri"],a),e}function ZE(t,e){const i={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=f(e,["fileName"]);r!=null&&m(i,["fileName"],r);const a=f(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>AT(t,u))),m(i,["requests","requests"],l)}return i}function eT(t){const e={},i=f(t,["format"]);i!=null&&m(e,["instancesFormat"],i);const r=f(t,["gcsUri"]);r!=null&&m(e,["gcsSource","uris"],r);const a=f(t,["bigqueryUri"]);if(a!=null&&m(e,["bigquerySource","inputUri"],a),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function tT(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function nT(t,e){const i={},r=f(e,["name"]);return r!=null&&m(i,["_url","name"],Ir(t,r)),i}function iT(t,e){const i={},r=f(e,["name"]);return r!=null&&m(i,["_url","name"],Ir(t,r)),i}function sT(t){const e={},i=f(t,["content"]);i!=null&&m(e,["content"],i);const r=f(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],rT(r));const a=f(t,["tokenCount"]);a!=null&&m(e,["tokenCount"],a);const l=f(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const u=f(t,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const h=f(t,["groundingMetadata"]);h!=null&&m(e,["groundingMetadata"],h);const g=f(t,["index"]);g!=null&&m(e,["index"],g);const p=f(t,["logprobsResult"]);p!=null&&m(e,["logprobsResult"],p);const y=f(t,["safetyRatings"]);if(y!=null){let b=y;Array.isArray(b)&&(b=b.map(S=>S)),m(e,["safetyRatings"],b)}const w=f(t,["urlContextMetadata"]);return w!=null&&m(e,["urlContextMetadata"],w),e}function rT(t){const e={},i=f(t,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),m(e,["citations"],r)}return e}function Uy(t){const e={},i=f(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>OT(l))),m(e,["parts"],a)}const r=f(t,["role"]);return r!=null&&m(e,["role"],r),e}function aT(t,e){const i={},r=f(t,["displayName"]);if(e!==void 0&&r!=null&&m(e,["batch","displayName"],r),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function oT(t,e){const i={},r=f(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const a=f(t,["dest"]);return e!==void 0&&a!=null&&m(e,["outputConfig"],QE(KE(a))),i}function uv(t,e){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],ze(t,r));const a=f(e,["src"]);a!=null&&m(i,["batch","inputConfig"],ZE(t,My(t,a)));const l=f(e,["config"]);return l!=null&&aT(l,i),i}function lT(t,e){const i={},r=f(e,["model"]);r!=null&&m(i,["model"],ze(t,r));const a=f(e,["src"]);a!=null&&m(i,["inputConfig"],eT(My(t,a)));const l=f(e,["config"]);return l!=null&&oT(l,i),i}function cT(t,e){const i={},r=f(t,["displayName"]);return e!==void 0&&r!=null&&m(e,["batch","displayName"],r),i}function uT(t,e){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],ze(t,r));const a=f(e,["src"]);a!=null&&m(i,["batch","inputConfig"],vT(t,a));const l=f(e,["config"]);return l!=null&&cT(l,i),i}function dT(t,e){const i={},r=f(e,["name"]);return r!=null&&m(i,["_url","name"],Ir(t,r)),i}function fT(t,e){const i={},r=f(e,["name"]);return r!=null&&m(i,["_url","name"],Ir(t,r)),i}function hT(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=f(t,["name"]);r!=null&&m(e,["name"],r);const a=f(t,["done"]);a!=null&&m(e,["done"],a);const l=f(t,["error"]);return l!=null&&m(e,["error"],l),e}function pT(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=f(t,["name"]);r!=null&&m(e,["name"],r);const a=f(t,["done"]);a!=null&&m(e,["done"],a);const l=f(t,["error"]);return l!=null&&m(e,["error"],l),e}function mT(t,e){const i={},r=f(e,["contents"]);if(r!=null){let l=Cf(t,r);Array.isArray(l)&&(l=l.map(u=>u)),m(i,["requests[]","request","content"],l)}const a=f(e,["config"]);return a!=null&&(m(i,["_self"],gT(a,i)),dE(i,{"requests[].*":"requests[].request.*"})),i}function gT(t,e){const i={},r=f(t,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const a=f(t,["title"]);e!==void 0&&a!=null&&m(e,["requests[]","title"],a);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function vT(t,e){const i={},r=f(e,["fileName"]);r!=null&&m(i,["file_name"],r);const a=f(e,["inlinedRequests"]);return a!=null&&m(i,["requests"],mT(t,a)),i}function yT(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function xT(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const r=f(t,["args"]);r!=null&&m(e,["args"],r);const a=f(t,["name"]);if(a!=null&&m(e,["name"],a),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function bT(t){const e={},i=f(t,["allowedFunctionNames"]);i!=null&&m(e,["allowedFunctionNames"],i);const r=f(t,["mode"]);if(r!=null&&m(e,["mode"],r),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function wT(t,e,i){const r={},a=f(e,["systemInstruction"]);i!==void 0&&a!=null&&m(i,["systemInstruction"],Uy(Dt(a)));const l=f(e,["temperature"]);l!=null&&m(r,["temperature"],l);const u=f(e,["topP"]);u!=null&&m(r,["topP"],u);const h=f(e,["topK"]);h!=null&&m(r,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&m(r,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&m(r,["maxOutputTokens"],p);const y=f(e,["stopSequences"]);y!=null&&m(r,["stopSequences"],y);const w=f(e,["responseLogprobs"]);w!=null&&m(r,["responseLogprobs"],w);const b=f(e,["logprobs"]);b!=null&&m(r,["logprobs"],b);const S=f(e,["presencePenalty"]);S!=null&&m(r,["presencePenalty"],S);const E=f(e,["frequencyPenalty"]);E!=null&&m(r,["frequencyPenalty"],E);const A=f(e,["seed"]);A!=null&&m(r,["seed"],A);const N=f(e,["responseMimeType"]);N!=null&&m(r,["responseMimeType"],N);const C=f(e,["responseSchema"]);C!=null&&m(r,["responseSchema"],Af(C));const k=f(e,["responseJsonSchema"]);if(k!=null&&m(r,["responseJsonSchema"],k),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=f(e,["safetySettings"]);if(i!==void 0&&R!=null){let K=R;Array.isArray(K)&&(K=K.map(ee=>LT(ee))),m(i,["safetySettings"],K)}const M=f(e,["tools"]);if(i!==void 0&&M!=null){let K=Rr(M);Array.isArray(K)&&(K=K.map(ee=>zT(kr(ee)))),m(i,["tools"],K)}const z=f(e,["toolConfig"]);if(i!==void 0&&z!=null&&m(i,["toolConfig"],PT(z)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=f(e,["cachedContent"]);i!==void 0&&O!=null&&m(i,["cachedContent"],hi(t,O));const j=f(e,["responseModalities"]);j!=null&&m(r,["responseModalities"],j);const B=f(e,["mediaResolution"]);B!=null&&m(r,["mediaResolution"],B);const q=f(e,["speechConfig"]);if(q!=null&&m(r,["speechConfig"],kf(q)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const W=f(e,["thinkingConfig"]);W!=null&&m(r,["thinkingConfig"],W);const te=f(e,["imageConfig"]);te!=null&&m(r,["imageConfig"],CT(te));const ae=f(e,["enableEnhancedCivicAnswers"]);if(ae!=null&&m(r,["enableEnhancedCivicAnswers"],ae),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function _T(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=f(t,["candidates"]);if(r!=null){let g=r;Array.isArray(g)&&(g=g.map(p=>sT(p))),m(e,["candidates"],g)}const a=f(t,["modelVersion"]);a!=null&&m(e,["modelVersion"],a);const l=f(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const u=f(t,["responseId"]);u!=null&&m(e,["responseId"],u);const h=f(t,["usageMetadata"]);return h!=null&&m(e,["usageMetadata"],h),e}function ST(t,e){const i={},r=f(e,["name"]);return r!=null&&m(i,["_url","name"],Ir(t,r)),i}function ET(t,e){const i={},r=f(e,["name"]);return r!=null&&m(i,["_url","name"],Ir(t,r)),i}function TT(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function NT(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function CT(t){const e={},i=f(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const r=f(t,["imageSize"]);if(r!=null&&m(e,["imageSize"],r),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function AT(t,e){const i={},r=f(e,["model"]);r!=null&&m(i,["request","model"],ze(t,r));const a=f(e,["contents"]);if(a!=null){let h=vn(a);Array.isArray(h)&&(h=h.map(g=>Uy(g))),m(i,["request","contents"],h)}const l=f(e,["metadata"]);l!=null&&m(i,["metadata"],l);const u=f(e,["config"]);return u!=null&&m(i,["request","generationConfig"],wT(t,u,f(i,["request"],{}))),i}function kT(t){const e={},i=f(t,["response"]);i!=null&&m(e,["response"],_T(i));const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const a=f(t,["error"]);return a!=null&&m(e,["error"],a),e}function RT(t,e){const i={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);if(e!==void 0&&a!=null&&m(e,["_query","pageToken"],a),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function IT(t,e){const i={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const l=f(t,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),i}function MT(t){const e={},i=f(t,["config"]);return i!=null&&RT(i,e),e}function DT(t){const e={},i=f(t,["config"]);return i!=null&&IT(i,e),e}function jT(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const a=f(t,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>Al(u))),m(e,["batchJobs"],l)}return e}function UT(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const a=f(t,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>Qd(u))),m(e,["batchJobs"],l)}return e}function OT(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const r=f(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const a=f(t,["executableCode"]);a!=null&&m(e,["executableCode"],a);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],yT(l));const u=f(t,["functionCall"]);u!=null&&m(e,["functionCall"],xT(u));const h=f(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&m(e,["inlineData"],tT(g));const p=f(t,["text"]);p!=null&&m(e,["text"],p);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const w=f(t,["thoughtSignature"]);w!=null&&m(e,["thoughtSignature"],w);const b=f(t,["videoMetadata"]);return b!=null&&m(e,["videoMetadata"],b),e}function LT(t){const e={},i=f(t,["category"]);if(i!=null&&m(e,["category"],i),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function PT(t){const e={},i=f(t,["retrievalConfig"]);i!=null&&m(e,["retrievalConfig"],i);const r=f(t,["functionCallingConfig"]);return r!=null&&m(e,["functionCallingConfig"],bT(r)),e}function zT(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&m(e,["computerUse"],i);const r=f(t,["fileSearch"]);r!=null&&m(e,["fileSearch"],r);const a=f(t,["codeExecution"]);if(a!=null&&m(e,["codeExecution"],a),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(w=>w)),m(e,["functionDeclarations"],y)}const u=f(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],TT(u));const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],NT(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&m(e,["googleSearchRetrieval"],g);const p=f(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ui;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(ui||(ui={}));class _s{constructor(e,i,r,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,r,a)}init(e,i,r){var a,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!r||Object.keys(r).length===0?u={config:{}}:typeof r=="object"?u=Object.assign({},r):u=r,u.config&&(u.config.pageToken=i.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(a=u.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qT extends fi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new _s(ui.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=uv(this.apiClient,e),r=i._url,a=re("{model}:batchGenerateContent",r),h=i.batch.inputConfig.requests,g=h.requests,p=[];for(const y of g){const w=Object.assign({},y);if(w.systemInstruction){const b=w.systemInstruction;delete w.systemInstruction;const S=w.request;S.systemInstruction=b,w.request=S}p.push(w)}return h.requests=p,delete i.config,delete i._url,delete i._query,{path:a,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const r=i?Object.assign({},i):{},a=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${a}`),r.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?r.dest=`${l.slice(0,-6)}/dest`:r.dest=`${l}_dest_${a}`;else if(u)r.dest=`${u}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=lT(this.apiClient,e);return h=re("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>Qd(y))}else{const p=uv(this.apiClient,e);return h=re("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>Al(y))}}async createEmbeddingsInternal(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=uT(this.apiClient,e);return l=re("{model}:asyncBatchEmbedContent",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>Al(g))}}async get(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=ET(this.apiClient,e);return h=re("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>Qd(y))}else{const p=ST(this.apiClient,e);return h=re("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>Al(y))}}async cancel(e){var i,r,a,l;let u="",h={};if(this.apiClient.isVertexAI()){const g=iT(this.apiClient,e);u=re("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const g=nT(this.apiClient,e);u=re("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=DT(e);return h=re("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=UT(y),b=new av;return Object.assign(b,w),b})}else{const p=MT(e);return h=re("batches",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=jT(y),b=new av;return Object.assign(b,w),b})}}async delete(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=fT(this.apiClient,e);return h=re("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>pT(y))}else{const p=dT(this.apiClient,e);return h=re("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>hT(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VT(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function dv(t){const e={},i=f(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>uN(l))),m(e,["parts"],a)}const r=f(t,["role"]);return r!=null&&m(e,["role"],r),e}function HT(t,e){const i={},r=f(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const a=f(t,["expireTime"]);e!==void 0&&a!=null&&m(e,["expireTime"],a);const l=f(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let y=vn(u);Array.isArray(y)&&(y=y.map(w=>dv(w))),m(e,["contents"],y)}const h=f(t,["systemInstruction"]);e!==void 0&&h!=null&&m(e,["systemInstruction"],dv(Dt(h)));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let y=g;Array.isArray(y)&&(y=y.map(w=>fN(w))),m(e,["tools"],y)}const p=f(t,["toolConfig"]);if(e!==void 0&&p!=null&&m(e,["toolConfig"],dN(p)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function GT(t,e){const i={},r=f(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const a=f(t,["expireTime"]);e!==void 0&&a!=null&&m(e,["expireTime"],a);const l=f(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let w=vn(u);Array.isArray(w)&&(w=w.map(b=>b)),m(e,["contents"],w)}const h=f(t,["systemInstruction"]);e!==void 0&&h!=null&&m(e,["systemInstruction"],Dt(h));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let w=g;Array.isArray(w)&&(w=w.map(b=>hN(b))),m(e,["tools"],w)}const p=f(t,["toolConfig"]);e!==void 0&&p!=null&&m(e,["toolConfig"],p);const y=f(t,["kmsKeyName"]);return e!==void 0&&y!=null&&m(e,["encryption_spec","kmsKeyName"],y),i}function BT(t,e){const i={},r=f(e,["model"]);r!=null&&m(i,["model"],Sy(t,r));const a=f(e,["config"]);return a!=null&&HT(a,i),i}function $T(t,e){const i={},r=f(e,["model"]);r!=null&&m(i,["model"],Sy(t,r));const a=f(e,["config"]);return a!=null&&GT(a,i),i}function FT(t,e){const i={},r=f(e,["name"]);return r!=null&&m(i,["_url","name"],hi(t,r)),i}function JT(t,e){const i={},r=f(e,["name"]);return r!=null&&m(i,["_url","name"],hi(t,r)),i}function KT(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function YT(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function XT(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function QT(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const r=f(t,["args"]);r!=null&&m(e,["args"],r);const a=f(t,["name"]);if(a!=null&&m(e,["name"],a),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WT(t){const e={},i=f(t,["allowedFunctionNames"]);i!=null&&m(e,["allowedFunctionNames"],i);const r=f(t,["mode"]);if(r!=null&&m(e,["mode"],r),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ZT(t){const e={},i=f(t,["description"]);i!=null&&m(e,["description"],i);const r=f(t,["name"]);r!=null&&m(e,["name"],r);const a=f(t,["parameters"]);a!=null&&m(e,["parameters"],a);const l=f(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=f(t,["response"]);u!=null&&m(e,["response"],u);const h=f(t,["responseJsonSchema"]);if(h!=null&&m(e,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function eN(t,e){const i={},r=f(e,["name"]);return r!=null&&m(i,["_url","name"],hi(t,r)),i}function tN(t,e){const i={},r=f(e,["name"]);return r!=null&&m(i,["_url","name"],hi(t,r)),i}function nN(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function iN(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function sN(t,e){const i={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);return e!==void 0&&a!=null&&m(e,["_query","pageToken"],a),i}function rN(t,e){const i={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);return e!==void 0&&a!=null&&m(e,["_query","pageToken"],a),i}function aN(t){const e={},i=f(t,["config"]);return i!=null&&sN(i,e),e}function oN(t){const e={},i=f(t,["config"]);return i!=null&&rN(i,e),e}function lN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const a=f(t,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["cachedContents"],l)}return e}function cN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const a=f(t,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["cachedContents"],l)}return e}function uN(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const r=f(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const a=f(t,["executableCode"]);a!=null&&m(e,["executableCode"],a);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],XT(l));const u=f(t,["functionCall"]);u!=null&&m(e,["functionCall"],QT(u));const h=f(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&m(e,["inlineData"],VT(g));const p=f(t,["text"]);p!=null&&m(e,["text"],p);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const w=f(t,["thoughtSignature"]);w!=null&&m(e,["thoughtSignature"],w);const b=f(t,["videoMetadata"]);return b!=null&&m(e,["videoMetadata"],b),e}function dN(t){const e={},i=f(t,["retrievalConfig"]);i!=null&&m(e,["retrievalConfig"],i);const r=f(t,["functionCallingConfig"]);return r!=null&&m(e,["functionCallingConfig"],WT(r)),e}function fN(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&m(e,["computerUse"],i);const r=f(t,["fileSearch"]);r!=null&&m(e,["fileSearch"],r);const a=f(t,["codeExecution"]);if(a!=null&&m(e,["codeExecution"],a),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(w=>w)),m(e,["functionDeclarations"],y)}const u=f(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],nN(u));const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],iN(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&m(e,["googleSearchRetrieval"],g);const p=f(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function hN(t){const e={},i=f(t,["retrieval"]);i!=null&&m(e,["retrieval"],i);const r=f(t,["computerUse"]);if(r!=null&&m(e,["computerUse"],r),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=f(t,["codeExecution"]);a!=null&&m(e,["codeExecution"],a);const l=f(t,["enterpriseWebSearch"]);l!=null&&m(e,["enterpriseWebSearch"],l);const u=f(t,["functionDeclarations"]);if(u!=null){let w=u;Array.isArray(w)&&(w=w.map(b=>ZT(b))),m(e,["functionDeclarations"],w)}const h=f(t,["googleMaps"]);h!=null&&m(e,["googleMaps"],h);const g=f(t,["googleSearch"]);g!=null&&m(e,["googleSearch"],g);const p=f(t,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const y=f(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function pN(t,e){const i={},r=f(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const a=f(t,["expireTime"]);return e!==void 0&&a!=null&&m(e,["expireTime"],a),i}function mN(t,e){const i={},r=f(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const a=f(t,["expireTime"]);return e!==void 0&&a!=null&&m(e,["expireTime"],a),i}function gN(t,e){const i={},r=f(e,["name"]);r!=null&&m(i,["_url","name"],hi(t,r));const a=f(e,["config"]);return a!=null&&pN(a,i),i}function vN(t,e){const i={},r=f(e,["name"]);r!=null&&m(i,["_url","name"],hi(t,r));const a=f(e,["config"]);return a!=null&&mN(a,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yN extends fi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new _s(ui.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(i),i)}async create(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=$T(this.apiClient,e);return h=re("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const p=BT(this.apiClient,e);return h=re("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async get(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=tN(this.apiClient,e);return h=re("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const p=eN(this.apiClient,e);return h=re("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=JT(this.apiClient,e);return h=re("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=YT(y),b=new sv;return Object.assign(b,w),b})}else{const p=FT(this.apiClient,e);return h=re("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=KT(y),b=new sv;return Object.assign(b,w),b})}}async update(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=vN(this.apiClient,e);return h=re("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const p=gN(this.apiClient,e);return h=re("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async listInternal(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=oN(e);return h=re("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=cN(y),b=new rv;return Object.assign(b,w),b})}else{const p=aN(e);return h=re("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=lN(y),b=new rv;return Object.assign(b,w),b})}}}function Bl(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(i[r[a]]=t[r[a]]);return i}function fv(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function be(t){return this instanceof be?(this.v=t,this):new be(t)}function Rn(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),a[Symbol.asyncIterator]=function(){return this},a;function u(S){return function(E){return Promise.resolve(E).then(S,w)}}function h(S,E){r[S]&&(a[S]=function(A){return new Promise(function(N,C){l.push([S,A,N,C])>1||g(S,A)})},E&&(a[S]=E(a[S])))}function g(S,E){try{p(r[S](E))}catch(A){b(l[0][3],A)}}function p(S){S.value instanceof be?Promise.resolve(S.value.v).then(y,w):b(l[0][2],S)}function y(S){g("next",S)}function w(S){g("throw",S)}function b(S,E){S(E),l.shift(),l.length&&g(l[0][0],l[0][1])}}function In(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof fv=="function"?fv(t):t[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(l){i[l]=t[l]&&function(u){return new Promise(function(h,g){u=t[l](u),a(h,g,u.done,u.value)})}}function a(l,u,h,g){Promise.resolve(g).then(function(p){l({value:p,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xN(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:Oy(i)}function Oy(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function bN(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function hv(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let r=0;for(;r<i;)if(t[r].role==="user")e.push(t[r]),r++;else{const a=[];let l=!0;for(;r<i&&t[r].role==="model";)a.push(t[r]),l&&!Oy(t[r])&&(l=!1),r++;l?e.push(...a):e.pop()}return e}class wN{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new _N(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class _N{constructor(e,i,r,a={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=r,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),bN(l)}async sendMessage(e){var i;await this.sendPromise;const r=Dt(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,u,h;const g=await a,p=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,y=g.automaticFunctionCallingHistory,w=this.getHistory(!0).length;let b=[];y!=null&&(b=(h=y.slice(w))!==null&&h!==void 0?h:[]);const S=p?[p]:[];this.recordHistory(r,S,b)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var i;await this.sendPromise;const r=Dt(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,r)}getHistory(e=!1){const i=e?hv(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){return Rn(this,arguments,function*(){var a,l,u,h,g,p;const y=[];try{for(var w=!0,b=In(e),S;S=yield be(b.next()),a=S.done,!a;w=!0){h=S.value,w=!1;const E=h;if(xN(E)){const A=(p=(g=E.candidates)===null||g===void 0?void 0:g[0])===null||p===void 0?void 0:p.content;A!==void 0&&y.push(A)}yield yield be(E)}}catch(E){l={error:E}}finally{try{!w&&!a&&(u=b.return)&&(yield be(u.call(b)))}finally{if(l)throw l.error}}this.recordHistory(i,y)})}recordHistory(e,i,r){let a=[];i.length>0&&i.every(l=>l.role!==void 0)?a=i:a.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...hv(r)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class La extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,La.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SN(t){const e={},i=f(t,["file"]);return i!=null&&m(e,["file"],i),e}function EN(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function TN(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","file"],ky(i)),e}function NN(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function CN(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","file"],ky(i)),e}function AN(t){const e={},i=f(t,["uris"]);return i!=null&&m(e,["uris"],i),e}function kN(t,e){const i={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);return e!==void 0&&a!=null&&m(e,["_query","pageToken"],a),i}function RN(t){const e={},i=f(t,["config"]);return i!=null&&kN(i,e),e}function IN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const a=f(t,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["files"],l)}return e}function MN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=f(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DN extends fi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new _s(ui.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=RN(e);return l=re("files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:g.headers},y})),a.then(g=>{const p=IN(g),y=new jE;return Object.assign(y,p),y})}}async createInternal(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=SN(e);return l=re("upload/v1beta/files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=EN(g),y=new UE;return Object.assign(y,p),y})}}async get(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=CN(e);return l=re("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=TN(e);return l=re("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:g.headers},y})),a.then(g=>{const p=NN(g),y=new OE;return Object.assign(y,p),y})}}async registerFilesInternal(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=AN(e);return l=re("files:register",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=MN(g),y=new LE;return Object.assign(y,p),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kl(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function jN(t){const e={},i=f(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>XN(l))),m(e,["parts"],a)}const r=f(t,["role"]);return r!=null&&m(e,["role"],r),e}function UN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function ON(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const r=f(t,["args"]);r!=null&&m(e,["args"],r);const a=f(t,["name"]);if(a!=null&&m(e,["name"],a),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function LN(t){const e={},i=f(t,["description"]);i!=null&&m(e,["description"],i);const r=f(t,["name"]);r!=null&&m(e,["name"],r);const a=f(t,["parameters"]);a!=null&&m(e,["parameters"],a);const l=f(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=f(t,["response"]);u!=null&&m(e,["response"],u);const h=f(t,["responseJsonSchema"]);if(h!=null&&m(e,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function PN(t){const e={},i=f(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const r=f(t,["responseJsonSchema"]);r!=null&&m(e,["responseJsonSchema"],r);const a=f(t,["audioTimestamp"]);a!=null&&m(e,["audioTimestamp"],a);const l=f(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const u=f(t,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const h=f(t,["frequencyPenalty"]);h!=null&&m(e,["frequencyPenalty"],h);const g=f(t,["logprobs"]);g!=null&&m(e,["logprobs"],g);const p=f(t,["maxOutputTokens"]);p!=null&&m(e,["maxOutputTokens"],p);const y=f(t,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const w=f(t,["presencePenalty"]);w!=null&&m(e,["presencePenalty"],w);const b=f(t,["responseLogprobs"]);b!=null&&m(e,["responseLogprobs"],b);const S=f(t,["responseMimeType"]);S!=null&&m(e,["responseMimeType"],S);const E=f(t,["responseModalities"]);E!=null&&m(e,["responseModalities"],E);const A=f(t,["responseSchema"]);A!=null&&m(e,["responseSchema"],A);const N=f(t,["routingConfig"]);N!=null&&m(e,["routingConfig"],N);const C=f(t,["seed"]);C!=null&&m(e,["seed"],C);const k=f(t,["speechConfig"]);k!=null&&m(e,["speechConfig"],k);const R=f(t,["stopSequences"]);R!=null&&m(e,["stopSequences"],R);const M=f(t,["temperature"]);M!=null&&m(e,["temperature"],M);const z=f(t,["thinkingConfig"]);z!=null&&m(e,["thinkingConfig"],z);const O=f(t,["topK"]);O!=null&&m(e,["topK"],O);const j=f(t,["topP"]);if(j!=null&&m(e,["topP"],j),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function zN(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function qN(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function VN(t,e){const i={},r=f(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const a=f(t,["responseModalities"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","responseModalities"],a);const l=f(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=f(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const h=f(t,["topK"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","topK"],h);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(t,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const y=f(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const w=f(t,["speechConfig"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","speechConfig"],Rf(w));const b=f(t,["thinkingConfig"]);e!==void 0&&b!=null&&m(e,["setup","generationConfig","thinkingConfig"],b);const S=f(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],S);const E=f(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],jN(Dt(E)));const A=f(t,["tools"]);if(e!==void 0&&A!=null){let O=Rr(A);Array.isArray(O)&&(O=O.map(j=>WN(kr(j)))),m(e,["setup","tools"],O)}const N=f(t,["sessionResumption"]);e!==void 0&&N!=null&&m(e,["setup","sessionResumption"],QN(N));const C=f(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&m(e,["setup","inputAudioTranscription"],C);const k=f(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&m(e,["setup","outputAudioTranscription"],k);const R=f(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&m(e,["setup","realtimeInputConfig"],R);const M=f(t,["contextWindowCompression"]);e!==void 0&&M!=null&&m(e,["setup","contextWindowCompression"],M);const z=f(t,["proactivity"]);if(e!==void 0&&z!=null&&m(e,["setup","proactivity"],z),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function HN(t,e){const i={},r=f(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],PN(r));const a=f(t,["responseModalities"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","responseModalities"],a);const l=f(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=f(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const h=f(t,["topK"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","topK"],h);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(t,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const y=f(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const w=f(t,["speechConfig"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","speechConfig"],Rf(w));const b=f(t,["thinkingConfig"]);e!==void 0&&b!=null&&m(e,["setup","generationConfig","thinkingConfig"],b);const S=f(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],S);const E=f(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],Dt(E));const A=f(t,["tools"]);if(e!==void 0&&A!=null){let j=Rr(A);Array.isArray(j)&&(j=j.map(B=>ZN(kr(B)))),m(e,["setup","tools"],j)}const N=f(t,["sessionResumption"]);e!==void 0&&N!=null&&m(e,["setup","sessionResumption"],N);const C=f(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&m(e,["setup","inputAudioTranscription"],C);const k=f(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&m(e,["setup","outputAudioTranscription"],k);const R=f(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&m(e,["setup","realtimeInputConfig"],R);const M=f(t,["contextWindowCompression"]);e!==void 0&&M!=null&&m(e,["setup","contextWindowCompression"],M);const z=f(t,["proactivity"]);e!==void 0&&z!=null&&m(e,["setup","proactivity"],z);const O=f(t,["explicitVadSignal"]);return e!==void 0&&O!=null&&m(e,["setup","explicitVadSignal"],O),i}function GN(t,e){const i={},r=f(e,["model"]);r!=null&&m(i,["setup","model"],ze(t,r));const a=f(e,["config"]);return a!=null&&m(i,["config"],VN(a,i)),i}function BN(t,e){const i={},r=f(e,["model"]);r!=null&&m(i,["setup","model"],ze(t,r));const a=f(e,["config"]);return a!=null&&m(i,["config"],HN(a,i)),i}function $N(t){const e={},i=f(t,["musicGenerationConfig"]);return i!=null&&m(e,["musicGenerationConfig"],i),e}function FN(t){const e={},i=f(t,["weightedPrompts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),m(e,["weightedPrompts"],r)}return e}function JN(t){const e={},i=f(t,["media"]);if(i!=null){let p=Ey(i);Array.isArray(p)&&(p=p.map(y=>kl(y))),m(e,["mediaChunks"],p)}const r=f(t,["audio"]);r!=null&&m(e,["audio"],kl(Ny(r)));const a=f(t,["audioStreamEnd"]);a!=null&&m(e,["audioStreamEnd"],a);const l=f(t,["video"]);l!=null&&m(e,["video"],kl(Ty(l)));const u=f(t,["text"]);u!=null&&m(e,["text"],u);const h=f(t,["activityStart"]);h!=null&&m(e,["activityStart"],h);const g=f(t,["activityEnd"]);return g!=null&&m(e,["activityEnd"],g),e}function KN(t){const e={},i=f(t,["media"]);if(i!=null){let p=Ey(i);Array.isArray(p)&&(p=p.map(y=>y)),m(e,["mediaChunks"],p)}const r=f(t,["audio"]);r!=null&&m(e,["audio"],Ny(r));const a=f(t,["audioStreamEnd"]);a!=null&&m(e,["audioStreamEnd"],a);const l=f(t,["video"]);l!=null&&m(e,["video"],Ty(l));const u=f(t,["text"]);u!=null&&m(e,["text"],u);const h=f(t,["activityStart"]);h!=null&&m(e,["activityStart"],h);const g=f(t,["activityEnd"]);return g!=null&&m(e,["activityEnd"],g),e}function YN(t){const e={},i=f(t,["setupComplete"]);i!=null&&m(e,["setupComplete"],i);const r=f(t,["serverContent"]);r!=null&&m(e,["serverContent"],r);const a=f(t,["toolCall"]);a!=null&&m(e,["toolCall"],a);const l=f(t,["toolCallCancellation"]);l!=null&&m(e,["toolCallCancellation"],l);const u=f(t,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],eC(u));const h=f(t,["goAway"]);h!=null&&m(e,["goAway"],h);const g=f(t,["sessionResumptionUpdate"]);g!=null&&m(e,["sessionResumptionUpdate"],g);const p=f(t,["voiceActivityDetectionSignal"]);p!=null&&m(e,["voiceActivityDetectionSignal"],p);const y=f(t,["voiceActivity"]);return y!=null&&m(e,["voiceActivity"],tC(y)),e}function XN(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const r=f(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const a=f(t,["executableCode"]);a!=null&&m(e,["executableCode"],a);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],UN(l));const u=f(t,["functionCall"]);u!=null&&m(e,["functionCall"],ON(u));const h=f(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&m(e,["inlineData"],kl(g));const p=f(t,["text"]);p!=null&&m(e,["text"],p);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const w=f(t,["thoughtSignature"]);w!=null&&m(e,["thoughtSignature"],w);const b=f(t,["videoMetadata"]);return b!=null&&m(e,["videoMetadata"],b),e}function QN(t){const e={},i=f(t,["handle"]);if(i!=null&&m(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function WN(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&m(e,["computerUse"],i);const r=f(t,["fileSearch"]);r!=null&&m(e,["fileSearch"],r);const a=f(t,["codeExecution"]);if(a!=null&&m(e,["codeExecution"],a),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(w=>w)),m(e,["functionDeclarations"],y)}const u=f(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],zN(u));const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],qN(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&m(e,["googleSearchRetrieval"],g);const p=f(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function ZN(t){const e={},i=f(t,["retrieval"]);i!=null&&m(e,["retrieval"],i);const r=f(t,["computerUse"]);if(r!=null&&m(e,["computerUse"],r),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=f(t,["codeExecution"]);a!=null&&m(e,["codeExecution"],a);const l=f(t,["enterpriseWebSearch"]);l!=null&&m(e,["enterpriseWebSearch"],l);const u=f(t,["functionDeclarations"]);if(u!=null){let w=u;Array.isArray(w)&&(w=w.map(b=>LN(b))),m(e,["functionDeclarations"],w)}const h=f(t,["googleMaps"]);h!=null&&m(e,["googleMaps"],h);const g=f(t,["googleSearch"]);g!=null&&m(e,["googleSearch"],g);const p=f(t,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const y=f(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function eC(t){const e={},i=f(t,["promptTokenCount"]);i!=null&&m(e,["promptTokenCount"],i);const r=f(t,["cachedContentTokenCount"]);r!=null&&m(e,["cachedContentTokenCount"],r);const a=f(t,["candidatesTokenCount"]);a!=null&&m(e,["responseTokenCount"],a);const l=f(t,["toolUsePromptTokenCount"]);l!=null&&m(e,["toolUsePromptTokenCount"],l);const u=f(t,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const h=f(t,["totalTokenCount"]);h!=null&&m(e,["totalTokenCount"],h);const g=f(t,["promptTokensDetails"]);if(g!=null){let S=g;Array.isArray(S)&&(S=S.map(E=>E)),m(e,["promptTokensDetails"],S)}const p=f(t,["cacheTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(E=>E)),m(e,["cacheTokensDetails"],S)}const y=f(t,["candidatesTokensDetails"]);if(y!=null){let S=y;Array.isArray(S)&&(S=S.map(E=>E)),m(e,["responseTokensDetails"],S)}const w=f(t,["toolUsePromptTokensDetails"]);if(w!=null){let S=w;Array.isArray(S)&&(S=S.map(E=>E)),m(e,["toolUsePromptTokensDetails"],S)}const b=f(t,["trafficType"]);return b!=null&&m(e,["trafficType"],b),e}function tC(t){const e={},i=f(t,["type"]);return i!=null&&m(e,["voiceActivityType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nC(t,e){const i={},r=f(t,["data"]);if(r!=null&&m(i,["data"],r),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=f(t,["mimeType"]);return a!=null&&m(i,["mimeType"],a),i}function iC(t,e){const i={},r=f(t,["content"]);r!=null&&m(i,["content"],r);const a=f(t,["citationMetadata"]);a!=null&&m(i,["citationMetadata"],sC(a));const l=f(t,["tokenCount"]);l!=null&&m(i,["tokenCount"],l);const u=f(t,["finishReason"]);u!=null&&m(i,["finishReason"],u);const h=f(t,["avgLogprobs"]);h!=null&&m(i,["avgLogprobs"],h);const g=f(t,["groundingMetadata"]);g!=null&&m(i,["groundingMetadata"],g);const p=f(t,["index"]);p!=null&&m(i,["index"],p);const y=f(t,["logprobsResult"]);y!=null&&m(i,["logprobsResult"],y);const w=f(t,["safetyRatings"]);if(w!=null){let S=w;Array.isArray(S)&&(S=S.map(E=>E)),m(i,["safetyRatings"],S)}const b=f(t,["urlContextMetadata"]);return b!=null&&m(i,["urlContextMetadata"],b),i}function sC(t,e){const i={},r=f(t,["citationSources"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),m(i,["citations"],a)}return i}function rC(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["contents"]);if(l!=null){let u=vn(l);Array.isArray(u)&&(u=u.map(h=>h)),m(r,["contents"],u)}return r}function aC(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["tokensInfo"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),m(i,["tokensInfo"],l)}return i}function oC(t,e){const i={},r=f(t,["values"]);r!=null&&m(i,["values"],r);const a=f(t,["statistics"]);return a!=null&&m(i,["statistics"],lC(a)),i}function lC(t,e){const i={},r=f(t,["truncated"]);r!=null&&m(i,["truncated"],r);const a=f(t,["token_count"]);return a!=null&&m(i,["tokenCount"],a),i}function nc(t,e){const i={},r=f(t,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>vA(u))),m(i,["parts"],l)}const a=f(t,["role"]);return a!=null&&m(i,["role"],a),i}function cC(t,e){const i={},r=f(t,["controlType"]);r!=null&&m(i,["controlType"],r);const a=f(t,["enableControlImageComputation"]);return a!=null&&m(i,["computeControl"],a),i}function uC(t,e){const i={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return i}function dC(t,e,i){const r={},a=f(t,["systemInstruction"]);e!==void 0&&a!=null&&m(e,["systemInstruction"],Dt(a));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>qy(g))),m(e,["tools"],h)}const u=f(t,["generationConfig"]);return e!==void 0&&u!=null&&m(e,["generationConfig"],nA(u)),r}function fC(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["contents"]);if(l!=null){let h=vn(l);Array.isArray(h)&&(h=h.map(g=>nc(g))),m(r,["contents"],h)}const u=f(e,["config"]);return u!=null&&uC(u),r}function hC(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["contents"]);if(l!=null){let h=vn(l);Array.isArray(h)&&(h=h.map(g=>g)),m(r,["contents"],h)}const u=f(e,["config"]);return u!=null&&dC(u,r),r}function pC(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["totalTokens"]);a!=null&&m(i,["totalTokens"],a);const l=f(t,["cachedContentTokenCount"]);return l!=null&&m(i,["cachedContentTokenCount"],l),i}function mC(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["totalTokens"]);return a!=null&&m(i,["totalTokens"],a),i}function gC(t,e,i){const r={},a=f(e,["model"]);return a!=null&&m(r,["_url","name"],ze(t,a)),r}function vC(t,e,i){const r={},a=f(e,["model"]);return a!=null&&m(r,["_url","name"],ze(t,a)),r}function yC(t,e){const i={},r=f(t,["sdkHttpResponse"]);return r!=null&&m(i,["sdkHttpResponse"],r),i}function xC(t,e){const i={},r=f(t,["sdkHttpResponse"]);return r!=null&&m(i,["sdkHttpResponse"],r),i}function bC(t,e,i){const r={},a=f(t,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&m(e,["parameters","negativePrompt"],l);const u=f(t,["numberOfImages"]);e!==void 0&&u!=null&&m(e,["parameters","sampleCount"],u);const h=f(t,["aspectRatio"]);e!==void 0&&h!=null&&m(e,["parameters","aspectRatio"],h);const g=f(t,["guidanceScale"]);e!==void 0&&g!=null&&m(e,["parameters","guidanceScale"],g);const p=f(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const y=f(t,["safetyFilterLevel"]);e!==void 0&&y!=null&&m(e,["parameters","safetySetting"],y);const w=f(t,["personGeneration"]);e!==void 0&&w!=null&&m(e,["parameters","personGeneration"],w);const b=f(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&m(e,["parameters","includeSafetyAttributes"],b);const S=f(t,["includeRaiReason"]);e!==void 0&&S!=null&&m(e,["parameters","includeRaiReason"],S);const E=f(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const A=f(t,["outputMimeType"]);e!==void 0&&A!=null&&m(e,["parameters","outputOptions","mimeType"],A);const N=f(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&m(e,["parameters","outputOptions","compressionQuality"],N);const C=f(t,["addWatermark"]);e!==void 0&&C!=null&&m(e,["parameters","addWatermark"],C);const k=f(t,["labels"]);e!==void 0&&k!=null&&m(e,["labels"],k);const R=f(t,["editMode"]);e!==void 0&&R!=null&&m(e,["parameters","editMode"],R);const M=f(t,["baseSteps"]);return e!==void 0&&M!=null&&m(e,["parameters","editConfig","baseSteps"],M),r}function wC(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["prompt"]);l!=null&&m(r,["instances[0]","prompt"],l);const u=f(e,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(p=>SA(p))),m(r,["instances[0]","referenceImages"],g)}const h=f(e,["config"]);return h!=null&&bC(h,r),r}function _C(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["predictions"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>ic(u))),m(i,["generatedImages"],l)}return i}function SC(t,e,i){const r={},a=f(t,["taskType"]);e!==void 0&&a!=null&&m(e,["requests[]","taskType"],a);const l=f(t,["title"]);e!==void 0&&l!=null&&m(e,["requests[]","title"],l);const u=f(t,["outputDimensionality"]);if(e!==void 0&&u!=null&&m(e,["requests[]","outputDimensionality"],u),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function EC(t,e,i){const r={},a=f(t,["taskType"]);e!==void 0&&a!=null&&m(e,["instances[]","task_type"],a);const l=f(t,["title"]);e!==void 0&&l!=null&&m(e,["instances[]","title"],l);const u=f(t,["outputDimensionality"]);e!==void 0&&u!=null&&m(e,["parameters","outputDimensionality"],u);const h=f(t,["mimeType"]);e!==void 0&&h!=null&&m(e,["instances[]","mimeType"],h);const g=f(t,["autoTruncate"]);return e!==void 0&&g!=null&&m(e,["parameters","autoTruncate"],g),r}function TC(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["contents"]);if(l!=null){let g=Cf(t,l);Array.isArray(g)&&(g=g.map(p=>p)),m(r,["requests[]","content"],g)}const u=f(e,["config"]);u!=null&&SC(u,r);const h=f(e,["model"]);return h!==void 0&&m(r,["requests[]","model"],ze(t,h)),r}function NC(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["contents"]);if(l!=null){let h=Cf(t,l);Array.isArray(h)&&(h=h.map(g=>g)),m(r,["instances[]","content"],h)}const u=f(e,["config"]);return u!=null&&EC(u,r),r}function CC(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["embeddings"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>h)),m(i,["embeddings"],u)}const l=f(t,["metadata"]);return l!=null&&m(i,["metadata"],l),i}function AC(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["predictions[]","embeddings"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>oC(h))),m(i,["embeddings"],u)}const l=f(t,["metadata"]);return l!=null&&m(i,["metadata"],l),i}function kC(t,e){const i={},r=f(t,["endpoint"]);r!=null&&m(i,["name"],r);const a=f(t,["deployedModelId"]);return a!=null&&m(i,["deployedModelId"],a),i}function RC(t,e){const i={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["fileUri"]);r!=null&&m(i,["fileUri"],r);const a=f(t,["mimeType"]);return a!=null&&m(i,["mimeType"],a),i}function IC(t,e){const i={},r=f(t,["id"]);r!=null&&m(i,["id"],r);const a=f(t,["args"]);a!=null&&m(i,["args"],a);const l=f(t,["name"]);if(l!=null&&m(i,["name"],l),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return i}function MC(t,e){const i={},r=f(t,["allowedFunctionNames"]);r!=null&&m(i,["allowedFunctionNames"],r);const a=f(t,["mode"]);if(a!=null&&m(i,["mode"],a),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return i}function DC(t,e){const i={},r=f(t,["description"]);r!=null&&m(i,["description"],r);const a=f(t,["name"]);a!=null&&m(i,["name"],a);const l=f(t,["parameters"]);l!=null&&m(i,["parameters"],l);const u=f(t,["parametersJsonSchema"]);u!=null&&m(i,["parametersJsonSchema"],u);const h=f(t,["response"]);h!=null&&m(i,["response"],h);const g=f(t,["responseJsonSchema"]);if(g!=null&&m(i,["responseJsonSchema"],g),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return i}function jC(t,e,i,r){const a={},l=f(e,["systemInstruction"]);i!==void 0&&l!=null&&m(i,["systemInstruction"],nc(Dt(l)));const u=f(e,["temperature"]);u!=null&&m(a,["temperature"],u);const h=f(e,["topP"]);h!=null&&m(a,["topP"],h);const g=f(e,["topK"]);g!=null&&m(a,["topK"],g);const p=f(e,["candidateCount"]);p!=null&&m(a,["candidateCount"],p);const y=f(e,["maxOutputTokens"]);y!=null&&m(a,["maxOutputTokens"],y);const w=f(e,["stopSequences"]);w!=null&&m(a,["stopSequences"],w);const b=f(e,["responseLogprobs"]);b!=null&&m(a,["responseLogprobs"],b);const S=f(e,["logprobs"]);S!=null&&m(a,["logprobs"],S);const E=f(e,["presencePenalty"]);E!=null&&m(a,["presencePenalty"],E);const A=f(e,["frequencyPenalty"]);A!=null&&m(a,["frequencyPenalty"],A);const N=f(e,["seed"]);N!=null&&m(a,["seed"],N);const C=f(e,["responseMimeType"]);C!=null&&m(a,["responseMimeType"],C);const k=f(e,["responseSchema"]);k!=null&&m(a,["responseSchema"],Af(k));const R=f(e,["responseJsonSchema"]);if(R!=null&&m(a,["responseJsonSchema"],R),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=f(e,["safetySettings"]);if(i!==void 0&&M!=null){let ee=M;Array.isArray(ee)&&(ee=ee.map(ce=>EA(ce))),m(i,["safetySettings"],ee)}const z=f(e,["tools"]);if(i!==void 0&&z!=null){let ee=Rr(z);Array.isArray(ee)&&(ee=ee.map(ce=>IA(kr(ce)))),m(i,["tools"],ee)}const O=f(e,["toolConfig"]);if(i!==void 0&&O!=null&&m(i,["toolConfig"],RA(O)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=f(e,["cachedContent"]);i!==void 0&&j!=null&&m(i,["cachedContent"],hi(t,j));const B=f(e,["responseModalities"]);B!=null&&m(a,["responseModalities"],B);const q=f(e,["mediaResolution"]);q!=null&&m(a,["mediaResolution"],q);const W=f(e,["speechConfig"]);if(W!=null&&m(a,["speechConfig"],kf(W)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const te=f(e,["thinkingConfig"]);te!=null&&m(a,["thinkingConfig"],te);const ae=f(e,["imageConfig"]);ae!=null&&m(a,["imageConfig"],oA(ae));const K=f(e,["enableEnhancedCivicAnswers"]);if(K!=null&&m(a,["enableEnhancedCivicAnswers"],K),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return a}function UC(t,e,i,r){const a={},l=f(e,["systemInstruction"]);i!==void 0&&l!=null&&m(i,["systemInstruction"],Dt(l));const u=f(e,["temperature"]);u!=null&&m(a,["temperature"],u);const h=f(e,["topP"]);h!=null&&m(a,["topP"],h);const g=f(e,["topK"]);g!=null&&m(a,["topK"],g);const p=f(e,["candidateCount"]);p!=null&&m(a,["candidateCount"],p);const y=f(e,["maxOutputTokens"]);y!=null&&m(a,["maxOutputTokens"],y);const w=f(e,["stopSequences"]);w!=null&&m(a,["stopSequences"],w);const b=f(e,["responseLogprobs"]);b!=null&&m(a,["responseLogprobs"],b);const S=f(e,["logprobs"]);S!=null&&m(a,["logprobs"],S);const E=f(e,["presencePenalty"]);E!=null&&m(a,["presencePenalty"],E);const A=f(e,["frequencyPenalty"]);A!=null&&m(a,["frequencyPenalty"],A);const N=f(e,["seed"]);N!=null&&m(a,["seed"],N);const C=f(e,["responseMimeType"]);C!=null&&m(a,["responseMimeType"],C);const k=f(e,["responseSchema"]);k!=null&&m(a,["responseSchema"],Af(k));const R=f(e,["responseJsonSchema"]);R!=null&&m(a,["responseJsonSchema"],R);const M=f(e,["routingConfig"]);M!=null&&m(a,["routingConfig"],M);const z=f(e,["modelSelectionConfig"]);z!=null&&m(a,["modelConfig"],z);const O=f(e,["safetySettings"]);if(i!==void 0&&O!=null){let ie=O;Array.isArray(ie)&&(ie=ie.map(ve=>ve)),m(i,["safetySettings"],ie)}const j=f(e,["tools"]);if(i!==void 0&&j!=null){let ie=Rr(j);Array.isArray(ie)&&(ie=ie.map(ve=>qy(kr(ve)))),m(i,["tools"],ie)}const B=f(e,["toolConfig"]);i!==void 0&&B!=null&&m(i,["toolConfig"],B);const q=f(e,["labels"]);i!==void 0&&q!=null&&m(i,["labels"],q);const W=f(e,["cachedContent"]);i!==void 0&&W!=null&&m(i,["cachedContent"],hi(t,W));const te=f(e,["responseModalities"]);te!=null&&m(a,["responseModalities"],te);const ae=f(e,["mediaResolution"]);ae!=null&&m(a,["mediaResolution"],ae);const K=f(e,["speechConfig"]);K!=null&&m(a,["speechConfig"],kf(K));const ee=f(e,["audioTimestamp"]);ee!=null&&m(a,["audioTimestamp"],ee);const ce=f(e,["thinkingConfig"]);ce!=null&&m(a,["thinkingConfig"],ce);const H=f(e,["imageConfig"]);if(H!=null&&m(a,["imageConfig"],lA(H)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const Z=f(e,["modelArmorConfig"]);return i!==void 0&&Z!=null&&m(i,["modelArmorConfig"],Z),a}function pv(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["contents"]);if(l!=null){let h=vn(l);Array.isArray(h)&&(h=h.map(g=>nc(g))),m(r,["contents"],h)}const u=f(e,["config"]);return u!=null&&m(r,["generationConfig"],jC(t,u,r)),r}function mv(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["contents"]);if(l!=null){let h=vn(l);Array.isArray(h)&&(h=h.map(g=>g)),m(r,["contents"],h)}const u=f(e,["config"]);return u!=null&&m(r,["generationConfig"],UC(t,u,r)),r}function gv(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["candidates"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(y=>iC(y))),m(i,["candidates"],p)}const l=f(t,["modelVersion"]);l!=null&&m(i,["modelVersion"],l);const u=f(t,["promptFeedback"]);u!=null&&m(i,["promptFeedback"],u);const h=f(t,["responseId"]);h!=null&&m(i,["responseId"],h);const g=f(t,["usageMetadata"]);return g!=null&&m(i,["usageMetadata"],g),i}function vv(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["candidates"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(w=>w)),m(i,["candidates"],y)}const l=f(t,["createTime"]);l!=null&&m(i,["createTime"],l);const u=f(t,["modelVersion"]);u!=null&&m(i,["modelVersion"],u);const h=f(t,["promptFeedback"]);h!=null&&m(i,["promptFeedback"],h);const g=f(t,["responseId"]);g!=null&&m(i,["responseId"],g);const p=f(t,["usageMetadata"]);return p!=null&&m(i,["usageMetadata"],p),i}function OC(t,e,i){const r={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const u=f(t,["guidanceScale"]);if(e!==void 0&&u!=null&&m(e,["parameters","guidanceScale"],u),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const g=f(t,["personGeneration"]);e!==void 0&&g!=null&&m(e,["parameters","personGeneration"],g);const p=f(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const y=f(t,["includeRaiReason"]);e!==void 0&&y!=null&&m(e,["parameters","includeRaiReason"],y);const w=f(t,["language"]);e!==void 0&&w!=null&&m(e,["parameters","language"],w);const b=f(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const S=f(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&m(e,["parameters","outputOptions","compressionQuality"],S),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=f(t,["imageSize"]);if(e!==void 0&&E!=null&&m(e,["parameters","sampleImageSize"],E),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function LC(t,e,i){const r={},a=f(t,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&m(e,["parameters","negativePrompt"],l);const u=f(t,["numberOfImages"]);e!==void 0&&u!=null&&m(e,["parameters","sampleCount"],u);const h=f(t,["aspectRatio"]);e!==void 0&&h!=null&&m(e,["parameters","aspectRatio"],h);const g=f(t,["guidanceScale"]);e!==void 0&&g!=null&&m(e,["parameters","guidanceScale"],g);const p=f(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const y=f(t,["safetyFilterLevel"]);e!==void 0&&y!=null&&m(e,["parameters","safetySetting"],y);const w=f(t,["personGeneration"]);e!==void 0&&w!=null&&m(e,["parameters","personGeneration"],w);const b=f(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&m(e,["parameters","includeSafetyAttributes"],b);const S=f(t,["includeRaiReason"]);e!==void 0&&S!=null&&m(e,["parameters","includeRaiReason"],S);const E=f(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const A=f(t,["outputMimeType"]);e!==void 0&&A!=null&&m(e,["parameters","outputOptions","mimeType"],A);const N=f(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&m(e,["parameters","outputOptions","compressionQuality"],N);const C=f(t,["addWatermark"]);e!==void 0&&C!=null&&m(e,["parameters","addWatermark"],C);const k=f(t,["labels"]);e!==void 0&&k!=null&&m(e,["labels"],k);const R=f(t,["imageSize"]);e!==void 0&&R!=null&&m(e,["parameters","sampleImageSize"],R);const M=f(t,["enhancePrompt"]);return e!==void 0&&M!=null&&m(e,["parameters","enhancePrompt"],M),r}function PC(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["prompt"]);l!=null&&m(r,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&OC(u,r),r}function zC(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["prompt"]);l!=null&&m(r,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&LC(u,r),r}function qC(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>WC(h))),m(i,["generatedImages"],u)}const l=f(t,["positivePromptSafetyAttributes"]);return l!=null&&m(i,["positivePromptSafetyAttributes"],Py(l)),i}function VC(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>ic(h))),m(i,["generatedImages"],u)}const l=f(t,["positivePromptSafetyAttributes"]);return l!=null&&m(i,["positivePromptSafetyAttributes"],zy(l)),i}function HC(t,e,i){const r={},a=f(t,["numberOfVideos"]);if(e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=f(t,["durationSeconds"]);if(e!==void 0&&l!=null&&m(e,["parameters","durationSeconds"],l),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const h=f(t,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const g=f(t,["personGeneration"]);if(e!==void 0&&g!=null&&m(e,["parameters","personGeneration"],g),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(t,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const y=f(t,["enhancePrompt"]);if(e!==void 0&&y!=null&&m(e,["parameters","enhancePrompt"],y),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const w=f(t,["lastFrame"]);e!==void 0&&w!=null&&m(e,["instances[0]","lastFrame"],sc(w));const b=f(t,["referenceImages"]);if(e!==void 0&&b!=null){let S=b;Array.isArray(S)&&(S=S.map(E=>BA(E))),m(e,["instances[0]","referenceImages"],S)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function GC(t,e,i){const r={},a=f(t,["numberOfVideos"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const u=f(t,["fps"]);e!==void 0&&u!=null&&m(e,["parameters","fps"],u);const h=f(t,["durationSeconds"]);e!==void 0&&h!=null&&m(e,["parameters","durationSeconds"],h);const g=f(t,["seed"]);e!==void 0&&g!=null&&m(e,["parameters","seed"],g);const p=f(t,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const y=f(t,["resolution"]);e!==void 0&&y!=null&&m(e,["parameters","resolution"],y);const w=f(t,["personGeneration"]);e!==void 0&&w!=null&&m(e,["parameters","personGeneration"],w);const b=f(t,["pubsubTopic"]);e!==void 0&&b!=null&&m(e,["parameters","pubsubTopic"],b);const S=f(t,["negativePrompt"]);e!==void 0&&S!=null&&m(e,["parameters","negativePrompt"],S);const E=f(t,["enhancePrompt"]);e!==void 0&&E!=null&&m(e,["parameters","enhancePrompt"],E);const A=f(t,["generateAudio"]);e!==void 0&&A!=null&&m(e,["parameters","generateAudio"],A);const N=f(t,["lastFrame"]);e!==void 0&&N!=null&&m(e,["instances[0]","lastFrame"],Mn(N));const C=f(t,["referenceImages"]);if(e!==void 0&&C!=null){let M=C;Array.isArray(M)&&(M=M.map(z=>$A(z))),m(e,["instances[0]","referenceImages"],M)}const k=f(t,["mask"]);e!==void 0&&k!=null&&m(e,["instances[0]","mask"],GA(k));const R=f(t,["compressionQuality"]);return e!==void 0&&R!=null&&m(e,["parameters","compressionQuality"],R),r}function BC(t,e){const i={},r=f(t,["name"]);r!=null&&m(i,["name"],r);const a=f(t,["metadata"]);a!=null&&m(i,["metadata"],a);const l=f(t,["done"]);l!=null&&m(i,["done"],l);const u=f(t,["error"]);u!=null&&m(i,["error"],u);const h=f(t,["response","generateVideoResponse"]);return h!=null&&m(i,["response"],KC(h)),i}function $C(t,e){const i={},r=f(t,["name"]);r!=null&&m(i,["name"],r);const a=f(t,["metadata"]);a!=null&&m(i,["metadata"],a);const l=f(t,["done"]);l!=null&&m(i,["done"],l);const u=f(t,["error"]);u!=null&&m(i,["error"],u);const h=f(t,["response"]);return h!=null&&m(i,["response"],YC(h)),i}function FC(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["prompt"]);l!=null&&m(r,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&m(r,["instances[0]","image"],sc(u));const h=f(e,["video"]);h!=null&&m(r,["instances[0]","video"],Vy(h));const g=f(e,["source"]);g!=null&&XC(g,r);const p=f(e,["config"]);return p!=null&&HC(p,r),r}function JC(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["prompt"]);l!=null&&m(r,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&m(r,["instances[0]","image"],Mn(u));const h=f(e,["video"]);h!=null&&m(r,["instances[0]","video"],Hy(h));const g=f(e,["source"]);g!=null&&QC(g,r);const p=f(e,["config"]);return p!=null&&GC(p,r),r}function KC(t,e){const i={},r=f(t,["generatedSamples"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>eA(h))),m(i,["generatedVideos"],u)}const a=f(t,["raiMediaFilteredCount"]);a!=null&&m(i,["raiMediaFilteredCount"],a);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&m(i,["raiMediaFilteredReasons"],l),i}function YC(t,e){const i={},r=f(t,["videos"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>tA(h))),m(i,["generatedVideos"],u)}const a=f(t,["raiMediaFilteredCount"]);a!=null&&m(i,["raiMediaFilteredCount"],a);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&m(i,["raiMediaFilteredReasons"],l),i}function XC(t,e,i){const r={},a=f(t,["prompt"]);e!==void 0&&a!=null&&m(e,["instances[0]","prompt"],a);const l=f(t,["image"]);e!==void 0&&l!=null&&m(e,["instances[0]","image"],sc(l));const u=f(t,["video"]);return e!==void 0&&u!=null&&m(e,["instances[0]","video"],Vy(u)),r}function QC(t,e,i){const r={},a=f(t,["prompt"]);e!==void 0&&a!=null&&m(e,["instances[0]","prompt"],a);const l=f(t,["image"]);e!==void 0&&l!=null&&m(e,["instances[0]","image"],Mn(l));const u=f(t,["video"]);return e!==void 0&&u!=null&&m(e,["instances[0]","video"],Hy(u)),r}function WC(t,e){const i={},r=f(t,["_self"]);r!=null&&m(i,["image"],cA(r));const a=f(t,["raiFilteredReason"]);a!=null&&m(i,["raiFilteredReason"],a);const l=f(t,["_self"]);return l!=null&&m(i,["safetyAttributes"],Py(l)),i}function ic(t,e){const i={},r=f(t,["_self"]);r!=null&&m(i,["image"],Ly(r));const a=f(t,["raiFilteredReason"]);a!=null&&m(i,["raiFilteredReason"],a);const l=f(t,["_self"]);l!=null&&m(i,["safetyAttributes"],zy(l));const u=f(t,["prompt"]);return u!=null&&m(i,["enhancedPrompt"],u),i}function ZC(t,e){const i={},r=f(t,["_self"]);r!=null&&m(i,["mask"],Ly(r));const a=f(t,["labels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),m(i,["labels"],l)}return i}function eA(t,e){const i={},r=f(t,["video"]);return r!=null&&m(i,["video"],VA(r)),i}function tA(t,e){const i={},r=f(t,["_self"]);return r!=null&&m(i,["video"],HA(r)),i}function nA(t,e){const i={},r=f(t,["modelSelectionConfig"]);r!=null&&m(i,["modelConfig"],r);const a=f(t,["responseJsonSchema"]);a!=null&&m(i,["responseJsonSchema"],a);const l=f(t,["audioTimestamp"]);l!=null&&m(i,["audioTimestamp"],l);const u=f(t,["candidateCount"]);u!=null&&m(i,["candidateCount"],u);const h=f(t,["enableAffectiveDialog"]);h!=null&&m(i,["enableAffectiveDialog"],h);const g=f(t,["frequencyPenalty"]);g!=null&&m(i,["frequencyPenalty"],g);const p=f(t,["logprobs"]);p!=null&&m(i,["logprobs"],p);const y=f(t,["maxOutputTokens"]);y!=null&&m(i,["maxOutputTokens"],y);const w=f(t,["mediaResolution"]);w!=null&&m(i,["mediaResolution"],w);const b=f(t,["presencePenalty"]);b!=null&&m(i,["presencePenalty"],b);const S=f(t,["responseLogprobs"]);S!=null&&m(i,["responseLogprobs"],S);const E=f(t,["responseMimeType"]);E!=null&&m(i,["responseMimeType"],E);const A=f(t,["responseModalities"]);A!=null&&m(i,["responseModalities"],A);const N=f(t,["responseSchema"]);N!=null&&m(i,["responseSchema"],N);const C=f(t,["routingConfig"]);C!=null&&m(i,["routingConfig"],C);const k=f(t,["seed"]);k!=null&&m(i,["seed"],k);const R=f(t,["speechConfig"]);R!=null&&m(i,["speechConfig"],R);const M=f(t,["stopSequences"]);M!=null&&m(i,["stopSequences"],M);const z=f(t,["temperature"]);z!=null&&m(i,["temperature"],z);const O=f(t,["thinkingConfig"]);O!=null&&m(i,["thinkingConfig"],O);const j=f(t,["topK"]);j!=null&&m(i,["topK"],j);const B=f(t,["topP"]);if(B!=null&&m(i,["topP"],B),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function iA(t,e,i){const r={},a=f(e,["model"]);return a!=null&&m(r,["_url","name"],ze(t,a)),r}function sA(t,e,i){const r={},a=f(e,["model"]);return a!=null&&m(r,["_url","name"],ze(t,a)),r}function rA(t,e){const i={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=f(t,["enableWidget"]);return r!=null&&m(i,["enableWidget"],r),i}function aA(t,e){const i={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=f(t,["timeRangeFilter"]);return r!=null&&m(i,["timeRangeFilter"],r),i}function oA(t,e){const i={},r=f(t,["aspectRatio"]);r!=null&&m(i,["aspectRatio"],r);const a=f(t,["imageSize"]);if(a!=null&&m(i,["imageSize"],a),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return i}function lA(t,e){const i={},r=f(t,["aspectRatio"]);r!=null&&m(i,["aspectRatio"],r);const a=f(t,["imageSize"]);a!=null&&m(i,["imageSize"],a);const l=f(t,["personGeneration"]);l!=null&&m(i,["personGeneration"],l);const u=f(t,["outputMimeType"]);u!=null&&m(i,["imageOutputOptions","mimeType"],u);const h=f(t,["outputCompressionQuality"]);return h!=null&&m(i,["imageOutputOptions","compressionQuality"],h),i}function cA(t,e){const i={},r=f(t,["bytesBase64Encoded"]);r!=null&&m(i,["imageBytes"],Bi(r));const a=f(t,["mimeType"]);return a!=null&&m(i,["mimeType"],a),i}function Ly(t,e){const i={},r=f(t,["gcsUri"]);r!=null&&m(i,["gcsUri"],r);const a=f(t,["bytesBase64Encoded"]);a!=null&&m(i,["imageBytes"],Bi(a));const l=f(t,["mimeType"]);return l!=null&&m(i,["mimeType"],l),i}function sc(t,e){const i={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=f(t,["imageBytes"]);r!=null&&m(i,["bytesBase64Encoded"],Bi(r));const a=f(t,["mimeType"]);return a!=null&&m(i,["mimeType"],a),i}function Mn(t,e){const i={},r=f(t,["gcsUri"]);r!=null&&m(i,["gcsUri"],r);const a=f(t,["imageBytes"]);a!=null&&m(i,["bytesBase64Encoded"],Bi(a));const l=f(t,["mimeType"]);return l!=null&&m(i,["mimeType"],l),i}function uA(t,e,i,r){const a={},l=f(e,["pageSize"]);i!==void 0&&l!=null&&m(i,["_query","pageSize"],l);const u=f(e,["pageToken"]);i!==void 0&&u!=null&&m(i,["_query","pageToken"],u);const h=f(e,["filter"]);i!==void 0&&h!=null&&m(i,["_query","filter"],h);const g=f(e,["queryBase"]);return i!==void 0&&g!=null&&m(i,["_url","models_url"],Ry(t,g)),a}function dA(t,e,i,r){const a={},l=f(e,["pageSize"]);i!==void 0&&l!=null&&m(i,["_query","pageSize"],l);const u=f(e,["pageToken"]);i!==void 0&&u!=null&&m(i,["_query","pageToken"],u);const h=f(e,["filter"]);i!==void 0&&h!=null&&m(i,["_query","filter"],h);const g=f(e,["queryBase"]);return i!==void 0&&g!=null&&m(i,["_url","models_url"],Ry(t,g)),a}function fA(t,e,i){const r={},a=f(e,["config"]);return a!=null&&uA(t,a,r),r}function hA(t,e,i){const r={},a=f(e,["config"]);return a!=null&&dA(t,a,r),r}function pA(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["nextPageToken"]);a!=null&&m(i,["nextPageToken"],a);const l=f(t,["_self"]);if(l!=null){let u=Iy(l);Array.isArray(u)&&(u=u.map(h=>Wd(h))),m(i,["models"],u)}return i}function mA(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["nextPageToken"]);a!=null&&m(i,["nextPageToken"],a);const l=f(t,["_self"]);if(l!=null){let u=Iy(l);Array.isArray(u)&&(u=u.map(h=>Zd(h))),m(i,["models"],u)}return i}function gA(t,e){const i={},r=f(t,["maskMode"]);r!=null&&m(i,["maskMode"],r);const a=f(t,["segmentationClasses"]);a!=null&&m(i,["maskClasses"],a);const l=f(t,["maskDilation"]);return l!=null&&m(i,["dilation"],l),i}function Wd(t,e){const i={},r=f(t,["name"]);r!=null&&m(i,["name"],r);const a=f(t,["displayName"]);a!=null&&m(i,["displayName"],a);const l=f(t,["description"]);l!=null&&m(i,["description"],l);const u=f(t,["version"]);u!=null&&m(i,["version"],u);const h=f(t,["_self"]);h!=null&&m(i,["tunedModelInfo"],MA(h));const g=f(t,["inputTokenLimit"]);g!=null&&m(i,["inputTokenLimit"],g);const p=f(t,["outputTokenLimit"]);p!=null&&m(i,["outputTokenLimit"],p);const y=f(t,["supportedGenerationMethods"]);y!=null&&m(i,["supportedActions"],y);const w=f(t,["temperature"]);w!=null&&m(i,["temperature"],w);const b=f(t,["maxTemperature"]);b!=null&&m(i,["maxTemperature"],b);const S=f(t,["topP"]);S!=null&&m(i,["topP"],S);const E=f(t,["topK"]);E!=null&&m(i,["topK"],E);const A=f(t,["thinking"]);return A!=null&&m(i,["thinking"],A),i}function Zd(t,e){const i={},r=f(t,["name"]);r!=null&&m(i,["name"],r);const a=f(t,["displayName"]);a!=null&&m(i,["displayName"],a);const l=f(t,["description"]);l!=null&&m(i,["description"],l);const u=f(t,["versionId"]);u!=null&&m(i,["version"],u);const h=f(t,["deployedModels"]);if(h!=null){let b=h;Array.isArray(b)&&(b=b.map(S=>kC(S))),m(i,["endpoints"],b)}const g=f(t,["labels"]);g!=null&&m(i,["labels"],g);const p=f(t,["_self"]);p!=null&&m(i,["tunedModelInfo"],DA(p));const y=f(t,["defaultCheckpointId"]);y!=null&&m(i,["defaultCheckpointId"],y);const w=f(t,["checkpoints"]);if(w!=null){let b=w;Array.isArray(b)&&(b=b.map(S=>S)),m(i,["checkpoints"],b)}return i}function vA(t,e){const i={},r=f(t,["mediaResolution"]);r!=null&&m(i,["mediaResolution"],r);const a=f(t,["codeExecutionResult"]);a!=null&&m(i,["codeExecutionResult"],a);const l=f(t,["executableCode"]);l!=null&&m(i,["executableCode"],l);const u=f(t,["fileData"]);u!=null&&m(i,["fileData"],RC(u));const h=f(t,["functionCall"]);h!=null&&m(i,["functionCall"],IC(h));const g=f(t,["functionResponse"]);g!=null&&m(i,["functionResponse"],g);const p=f(t,["inlineData"]);p!=null&&m(i,["inlineData"],nC(p));const y=f(t,["text"]);y!=null&&m(i,["text"],y);const w=f(t,["thought"]);w!=null&&m(i,["thought"],w);const b=f(t,["thoughtSignature"]);b!=null&&m(i,["thoughtSignature"],b);const S=f(t,["videoMetadata"]);return S!=null&&m(i,["videoMetadata"],S),i}function yA(t,e){const i={},r=f(t,["productImage"]);return r!=null&&m(i,["image"],Mn(r)),i}function xA(t,e,i){const r={},a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const l=f(t,["baseSteps"]);e!==void 0&&l!=null&&m(e,["parameters","baseSteps"],l);const u=f(t,["outputGcsUri"]);e!==void 0&&u!=null&&m(e,["parameters","storageUri"],u);const h=f(t,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const g=f(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&m(e,["parameters","safetySetting"],g);const p=f(t,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const y=f(t,["addWatermark"]);e!==void 0&&y!=null&&m(e,["parameters","addWatermark"],y);const w=f(t,["outputMimeType"]);e!==void 0&&w!=null&&m(e,["parameters","outputOptions","mimeType"],w);const b=f(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","compressionQuality"],b);const S=f(t,["enhancePrompt"]);e!==void 0&&S!=null&&m(e,["parameters","enhancePrompt"],S);const E=f(t,["labels"]);return e!==void 0&&E!=null&&m(e,["labels"],E),r}function bA(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["source"]);l!=null&&_A(l,r);const u=f(e,["config"]);return u!=null&&xA(u,r),r}function wA(t,e){const i={},r=f(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>ic(l))),m(i,["generatedImages"],a)}return i}function _A(t,e,i){const r={},a=f(t,["prompt"]);e!==void 0&&a!=null&&m(e,["instances[0]","prompt"],a);const l=f(t,["personImage"]);e!==void 0&&l!=null&&m(e,["instances[0]","personImage","image"],Mn(l));const u=f(t,["productImages"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(g=>yA(g))),m(e,["instances[0]","productImages"],h)}return r}function SA(t,e){const i={},r=f(t,["referenceImage"]);r!=null&&m(i,["referenceImage"],Mn(r));const a=f(t,["referenceId"]);a!=null&&m(i,["referenceId"],a);const l=f(t,["referenceType"]);l!=null&&m(i,["referenceType"],l);const u=f(t,["maskImageConfig"]);u!=null&&m(i,["maskImageConfig"],gA(u));const h=f(t,["controlImageConfig"]);h!=null&&m(i,["controlImageConfig"],cC(h));const g=f(t,["styleImageConfig"]);g!=null&&m(i,["styleImageConfig"],g);const p=f(t,["subjectImageConfig"]);return p!=null&&m(i,["subjectImageConfig"],p),i}function Py(t,e){const i={},r=f(t,["safetyAttributes","categories"]);r!=null&&m(i,["categories"],r);const a=f(t,["safetyAttributes","scores"]);a!=null&&m(i,["scores"],a);const l=f(t,["contentType"]);return l!=null&&m(i,["contentType"],l),i}function zy(t,e){const i={},r=f(t,["safetyAttributes","categories"]);r!=null&&m(i,["categories"],r);const a=f(t,["safetyAttributes","scores"]);a!=null&&m(i,["scores"],a);const l=f(t,["contentType"]);return l!=null&&m(i,["contentType"],l),i}function EA(t,e){const i={},r=f(t,["category"]);if(r!=null&&m(i,["category"],r),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=f(t,["threshold"]);return a!=null&&m(i,["threshold"],a),i}function TA(t,e){const i={},r=f(t,["image"]);return r!=null&&m(i,["image"],Mn(r)),i}function NA(t,e,i){const r={},a=f(t,["mode"]);e!==void 0&&a!=null&&m(e,["parameters","mode"],a);const l=f(t,["maxPredictions"]);e!==void 0&&l!=null&&m(e,["parameters","maxPredictions"],l);const u=f(t,["confidenceThreshold"]);e!==void 0&&u!=null&&m(e,["parameters","confidenceThreshold"],u);const h=f(t,["maskDilation"]);e!==void 0&&h!=null&&m(e,["parameters","maskDilation"],h);const g=f(t,["binaryColorThreshold"]);e!==void 0&&g!=null&&m(e,["parameters","binaryColorThreshold"],g);const p=f(t,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),r}function CA(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["source"]);l!=null&&kA(l,r);const u=f(e,["config"]);return u!=null&&NA(u,r),r}function AA(t,e){const i={},r=f(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>ZC(l))),m(i,["generatedMasks"],a)}return i}function kA(t,e,i){const r={},a=f(t,["prompt"]);e!==void 0&&a!=null&&m(e,["instances[0]","prompt"],a);const l=f(t,["image"]);e!==void 0&&l!=null&&m(e,["instances[0]","image"],Mn(l));const u=f(t,["scribbleImage"]);return e!==void 0&&u!=null&&m(e,["instances[0]","scribble"],TA(u)),r}function RA(t,e){const i={},r=f(t,["retrievalConfig"]);r!=null&&m(i,["retrievalConfig"],r);const a=f(t,["functionCallingConfig"]);return a!=null&&m(i,["functionCallingConfig"],MC(a)),i}function IA(t,e){const i={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=f(t,["computerUse"]);r!=null&&m(i,["computerUse"],r);const a=f(t,["fileSearch"]);a!=null&&m(i,["fileSearch"],a);const l=f(t,["codeExecution"]);if(l!=null&&m(i,["codeExecution"],l),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(t,["functionDeclarations"]);if(u!=null){let w=u;Array.isArray(w)&&(w=w.map(b=>b)),m(i,["functionDeclarations"],w)}const h=f(t,["googleMaps"]);h!=null&&m(i,["googleMaps"],rA(h));const g=f(t,["googleSearch"]);g!=null&&m(i,["googleSearch"],aA(g));const p=f(t,["googleSearchRetrieval"]);p!=null&&m(i,["googleSearchRetrieval"],p);const y=f(t,["urlContext"]);return y!=null&&m(i,["urlContext"],y),i}function qy(t,e){const i={},r=f(t,["retrieval"]);r!=null&&m(i,["retrieval"],r);const a=f(t,["computerUse"]);if(a!=null&&m(i,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(t,["codeExecution"]);l!=null&&m(i,["codeExecution"],l);const u=f(t,["enterpriseWebSearch"]);u!=null&&m(i,["enterpriseWebSearch"],u);const h=f(t,["functionDeclarations"]);if(h!=null){let b=h;Array.isArray(b)&&(b=b.map(S=>DC(S))),m(i,["functionDeclarations"],b)}const g=f(t,["googleMaps"]);g!=null&&m(i,["googleMaps"],g);const p=f(t,["googleSearch"]);p!=null&&m(i,["googleSearch"],p);const y=f(t,["googleSearchRetrieval"]);y!=null&&m(i,["googleSearchRetrieval"],y);const w=f(t,["urlContext"]);return w!=null&&m(i,["urlContext"],w),i}function MA(t,e){const i={},r=f(t,["baseModel"]);r!=null&&m(i,["baseModel"],r);const a=f(t,["createTime"]);a!=null&&m(i,["createTime"],a);const l=f(t,["updateTime"]);return l!=null&&m(i,["updateTime"],l),i}function DA(t,e){const i={},r=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&m(i,["baseModel"],r);const a=f(t,["createTime"]);a!=null&&m(i,["createTime"],a);const l=f(t,["updateTime"]);return l!=null&&m(i,["updateTime"],l),i}function jA(t,e,i){const r={},a=f(t,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const l=f(t,["description"]);e!==void 0&&l!=null&&m(e,["description"],l);const u=f(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&m(e,["defaultCheckpointId"],u),r}function UA(t,e,i){const r={},a=f(t,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const l=f(t,["description"]);e!==void 0&&l!=null&&m(e,["description"],l);const u=f(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&m(e,["defaultCheckpointId"],u),r}function OA(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","name"],ze(t,a));const l=f(e,["config"]);return l!=null&&jA(l,r),r}function LA(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["config"]);return l!=null&&UA(l,r),r}function PA(t,e,i){const r={},a=f(t,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const l=f(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&m(e,["parameters","safetySetting"],l);const u=f(t,["personGeneration"]);e!==void 0&&u!=null&&m(e,["parameters","personGeneration"],u);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const g=f(t,["outputMimeType"]);e!==void 0&&g!=null&&m(e,["parameters","outputOptions","mimeType"],g);const p=f(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const y=f(t,["enhanceInputImage"]);e!==void 0&&y!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],y);const w=f(t,["imagePreservationFactor"]);e!==void 0&&w!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],w);const b=f(t,["labels"]);e!==void 0&&b!=null&&m(e,["labels"],b);const S=f(t,["numberOfImages"]);e!==void 0&&S!=null&&m(e,["parameters","sampleCount"],S);const E=f(t,["mode"]);return e!==void 0&&E!=null&&m(e,["parameters","mode"],E),r}function zA(t,e,i){const r={},a=f(e,["model"]);a!=null&&m(r,["_url","model"],ze(t,a));const l=f(e,["image"]);l!=null&&m(r,["instances[0]","image"],Mn(l));const u=f(e,["upscaleFactor"]);u!=null&&m(r,["parameters","upscaleConfig","upscaleFactor"],u);const h=f(e,["config"]);return h!=null&&PA(h,r),r}function qA(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["predictions"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>ic(u))),m(i,["generatedImages"],l)}return i}function VA(t,e){const i={},r=f(t,["uri"]);r!=null&&m(i,["uri"],r);const a=f(t,["encodedVideo"]);a!=null&&m(i,["videoBytes"],Bi(a));const l=f(t,["encoding"]);return l!=null&&m(i,["mimeType"],l),i}function HA(t,e){const i={},r=f(t,["gcsUri"]);r!=null&&m(i,["uri"],r);const a=f(t,["bytesBase64Encoded"]);a!=null&&m(i,["videoBytes"],Bi(a));const l=f(t,["mimeType"]);return l!=null&&m(i,["mimeType"],l),i}function GA(t,e){const i={},r=f(t,["image"]);r!=null&&m(i,["_self"],Mn(r));const a=f(t,["maskMode"]);return a!=null&&m(i,["maskMode"],a),i}function BA(t,e){const i={},r=f(t,["image"]);r!=null&&m(i,["image"],sc(r));const a=f(t,["referenceType"]);return a!=null&&m(i,["referenceType"],a),i}function $A(t,e){const i={},r=f(t,["image"]);r!=null&&m(i,["image"],Mn(r));const a=f(t,["referenceType"]);return a!=null&&m(i,["referenceType"],a),i}function Vy(t,e){const i={},r=f(t,["uri"]);r!=null&&m(i,["uri"],r);const a=f(t,["videoBytes"]);a!=null&&m(i,["encodedVideo"],Bi(a));const l=f(t,["mimeType"]);return l!=null&&m(i,["encoding"],l),i}function Hy(t,e){const i={},r=f(t,["uri"]);r!=null&&m(i,["gcsUri"],r);const a=f(t,["videoBytes"]);a!=null&&m(i,["bytesBase64Encoded"],Bi(a));const l=f(t,["mimeType"]);return l!=null&&m(i,["mimeType"],l),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FA(t,e){const i={},r=f(t,["displayName"]);return e!==void 0&&r!=null&&m(e,["displayName"],r),i}function JA(t){const e={},i=f(t,["config"]);return i!=null&&FA(i,e),e}function KA(t,e){const i={},r=f(t,["force"]);return e!==void 0&&r!=null&&m(e,["_query","force"],r),i}function YA(t){const e={},i=f(t,["name"]);i!=null&&m(e,["_url","name"],i);const r=f(t,["config"]);return r!=null&&KA(r,e),e}function XA(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function QA(t,e){const i={},r=f(t,["customMetadata"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["customMetadata"],l)}const a=f(t,["chunkingConfig"]);return e!==void 0&&a!=null&&m(e,["chunkingConfig"],a),i}function WA(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const a=f(t,["done"]);a!=null&&m(e,["done"],a);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const u=f(t,["response"]);return u!=null&&m(e,["response"],e2(u)),e}function ZA(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const r=f(t,["fileName"]);r!=null&&m(e,["fileName"],r);const a=f(t,["config"]);return a!=null&&QA(a,e),e}function e2(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=f(t,["parent"]);r!=null&&m(e,["parent"],r);const a=f(t,["documentName"]);return a!=null&&m(e,["documentName"],a),e}function t2(t,e){const i={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);return e!==void 0&&a!=null&&m(e,["_query","pageToken"],a),i}function n2(t){const e={},i=f(t,["config"]);return i!=null&&t2(i,e),e}function i2(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const a=f(t,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["fileSearchStores"],l)}return e}function Gy(t,e){const i={},r=f(t,["mimeType"]);e!==void 0&&r!=null&&m(e,["mimeType"],r);const a=f(t,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const l=f(t,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>g)),m(e,["customMetadata"],h)}const u=f(t,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),i}function s2(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const r=f(t,["config"]);return r!=null&&Gy(r,e),e}function r2(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a2="Content-Type",o2="X-Server-Timeout",l2="User-Agent",ef="x-goog-api-client",c2="1.41.0",u2=`google-genai-sdk/${c2}`,d2="v1beta1",f2="v1beta",h2=5,p2=[408,429,500,502,503,504];class m2{constructor(e){var i,r,a;this.clientOptions=Object.assign({},e),this.customBaseUrl=(i=e.httpOptions)===null||i===void 0?void 0:i.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const h=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!h?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:d2}else{if(!this.clientOptions.apiKey)throw new La({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:f2,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,r){const a=[this.getRequestUrlInternal(i)];return r&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e,i){return!(i.baseUrl&&i.baseUrlResourceScope===Kd.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,i),a=this.constructUrl(e.path,i,r);if(e.queryParams)for(const[u,h]of Object.entries(e.queryParams))a.searchParams.append(u,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,i){const r=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(i))typeof l=="object"?r[a]=Object.assign(Object.assign({},r[a]),l):l!==void 0&&(r[a]=l);return r}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,i),a=this.constructUrl(e.path,i,r);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,r,a){if(i&&i.timeout||a){const l=new AbortController,u=l.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const h=setTimeout(()=>l.abort(),i.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=u}return i&&i.extraBody!==null&&g2(e,i.extraBody),e.headers=await this.getHeadersInternal(i,r),e}async unaryApiCall(e,i,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:r})).then(async a=>(await yv(a),new Yd(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,i,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:r})).then(async a=>(await yv(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return Rn(this,arguments,function*(){var r;const a=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let u="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:y}=yield be(a.read());if(p){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const w=l.decode(y,{stream:!0});try{const E=JSON.parse(w);if("error"in E){const A=JSON.parse(JSON.stringify(E.error)),N=A.status,C=A.code,k=`got status: ${N}. ${JSON.stringify(E)}`;if(C>=400&&C<600)throw new La({message:k,status:C})}}catch(E){if(E.name==="ApiError")throw E}u+=w;let b=-1,S=0;for(;;){b=-1,S=0;for(const N of g){const C=u.indexOf(N);C!==-1&&(b===-1||C<b)&&(b=C,S=N.length)}if(b===-1)break;const E=u.substring(0,b);u=u.substring(b+S);const A=E.trim();if(A.startsWith(h)){const N=A.substring(h.length).trim();try{const C=new Response(N,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield be(new Yd(C))}catch(C){throw new Error(`exception parsing stream chunk ${N}. ${C}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,i){var r;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,i);const a=this.clientOptions.httpOptions.retryOptions;return rE(async()=>{const u=await fetch(e,i);if(u.ok)return u;throw p2.includes(u.status)?new Error(`Retryable HTTP Error: ${u.statusText}`):new wy(`Non-retryable exception ${u.statusText} sending request`)},{retries:((r=a.attempts)!==null&&r!==void 0?r:h2)-1})}getDefaultHeaders(){const e={},i=u2+" "+this.clientOptions.userAgentExtra;return e[l2]=i,e[ef]=i,e[a2]="application/json",e}async getHeadersInternal(e,i){const r=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))r.append(a,l);e.timeout&&e.timeout>0&&r.append(o2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,i),r}getFileName(e){var i;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(i=r.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),r}async uploadFile(e,i){var r;const a={};i!=null&&(a.mimeType=i.mimeType,a.name=i.name,a.displayName=i.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);a.sizeBytes=String(u.size);const h=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const g={file:a},p=this.getFileName(e),y=re("upload/v1beta/files",g._url),w=await this.fetchUploadUrl(y,a.sizeBytes,a.mimeType,p,g,i==null?void 0:i.httpOptions);return l.upload(e,w,this)}async uploadFileToFileSearchStore(e,i,r){var a;const l=this.clientOptions.uploader,u=await l.stat(i),h=String(u.size),g=(a=r==null?void 0:r.mimeType)!==null&&a!==void 0?a:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(i),w={};r!=null&&Gy(r,w);const b=await this.fetchUploadUrl(p,h,g,y,w,r==null?void 0:r.httpOptions);return l.uploadToFileSearchStore(i,b,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,r,a,l,u){var h;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${r}`},a?{"X-Goog-Upload-File-Name":a}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(h=p==null?void 0:p.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function yv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(r);throw i>=400&&i<600?new La({message:a,status:i}):new Error(a)}}function g2(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(l,u){const h=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const p=u[g],y=h[g];p&&typeof p=="object"&&!Array.isArray(p)&&y&&typeof y=="object"&&!Array.isArray(y)?h[g]=r(y,p):(y&&p&&typeof y!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof y}, New type: ${typeof p}. Overwriting.`),h[g]=p)}return h}const a=r(i,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const v2="mcp_used/unknown";let y2=!1;function By(t){for(const e of t)if(x2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return y2}function $y(t){var e;const i=(e=t[ef])!==null&&e!==void 0?e:"";t[ef]=(i+` ${v2}`).trimStart()}function x2(t){return t!==null&&typeof t=="object"&&t instanceof If}function b2(t){return Rn(this,arguments,function*(i,r=100){let a,l=0;for(;l<r;){const u=yield be(i.listTools({cursor:a}));for(const h of u.tools)yield yield be(h),l++;if(!u.nextCursor)break;a=u.nextCursor}})}class If{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new If(e,i)}async initialize(){var e,i,r,a;if(this.mcpTools.length>0)return;const l={},u=[];for(const y of this.mcpClients)try{for(var h=!0,g=(i=void 0,In(b2(y))),p;p=await g.next(),e=p.done,!e;h=!0){a=p.value,h=!1;const w=a;u.push(w);const b=w.name;if(l[b])throw new Error(`Duplicate function name ${b} found in MCP tools. Please ensure function names are unique.`);l[b]=y}}catch(w){i={error:w}}finally{try{!h&&!e&&(r=g.return)&&await r.call(g)}finally{if(i)throw i.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),JE(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[r.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await a.callTool({name:r.name,arguments:r.args},void 0,l);i.push({functionResponse:{name:r.name,response:u.isError?{error:u}:u}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function w2(t,e,i){const r=new zE;let a;i.data instanceof Blob?a=JSON.parse(await i.data.text()):a=JSON.parse(i.data),Object.assign(r,a),e(r)}class _2{constructor(e,i,r){this.apiClient=e,this.auth=i,this.webSocketFactory=r}async connect(e){var i,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=T2(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const y=new Promise(R=>{p=R}),w=e.callbacks,b=function(){p({})},S=this.apiClient,E={onopen:b,onmessage:R=>{w2(S,w.onmessage,R)},onerror:(i=w==null?void 0:w.onerror)!==null&&i!==void 0?i:function(R){},onclose:(r=w==null?void 0:w.onclose)!==null&&r!==void 0?r:function(R){}},A=this.webSocketFactory.create(g,E2(u),E);A.connect(),await y;const k={setup:{model:ze(this.apiClient,e.model)}};return A.send(JSON.stringify(k)),new S2(A,this.apiClient)}}class S2{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=FN(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=$N(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(xr.PLAY)}pause(){this.sendPlaybackControl(xr.PAUSE)}stop(){this.sendPlaybackControl(xr.STOP)}resetContext(){this.sendPlaybackControl(xr.RESET_CONTEXT)}close(){this.conn.close()}}function E2(t){const e={};return t.forEach((i,r)=>{e[r]=i}),e}function T2(t){const e=new Headers;for(const[i,r]of Object.entries(t))e.append(i,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function C2(t,e,i){const r=new PE;let a;i.data instanceof Blob?a=await i.data.text():i.data instanceof ArrayBuffer?a=new TextDecoder().decode(i.data):a=i.data;const l=JSON.parse(a);if(t.isVertexAI()){const u=YN(l);Object.assign(r,u)}else Object.assign(r,l);e(r)}class A2{constructor(e,i,r){this.apiClient=e,this.auth=i,this.webSocketFactory=r,this.music=new _2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,r,a,l,u,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let y;const w=this.apiClient.getHeaders();e.config&&e.config.tools&&By(e.config.tools)&&$y(w);const b=M2(w);if(this.apiClient.isVertexAI()){const q=this.apiClient.getProject(),W=this.apiClient.getLocation(),te=this.apiClient.getApiKey(),ae=!!q&&!!W||!!te;this.apiClient.getCustomBaseUrl()&&!ae?y=g:(y=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(b,y))}else{const q=this.apiClient.getApiKey();let W="BidiGenerateContent",te="key";q!=null&&q.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),W="BidiGenerateContentConstrained",te="access_token"),y=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${W}?${te}=${q}`}let S=()=>{};const E=new Promise(q=>{S=q}),A=e.callbacks,N=function(){var q;(q=A==null?void 0:A.onopen)===null||q===void 0||q.call(A),S({})},C=this.apiClient,k={onopen:N,onmessage:q=>{C2(C,A.onmessage,q)},onerror:(i=A==null?void 0:A.onerror)!==null&&i!==void 0?i:function(q){},onclose:(r=A==null?void 0:A.onclose)!==null&&r!==void 0?r:function(q){}},R=this.webSocketFactory.create(y,I2(b),k);R.connect(),await E;let M=ze(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&M.startsWith("publishers/")){const q=this.apiClient.getProject(),W=this.apiClient.getLocation();q&&W&&(M=`projects/${q}/locations/${W}/`+M)}let z={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Vl.AUDIO]}:e.config.responseModalities=[Vl.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(h=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[],j=[];for(const q of O)if(this.isCallableTool(q)){const W=q;j.push(await W.tool())}else j.push(q);j.length>0&&(e.config.tools=j);const B={model:M,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?z=BN(this.apiClient,B):z=GN(this.apiClient,B),delete z.config,R.send(JSON.stringify(z)),new R2(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const k2={turnComplete:!0};class R2{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let r=[];try{r=vn(i.turns),e.isVertexAI()||(r=r.map(a=>nc(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:r,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let r=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?r=i.functionResponses:r=[i.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const l of r){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(N2)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},k2),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:KN(e)}:i={realtimeInput:JN(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function I2(t){const e={};return t.forEach((i,r)=>{e[r]=i}),e}function M2(t){const e=new Headers;for(const[i,r]of Object.entries(t))e.append(i,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xv=10;function bv(t){var e,i,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const u of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(Sr(u)){a=!0;break}if(!a)return!0;const l=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Sr(t){return"callTool"in t&&typeof t.callTool=="function"}function D2(t){var e,i,r;return(r=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(a=>Sr(a)))!==null&&r!==void 0?r:!1}function wv(t){var e;const i=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,a)=>{if(Sr(r))return;const l=r;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(a)}),i}function _v(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j2 extends fi{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var r,a,l,u,h;const g=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!D2(i)||bv(i.config))return await this.generateContentInternal(g);const p=wv(i);if(p.length>0){const A=p.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let y,w;const b=vn(g.contents),S=(l=(a=(r=g.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:xv;let E=0;for(;E<S&&(y=await this.generateContentInternal(g),!(!y.functionCalls||y.functionCalls.length===0));){const A=y.candidates[0].content,N=[];for(const C of(h=(u=i.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[])if(Sr(C)){const R=await C.callTool(y.functionCalls);N.push(...R)}E++,w={role:"user",parts:N},g.contents=vn(g.contents),g.contents.push(A),g.contents.push(w),_v(g.config)&&(b.push(A),b.push(w))}return _v(g.config)&&(y.automaticFunctionCallingHistory=b),y},this.generateContentStream=async i=>{var r,a,l,u,h;if(this.maybeMoveToResponseJsonSchem(i),bv(i.config)){const w=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(w)}const g=wv(i);if(g.length>0){const w=g.map(b=>`tools[${b}]`).join(", ");throw new Error(`Incompatible tools found at ${w}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(a=(r=i==null?void 0:i.config)===null||r===void 0?void 0:r.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,y=(h=(u=i==null?void 0:i.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(p&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(r=>{var a;let l;const u=[];if(r!=null&&r.generatedImages)for(const g of r.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((a=g==null?void 0:g.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let h;return l?h={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:r.sdkHttpResponse}:h={generatedImages:u,sdkHttpResponse:r.sdkHttpResponse},h}),this.list=async i=>{var r;const u={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((r=u.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new _s(ui.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(u),u)},this.editImage=async i=>{const r={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(r.referenceImages=i.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async i=>{let r={numberOfImages:1,mode:"upscale"};i.config&&(r=Object.assign(Object.assign({},r),i.config));const a={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:r};return await this.upscaleImageInternal(a)},this.generateVideos=async i=>{var r,a,l,u,h,g;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=i.video)===null||r===void 0)&&r.uri&&(!((a=i.video)===null||a===void 0)&&a.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((u=(l=i.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(h=i.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,r,a;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>Sr(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(h.config.tools=u,e.config&&e.config.tools&&By(e.config.tools)){const g=(a=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&a!==void 0?a:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),$y(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var i,r,a;const l=new Map;for(const u of(r=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&r!==void 0?r:[])if(Sr(u)){const h=u,g=await h.tool();for(const p of(a=g.functionDeclarations)!==null&&a!==void 0?a:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,h)}}return l}async processAfcStream(e){var i,r,a;const l=(a=(r=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:xv;let u=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(p,y,w){return Rn(this,arguments,function*(){for(var b,S,E,A,N,C;h<l;){u&&(h++,u=!1);const z=yield be(p.processParamsMaybeAddMcpUsage(w)),O=yield be(p.generateContentStreamInternal(z)),j=[],B=[];try{for(var k=!0,R=(S=void 0,In(O)),M;M=yield be(R.next()),b=M.done,!b;k=!0){A=M.value,k=!1;const q=A;if(yield yield be(q),q.candidates&&(!((N=q.candidates[0])===null||N===void 0)&&N.content)){B.push(q.candidates[0].content);for(const W of(C=q.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(h<l&&W.functionCall){if(!W.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(W.functionCall.name)){const te=yield be(y.get(W.functionCall.name).callTool([W.functionCall]));j.push(...te)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${W.functionCall.name}`)}}}}catch(q){S={error:q}}finally{try{!k&&!b&&(E=R.return)&&(yield be(E.call(R)))}finally{if(S)throw S.error}}if(j.length>0){u=!0;const q=new Na;q.candidates=[{content:{role:"user",parts:j}}],yield yield be(q);const W=[];W.push(...B),W.push({role:"user",parts:j});const te=vn(w.contents).concat(W);w.contents=te}else break}})})(this,g,e)}async generateContentInternal(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=mv(this.apiClient,e);return h=re("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=vv(y),b=new Na;return Object.assign(b,w),b})}else{const p=pv(this.apiClient,e);return h=re("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=gv(y),b=new Na;return Object.assign(b,w),b})}}async generateContentStreamInternal(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=mv(this.apiClient,e);return h=re("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),u.then(function(w){return Rn(this,arguments,function*(){var b,S,E,A;try{for(var N=!0,C=In(w),k;k=yield be(C.next()),b=k.done,!b;N=!0){A=k.value,N=!1;const R=A,M=vv(yield be(R.json()),e);M.sdkHttpResponse={headers:R.headers};const z=new Na;Object.assign(z,M),yield yield be(z)}}catch(R){S={error:R}}finally{try{!N&&!b&&(E=C.return)&&(yield be(E.call(C)))}finally{if(S)throw S.error}}})})}else{const p=pv(this.apiClient,e);return h=re("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(w){return Rn(this,arguments,function*(){var b,S,E,A;try{for(var N=!0,C=In(w),k;k=yield be(C.next()),b=k.done,!b;N=!0){A=k.value,N=!1;const R=A,M=gv(yield be(R.json()),e);M.sdkHttpResponse={headers:R.headers};const z=new Na;Object.assign(z,M),yield yield be(z)}}catch(R){S={error:R}}finally{try{!N&&!b&&(E=C.return)&&(yield be(E.call(C)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=NC(this.apiClient,e);return h=re("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=AC(y),b=new Q0;return Object.assign(b,w),b})}else{const p=TC(this.apiClient,e);return h=re("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=CC(y),b=new Q0;return Object.assign(b,w),b})}}async generateImagesInternal(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=zC(this.apiClient,e);return h=re("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=VC(y),b=new W0;return Object.assign(b,w),b})}else{const p=PC(this.apiClient,e);return h=re("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=qC(y),b=new W0;return Object.assign(b,w),b})}}async editImageInternal(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=wC(this.apiClient,e);return l=re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:g.headers},y})),a.then(g=>{const p=_C(g),y=new NE;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=zA(this.apiClient,e);return l=re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:g.headers},y})),a.then(g=>{const p=qA(g),y=new CE;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=bA(this.apiClient,e);return l=re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=wA(g),y=new AE;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=CA(this.apiClient,e);return l=re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=AA(g),y=new kE;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=sA(this.apiClient,e);return h=re("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>Zd(y))}else{const p=iA(this.apiClient,e);return h=re("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>Wd(y))}}async listInternal(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=hA(this.apiClient,e);return h=re("{models_url}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=mA(y),b=new Z0;return Object.assign(b,w),b})}else{const p=fA(this.apiClient,e);return h=re("{models_url}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=pA(y),b=new Z0;return Object.assign(b,w),b})}}async update(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=LA(this.apiClient,e);return h=re("{model}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>Zd(y))}else{const p=OA(this.apiClient,e);return h=re("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>Wd(y))}}async delete(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=vC(this.apiClient,e);return h=re("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=xC(y),b=new ev;return Object.assign(b,w),b})}else{const p=gC(this.apiClient,e);return h=re("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=yC(y),b=new ev;return Object.assign(b,w),b})}}async countTokens(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=hC(this.apiClient,e);return h=re("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=mC(y),b=new tv;return Object.assign(b,w),b})}else{const p=fC(this.apiClient,e);return h=re("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=pC(y),b=new tv;return Object.assign(b,w),b})}}async computeTokens(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=rC(this.apiClient,e);return l=re("{model}:computeTokens",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:g.headers},y})),a.then(g=>{const p=aC(g),y=new RE;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=JC(this.apiClient,e);return h=re("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u.then(y=>{const w=$C(y),b=new Hl;return Object.assign(b,w),b})}else{const p=FC(this.apiClient,e);return h=re("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>{const w=BC(y),b=new Hl;return Object.assign(b,w),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U2 extends fi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,r=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;r&&"httpOptions"in r&&(l=r.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:r});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const i=e.operation,r=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;r&&"httpOptions"in r&&(l=r.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:r});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=bE(e);return h=re("{operationName}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),u}else{const p=xE(e);return h=re("{operationName}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u}}async fetchPredictVideosOperationInternal(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=fE(e);return l=re("{resourceName}:fetchPredictOperation",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O2(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function L2(t){const e={},i=f(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>F2(l))),m(e,["parts"],a)}const r=f(t,["role"]);return r!=null&&m(e,["role"],r),e}function P2(t,e,i){const r={},a=f(e,["expireTime"]);i!==void 0&&a!=null&&m(i,["expireTime"],a);const l=f(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&m(i,["newSessionExpireTime"],l);const u=f(e,["uses"]);i!==void 0&&u!=null&&m(i,["uses"],u);const h=f(e,["liveConnectConstraints"]);i!==void 0&&h!=null&&m(i,["bidiGenerateContentSetup"],$2(t,h));const g=f(e,["lockAdditionalFields"]);return i!==void 0&&g!=null&&m(i,["fieldMask"],g),r}function z2(t,e){const i={},r=f(e,["config"]);return r!=null&&m(i,["config"],P2(t,r,i)),i}function q2(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function V2(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const r=f(t,["args"]);r!=null&&m(e,["args"],r);const a=f(t,["name"]);if(a!=null&&m(e,["name"],a),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function H2(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function G2(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function B2(t,e){const i={},r=f(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const a=f(t,["responseModalities"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","responseModalities"],a);const l=f(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=f(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const h=f(t,["topK"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","topK"],h);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(t,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const y=f(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const w=f(t,["speechConfig"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","speechConfig"],Rf(w));const b=f(t,["thinkingConfig"]);e!==void 0&&b!=null&&m(e,["setup","generationConfig","thinkingConfig"],b);const S=f(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],S);const E=f(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],L2(Dt(E)));const A=f(t,["tools"]);if(e!==void 0&&A!=null){let O=Rr(A);Array.isArray(O)&&(O=O.map(j=>K2(kr(j)))),m(e,["setup","tools"],O)}const N=f(t,["sessionResumption"]);e!==void 0&&N!=null&&m(e,["setup","sessionResumption"],J2(N));const C=f(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&m(e,["setup","inputAudioTranscription"],C);const k=f(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&m(e,["setup","outputAudioTranscription"],k);const R=f(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&m(e,["setup","realtimeInputConfig"],R);const M=f(t,["contextWindowCompression"]);e!==void 0&&M!=null&&m(e,["setup","contextWindowCompression"],M);const z=f(t,["proactivity"]);if(e!==void 0&&z!=null&&m(e,["setup","proactivity"],z),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function $2(t,e){const i={},r=f(e,["model"]);r!=null&&m(i,["setup","model"],ze(t,r));const a=f(e,["config"]);return a!=null&&m(i,["config"],B2(a,i)),i}function F2(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const r=f(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const a=f(t,["executableCode"]);a!=null&&m(e,["executableCode"],a);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],q2(l));const u=f(t,["functionCall"]);u!=null&&m(e,["functionCall"],V2(u));const h=f(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&m(e,["inlineData"],O2(g));const p=f(t,["text"]);p!=null&&m(e,["text"],p);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const w=f(t,["thoughtSignature"]);w!=null&&m(e,["thoughtSignature"],w);const b=f(t,["videoMetadata"]);return b!=null&&m(e,["videoMetadata"],b),e}function J2(t){const e={},i=f(t,["handle"]);if(i!=null&&m(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function K2(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&m(e,["computerUse"],i);const r=f(t,["fileSearch"]);r!=null&&m(e,["fileSearch"],r);const a=f(t,["codeExecution"]);if(a!=null&&m(e,["codeExecution"],a),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(w=>w)),m(e,["functionDeclarations"],y)}const u=f(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],H2(u));const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],G2(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&m(e,["googleSearchRetrieval"],g);const p=f(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y2(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const a=Object.keys(r).map(l=>`${i}.${l}`);e.push(...a)}else e.push(i)}return e.join(",")}function X2(t,e){let i=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const l=r.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(i){const l=Y2(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(p=>u.includes(p)?`generationConfig.${p}`:p));const g=[];l&&g.push(l),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class Q2 extends fi{constructor(e){super(),this.apiClient=e}async create(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=z2(this.apiClient,e);l=re("auth_tokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query;const g=X2(h,e.config);return a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W2(t,e){const i={},r=f(t,["force"]);return e!==void 0&&r!=null&&m(e,["_query","force"],r),i}function Z2(t){const e={},i=f(t,["name"]);i!=null&&m(e,["_url","name"],i);const r=f(t,["config"]);return r!=null&&W2(r,e),e}function ek(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function tk(t,e){const i={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);return e!==void 0&&a!=null&&m(e,["_query","pageToken"],a),i}function nk(t){const e={},i=f(t,["parent"]);i!=null&&m(e,["_url","parent"],i);const r=f(t,["config"]);return r!=null&&tk(r,e),e}function ik(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const a=f(t,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sk extends fi{constructor(e){super(),this.apiClient=e,this.list=async i=>new _s(ui.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:i.parent,config:r.config}),await this.listInternal(i),i)}async get(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ek(e);return l=re("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,r;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Z2(e);a=re("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=nk(e);return l=re("{parent}/documents",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=ik(g),y=new IE;return Object.assign(y,p),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rk extends fi{constructor(e,i=new sk(e)){super(),this.apiClient=e,this.documents=i,this.list=async(r={})=>new _s(ui.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=JA(e);return l=re("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async get(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=XA(e);return l=re("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,r;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=YA(e);a=re("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=n2(e);return l=re("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=i2(g),y=new ME;return Object.assign(y,p),y})}}async uploadToFileSearchStoreInternal(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=s2(e);return l=re("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=r2(g),y=new DE;return Object.assign(y,p),y})}}async importFile(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ZA(e);return l=re("{file_search_store_name}:importFile",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=WA(g),y=new Tf;return Object.assign(y,p),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Fy=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Fy=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),i=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^i()&15>>+r/4).toString(16))};const ak=()=>Fy();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tf(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const nf=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xn extends Error{}class Pt extends xn{constructor(e,i,r,a){super(`${Pt.makeMessage(e,i,r)}`),this.status=e,this.headers=a,this.error=i}static makeMessage(e,i,r){const a=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):r;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,i,r,a){if(!e||!a)return new rc({message:r,cause:nf(i)});const l=i;return e===400?new Ky(e,l,r,a):e===401?new Yy(e,l,r,a):e===403?new Xy(e,l,r,a):e===404?new Qy(e,l,r,a):e===409?new Wy(e,l,r,a):e===422?new Zy(e,l,r,a):e===429?new ex(e,l,r,a):e>=500?new tx(e,l,r,a):new Pt(e,l,r,a)}}class sf extends Pt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class rc extends Pt{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class Jy extends rc{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Ky extends Pt{}class Yy extends Pt{}class Xy extends Pt{}class Qy extends Pt{}class Wy extends Pt{}class Zy extends Pt{}class ex extends Pt{}class tx extends Pt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ok=/^[a-z][a-z0-9+.-]*:/i,lk=t=>ok.test(t);let rf=t=>(rf=Array.isArray,rf(t));const ck=rf;let uk=ck;const Sv=uk;function dk(t){if(!t)return!0;for(const e in t)return!1;return!0}function fk(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const hk=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new xn(`${t} must be an integer`);if(e<0)throw new xn(`${t} must be a positive integer`);return e},pk=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mk=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gk(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const vk=()=>{var t,e,i,r,a;const l=gk();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pr,"X-Stainless-OS":Tv(Deno.build.os),"X-Stainless-Arch":Ev(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pr,"X-Stainless-OS":Tv((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":Ev((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const u=yk();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function yk(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of t){const r=i.exec(navigator.userAgent);if(r){const a=r[1]||0,l=r[2]||0,u=r[3]||0;return{browser:e,version:`${a}.${l}.${u}`}}}return null}const Ev=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Tv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ml;const xk=()=>ml??(ml=vk());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bk(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function nx(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function wk(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return nx({start(){},async pull(i){const{done:r,value:a}=await e.next();r?i.close():i.enqueue(a)},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}function ix(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function _k(t){var e,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(e=t[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(e));return}const r=t.getReader(),a=r.cancel();r.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sk=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sx=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Rd(t,e,i){return sx(),new File(t,e??"unknown_file",i)}function Ek(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Tk=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rx=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Nk=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&rx(t),Ck=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Ak(t,e,i){if(sx(),t=await t,Nk(t))return t instanceof File?t:Rd([await t.arrayBuffer()],t.name);if(Ck(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Rd(await af(a),e,i)}const r=await af(t);if(e||(e=Ek(t)),!(i!=null&&i.type)){const a=r.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(i=Object.assign(Object.assign({},i),{type:a}))}return Rd(r,e,i)}async function af(t){var e,i,r,a,l;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(rx(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(Tk(t))try{for(var h=!0,g=In(t),p;p=await g.next(),e=p.done,!e;h=!0){a=p.value,h=!1;const y=a;u.push(...await af(y))}}catch(y){i={error:y}}finally{try{!h&&!e&&(r=g.return)&&await r.call(g)}finally{if(i)throw i.error}}else{const y=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${y?`; constructor: ${y}`:""}${kk(t)}`)}return u}function kk(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(i=>`"${i}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ax{constructor(e){this._client=e}}ax._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ox(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Nv=Object.freeze(Object.create(null)),Rk=(t=ox)=>(function(i,...r){if(i.length===1)return i[0];let a=!1;const l=[],u=i.reduce((y,w,b)=>{var S,E,A;/[?#]/.test(w)&&(a=!0);const N=r[b];let C=(a?encodeURIComponent:t)(""+N);return b!==r.length&&(N==null||typeof N=="object"&&N.toString===((A=Object.getPrototypeOf((E=Object.getPrototypeOf((S=N.hasOwnProperty)!==null&&S!==void 0?S:Nv))!==null&&E!==void 0?E:Nv))===null||A===void 0?void 0:A.toString))&&(C=N+"",l.push({start:y.length+w.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(N).slice(8,-1)} is not a valid path parameter`})),y+w+(b===r.length?"":C)},""),h=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=g.exec(h))!==null;)l.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(l.sort((y,w)=>y.start-w.start),l.length>0){let y=0;const w=l.reduce((b,S)=>{const E=" ".repeat(S.start-y),A="^".repeat(S.length);return y=S.start+S.length,b+E+A},"");throw new xn(`Path parameters result in path with invalid segments:
${l.map(b=>b.error).join(`
`)}
${u}
${w}`)}return u}),gl=Rk(ox);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lx extends ax{create(e,i){var r;const{api_version:a=this._client.apiVersion}=e,l=Bl(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new xn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new xn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(gl`/${a}/interactions`,Object.assign(Object.assign({body:l},i),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,i={},r){const{api_version:a=this._client.apiVersion}=i??{};return this._client.delete(gl`/${a}/interactions/${e}`,r)}cancel(e,i={},r){const{api_version:a=this._client.apiVersion}=i??{};return this._client.post(gl`/${a}/interactions/${e}/cancel`,r)}get(e,i={},r){var a;const l=i??{},{api_version:u=this._client.apiVersion}=l,h=Bl(l,["api_version"]);return this._client.get(gl`/${u}/interactions/${e}`,Object.assign(Object.assign({query:h},r),{stream:(a=i==null?void 0:i.stream)!==null&&a!==void 0?a:!1}))}}lx._key=Object.freeze(["interactions"]);class cx extends lx{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ik(t){let e=0;for(const a of t)e+=a.length;const i=new Uint8Array(e);let r=0;for(const a of t)i.set(a,r),r+=a.length;return i}let vl;function Mf(t){let e;return(vl??(e=new globalThis.TextEncoder,vl=e.encode.bind(e)))(t)}let yl;function Cv(t){let e;return(yl??(e=new globalThis.TextDecoder,yl=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ac{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Mf(e):e;this.buffer=Ik([this.buffer,i]);const r=[];let a;for(;(a=Mk(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){r.push(Cv(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,u=Cv(this.buffer.subarray(0,l));r.push(u),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}ac.NEWLINE_CHARS=new Set([`
`,"\r"]);ac.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Mk(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function Dk(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $l={off:0,error:200,warn:300,info:400,debug:500},Av=(t,e,i)=>{if(t){if(fk($l,t))return t;Ot(i).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys($l))}`)}};function Ra(){}function xl(t,e,i){return!e||$l[t]>$l[i]?Ra:e[t].bind(e)}const jk={error:Ra,warn:Ra,info:Ra,debug:Ra};let kv=new WeakMap;function Ot(t){var e;const i=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!i)return jk;const a=kv.get(i);if(a&&a[0]===r)return a[1];const l={error:xl("error",i,r),warn:xl("warn",i,r),info:xl("info",i,r),debug:xl("debug",i,r)};return kv.set(i,[r,l]),l}const ps=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,i])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class br{constructor(e,i,r){this.iterator=e,this.controller=i,this.client=r}static fromSSEResponse(e,i,r){let a=!1;const l=r?Ot(r):console;function u(){return Rn(this,arguments,function*(){var g,p,y,w;if(a)throw new xn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let b=!1;try{try{for(var S=!0,E=In(Uk(e,i)),A;A=yield be(E.next()),g=A.done,!g;S=!0){w=A.value,S=!1;const N=w;if(!b)if(N.data.startsWith("[DONE]")){b=!0;continue}else try{yield yield be(JSON.parse(N.data))}catch(C){throw l.error("Could not parse message into JSON:",N.data),l.error("From chunk:",N.raw),C}}}catch(N){p={error:N}}finally{try{!S&&!g&&(y=E.return)&&(yield be(y.call(E)))}finally{if(p)throw p.error}}b=!0}catch(N){if(tf(N))return yield be(void 0);throw N}finally{b||i.abort()}})}return new br(u,i,r)}static fromReadableStream(e,i,r){let a=!1;function l(){return Rn(this,arguments,function*(){var g,p,y,w;const b=new ac,S=ix(e);try{for(var E=!0,A=In(S),N;N=yield be(A.next()),g=N.done,!g;E=!0){w=N.value,E=!1;const C=w;for(const k of b.decode(C))yield yield be(k)}}catch(C){p={error:C}}finally{try{!E&&!g&&(y=A.return)&&(yield be(y.call(A)))}finally{if(p)throw p.error}}for(const C of b.flush())yield yield be(C)})}function u(){return Rn(this,arguments,function*(){var g,p,y,w;if(a)throw new xn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let b=!1;try{try{for(var S=!0,E=In(l()),A;A=yield be(E.next()),g=A.done,!g;S=!0){w=A.value,S=!1;const N=w;b||N&&(yield yield be(JSON.parse(N)))}}catch(N){p={error:N}}finally{try{!S&&!g&&(y=E.return)&&(yield be(y.call(E)))}finally{if(p)throw p.error}}b=!0}catch(N){if(tf(N))return yield be(void 0);throw N}finally{b||i.abort()}})}return new br(u,i,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],r=this.iterator(),a=l=>({next:()=>{if(l.length===0){const u=r.next();e.push(u),i.push(u)}return l.shift()}});return[new br(()=>a(e),this.controller,this.client),new br(()=>a(i),this.controller,this.client)]}toReadableStream(){const e=this;let i;return nx({async start(){i=e[Symbol.asyncIterator]()},async pull(r){try{const{value:a,done:l}=await i.next();if(l)return r.close();const u=Mf(JSON.stringify(a)+`
`);r.enqueue(u)}catch(a){r.error(a)}},async cancel(){var r;await((r=i.return)===null||r===void 0?void 0:r.call(i))}})}}function Uk(t,e){return Rn(this,arguments,function*(){var r,a,l,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new xn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new xn("Attempted to iterate over a response with no body");const h=new Lk,g=new ac,p=ix(t.body);try{for(var y=!0,w=In(Ok(p)),b;b=yield be(w.next()),r=b.done,!r;y=!0){u=b.value,y=!1;const S=u;for(const E of g.decode(S)){const A=h.decode(E);A&&(yield yield be(A))}}}catch(S){a={error:S}}finally{try{!y&&!r&&(l=w.return)&&(yield be(l.call(w)))}finally{if(a)throw a.error}}for(const S of g.flush()){const E=h.decode(S);E&&(yield yield be(E))}})}function Ok(t){return Rn(this,arguments,function*(){var i,r,a,l;let u=new Uint8Array;try{for(var h=!0,g=In(t),p;p=yield be(g.next()),i=p.done,!i;h=!0){l=p.value,h=!1;const y=l;if(y==null)continue;const w=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?Mf(y):y;let b=new Uint8Array(u.length+w.length);b.set(u),b.set(w,u.length),u=b;let S;for(;(S=Dk(u))!==-1;)yield yield be(u.slice(0,S)),u=u.slice(S)}}catch(y){r={error:y}}finally{try{!h&&!i&&(a=g.return)&&(yield be(a.call(g)))}finally{if(r)throw r.error}}u.length>0&&(yield yield be(u))})}class Lk{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,r,a]=Pk(e,":");return a.startsWith(" ")&&(a=a.substring(1)),i==="event"?this.event=a:i==="data"&&this.data.push(a),null}}function Pk(t,e){const i=t.indexOf(e);return i!==-1?[t.substring(0,i),e,t.substring(i+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function zk(t,e){const{response:i,requestLogID:r,retryOfRequestLogID:a,startTime:l}=e,u=await(async()=>{var h;if(e.options.stream)return Ot(t).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,t):br.fromSSEResponse(i,e.controller,t);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const g=i.headers.get("content-type"),p=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?i.headers.get("content-length")==="0"?void 0:await i.json():await i.text()})();return Ot(t).debug(`[${r}] response parsed`,ps({retryOfRequestLogID:a,url:i.url,status:i.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Df extends Promise{constructor(e,i,r=zk){super(a=>{a(null)}),this.responsePromise=i,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new Df(this.client,this.responsePromise,async(i,r)=>e(await this.parseResponse(i,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ux=Symbol("brand.privateNullableHeaders");function*qk(t){if(!t)return;if(ux in t){const{values:r,nulls:a}=t;yield*r.entries();for(const l of a)yield[l,null];return}let e=!1,i;t instanceof Headers?i=t.entries():Sv(t)?i=t:(e=!0,i=Object.entries(t??{}));for(let r of i){const a=r[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=Sv(r[1])?r[1]:[r[1]];let u=!1;for(const h of l)h!==void 0&&(e&&!u&&(u=!0,yield[a,null]),yield[a,h])}}const Ca=t=>{const e=new Headers,i=new Set;for(const r of t){const a=new Set;for(const[l,u]of qk(r)){const h=l.toLowerCase();a.has(h)||(e.delete(l),a.add(h)),u===null?(e.delete(l),i.add(h)):(e.append(l,u),i.delete(h))}}return{[ux]:!0,values:e,nulls:i}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Id=t=>{var e,i,r,a,l,u;if(typeof globalThis.process<"u")return(r=(i=(e=aE)===null||e===void 0?void 0:e[t])===null||i===void 0?void 0:i.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||l===void 0?void 0:l.call(a,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dx;class oc{constructor(e){var i,r,a,l,u,h,g,{baseURL:p=Id("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(i=Id("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:w="v1beta"}=e,b=Bl(e,["baseURL","apiKey","apiVersion"]);const S=Object.assign(Object.assign({apiKey:y,apiVersion:w},b),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=S.baseURL,this.timeout=(r=S.timeout)!==null&&r!==void 0?r:oc.DEFAULT_TIMEOUT,this.logger=(a=S.logger)!==null&&a!==void 0?a:console;const E="warn";this.logLevel=E,this.logLevel=(u=(l=Av(S.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:Av(Id("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:E,this.fetchOptions=S.fetchOptions,this.maxRetries=(h=S.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=S.fetch)!==null&&g!==void 0?g:bk(),this.encoder=Sk,this._options=S,this.apiKey=y,this.apiVersion=w,this.clientAdapter=S.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const i=Ca([e.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return Ca([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ca([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([i,r])=>typeof r<"u").map(([i,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(i)}=`;throw new xn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${pr}`}defaultIdempotencyKey(){return`stainless-node-retry-${ak()}`}makeStatusError(e,i,r,a){return Pt.generate(e,i,r,a)}buildURL(e,i,r){const a=!this.baseURLOverridden()&&r||this.baseURL,l=lk(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return dk(u)||(i=Object.assign(Object.assign({},u),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(l.search=this.stringifyQuery(i)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const i=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(e,{url:i,options:r}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,r){return this.request(Promise.resolve(r).then(a=>Object.assign({method:e,path:i},a)))}request(e,i=null){return new Df(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,r){var a,l,u;const h=await e,g=(a=h.maxRetries)!==null&&a!==void 0?a:this.maxRetries;i==null&&(i=g),await this.prepareOptions(h);const{req:p,url:y,timeout:w}=await this.buildRequest(h,{retryCount:g-i});await this.prepareRequest(p,{url:y,options:h});const b="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),S=r===void 0?"":`, retryOf: ${r}`,E=Date.now();if(Ot(this).debug(`[${b}] sending request`,ps({retryOfRequestLogID:r,method:h.method,url:y,options:h,headers:p.headers})),!((l=h.signal)===null||l===void 0)&&l.aborted)throw new sf;const A=new AbortController,N=await this.fetchWithTimeout(y,p,w,A).catch(nf),C=Date.now();if(N instanceof globalThis.Error){const R=`retrying, ${i} attempts remaining`;if(!((u=h.signal)===null||u===void 0)&&u.aborted)throw new sf;const M=tf(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(i)return Ot(this).info(`[${b}] connection ${M?"timed out":"failed"} - ${R}`),Ot(this).debug(`[${b}] connection ${M?"timed out":"failed"} (${R})`,ps({retryOfRequestLogID:r,url:y,durationMs:C-E,message:N.message})),this.retryRequest(h,i,r??b);throw Ot(this).info(`[${b}] connection ${M?"timed out":"failed"} - error; no more retries left`),Ot(this).debug(`[${b}] connection ${M?"timed out":"failed"} (error; no more retries left)`,ps({retryOfRequestLogID:r,url:y,durationMs:C-E,message:N.message})),M?new Jy:new rc({cause:N})}const k=`[${b}${S}] ${p.method} ${y} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${C-E}ms`;if(!N.ok){const R=await this.shouldRetry(N);if(i&&R){const q=`retrying, ${i} attempts remaining`;return await _k(N.body),Ot(this).info(`${k} - ${q}`),Ot(this).debug(`[${b}] response error (${q})`,ps({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,durationMs:C-E})),this.retryRequest(h,i,r??b,N.headers)}const M=R?"error; no more retries left":"error; not retryable";Ot(this).info(`${k} - ${M}`);const z=await N.text().catch(q=>nf(q).message),O=pk(z),j=O?void 0:z;throw Ot(this).debug(`[${b}] response error (${M})`,ps({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,message:j,durationMs:Date.now()-E})),this.makeStatusError(N.status,O,j,N.headers)}return Ot(this).info(k),Ot(this).debug(`[${b}] response start`,ps({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,durationMs:C-E})),{response:N,options:h,controller:A,requestLogID:b,retryOfRequestLogID:r,startTime:E}}async fetchWithTimeout(e,i,r,a){const l=i||{},{signal:u,method:h}=l,g=Bl(l,["signal","method"]),p=this._makeAbort(a);u&&u.addEventListener("abort",p,{once:!0});const y=setTimeout(p,r),w=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,b=Object.assign(Object.assign(Object.assign({signal:a.signal},w?{duplex:"half"}:{}),{method:"GET"}),g);h&&(b.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,b)}finally{clearTimeout(y)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,r,a){var l;let u;const h=a==null?void 0:a.get("retry-after-ms");if(h){const p=parseFloat(h);Number.isNaN(p)||(u=p)}const g=a==null?void 0:a.get("retry-after");if(g&&!u){const p=parseFloat(g);Number.isNaN(p)?u=Date.parse(g)-Date.now():u=p*1e3}if(!(u&&0<=u&&u<60*1e3)){const p=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(i,p)}return await mk(u),this.makeRequest(e,i-1,r)}calculateDefaultRetryTimeoutMillis(e,i){const l=i-e,u=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return u*h*1e3}async buildRequest(e,{retryCount:i=0}={}){var r,a,l;const u=Object.assign({},e),{method:h,path:g,query:p,defaultBaseURL:y}=u,w=this.buildURL(g,p,y);"timeout"in u&&hk("timeout",u.timeout),u.timeout=(r=u.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:b,body:S}=this.buildBody({options:u}),E=await this.buildHeaders({options:e,method:h,bodyHeaders:b,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:E},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&S instanceof globalThis.ReadableStream&&{duplex:"half"}),S&&{body:S}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:w,timeout:u.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:r,retryCount:a}){let l={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let h=Ca([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),xk()),this._options.defaultHeaders,r,e.headers,u]);return this.validateHeaders(h),h.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ca([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:wk(e)}:this.encoder({body:e,headers:r})}}oc.DEFAULT_TIMEOUT=6e4;class _t extends oc{constructor(){super(...arguments),this.interactions=new cx(this)}}dx=_t;_t.GeminiNextGenAPIClient=dx;_t.GeminiNextGenAPIClientError=xn;_t.APIError=Pt;_t.APIConnectionError=rc;_t.APIConnectionTimeoutError=Jy;_t.APIUserAbortError=sf;_t.NotFoundError=Qy;_t.ConflictError=Wy;_t.RateLimitError=ex;_t.BadRequestError=Ky;_t.AuthenticationError=Yy;_t.InternalServerError=tx;_t.PermissionDeniedError=Xy;_t.UnprocessableEntityError=Zy;_t.toFile=Ak;_t.Interactions=cx;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vk(t,e){const i={},r=f(t,["name"]);return r!=null&&m(i,["_url","name"],r),i}function Hk(t,e){const i={},r=f(t,["name"]);return r!=null&&m(i,["_url","name"],r),i}function Gk(t,e){const i={},r=f(t,["sdkHttpResponse"]);return r!=null&&m(i,["sdkHttpResponse"],r),i}function Bk(t,e){const i={},r=f(t,["sdkHttpResponse"]);return r!=null&&m(i,["sdkHttpResponse"],r),i}function $k(t,e,i){const r={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=f(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&m(e,["displayName"],a),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(t,["epochCount"]);e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(t,["learningRateMultiplier"]);if(u!=null&&m(r,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const h=f(t,["batchSize"]);e!==void 0&&h!=null&&m(e,["tuningTask","hyperparameters","batchSize"],h);const g=f(t,["learningRate"]);if(e!==void 0&&g!=null&&m(e,["tuningTask","hyperparameters","learningRate"],g),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(f(t,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return r}function Fk(t,e,i){const r={};let a=f(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const O=f(t,["validationDataset"]);e!==void 0&&O!=null&&m(e,["supervisedTuningSpec"],Md(O))}else if(a==="PREFERENCE_TUNING"){const O=f(t,["validationDataset"]);e!==void 0&&O!=null&&m(e,["preferenceOptimizationSpec"],Md(O))}else if(a==="DISTILLATION"){const O=f(t,["validationDataset"]);e!==void 0&&O!=null&&m(e,["distillationSpec"],Md(O))}const l=f(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&m(e,["tunedModelDisplayName"],l);const u=f(t,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let h=f(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const O=f(t,["epochCount"]);e!==void 0&&O!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],O)}else if(h==="PREFERENCE_TUNING"){const O=f(t,["epochCount"]);e!==void 0&&O!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],O)}else if(h==="DISTILLATION"){const O=f(t,["epochCount"]);e!==void 0&&O!=null&&m(e,["distillationSpec","hyperParameters","epochCount"],O)}let g=f(i,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const O=f(t,["learningRateMultiplier"]);e!==void 0&&O!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],O)}else if(g==="PREFERENCE_TUNING"){const O=f(t,["learningRateMultiplier"]);e!==void 0&&O!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],O)}else if(g==="DISTILLATION"){const O=f(t,["learningRateMultiplier"]);e!==void 0&&O!=null&&m(e,["distillationSpec","hyperParameters","learningRateMultiplier"],O)}let p=f(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const O=f(t,["exportLastCheckpointOnly"]);e!==void 0&&O!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],O)}else if(p==="PREFERENCE_TUNING"){const O=f(t,["exportLastCheckpointOnly"]);e!==void 0&&O!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],O)}else if(p==="DISTILLATION"){const O=f(t,["exportLastCheckpointOnly"]);e!==void 0&&O!=null&&m(e,["distillationSpec","exportLastCheckpointOnly"],O)}let y=f(i,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const O=f(t,["adapterSize"]);e!==void 0&&O!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],O)}else if(y==="PREFERENCE_TUNING"){const O=f(t,["adapterSize"]);e!==void 0&&O!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],O)}else if(y==="DISTILLATION"){const O=f(t,["adapterSize"]);e!==void 0&&O!=null&&m(e,["distillationSpec","hyperParameters","adapterSize"],O)}let w=f(i,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const O=f(t,["tuningMode"]);e!==void 0&&O!=null&&m(e,["supervisedTuningSpec","tuningMode"],O)}const b=f(t,["customBaseModel"]);e!==void 0&&b!=null&&m(e,["customBaseModel"],b);let S=f(i,["config","method"]);if(S===void 0&&(S="SUPERVISED_FINE_TUNING"),S==="SUPERVISED_FINE_TUNING"){const O=f(t,["batchSize"]);e!==void 0&&O!=null&&m(e,["supervisedTuningSpec","hyperParameters","batchSize"],O)}let E=f(i,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const O=f(t,["learningRate"]);e!==void 0&&O!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRate"],O)}const A=f(t,["labels"]);e!==void 0&&A!=null&&m(e,["labels"],A);const N=f(t,["beta"]);e!==void 0&&N!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],N);const C=f(t,["baseTeacherModel"]);e!==void 0&&C!=null&&m(e,["distillationSpec","baseTeacherModel"],C);const k=f(t,["tunedTeacherModelSource"]);e!==void 0&&k!=null&&m(e,["distillationSpec","tunedTeacherModelSource"],k);const R=f(t,["sftLossWeightMultiplier"]);e!==void 0&&R!=null&&m(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],R);const M=f(t,["outputUri"]);e!==void 0&&M!=null&&m(e,["outputUri"],M);const z=f(t,["encryptionSpec"]);return e!==void 0&&z!=null&&m(e,["encryptionSpec"],z),r}function Jk(t,e){const i={},r=f(t,["baseModel"]);r!=null&&m(i,["baseModel"],r);const a=f(t,["preTunedModel"]);a!=null&&m(i,["preTunedModel"],a);const l=f(t,["trainingDataset"]);l!=null&&sR(l);const u=f(t,["config"]);return u!=null&&$k(u,i),i}function Kk(t,e){const i={},r=f(t,["baseModel"]);r!=null&&m(i,["baseModel"],r);const a=f(t,["preTunedModel"]);a!=null&&m(i,["preTunedModel"],a);const l=f(t,["trainingDataset"]);l!=null&&rR(l,i,e);const u=f(t,["config"]);return u!=null&&Fk(u,i,e),i}function Yk(t,e){const i={},r=f(t,["name"]);return r!=null&&m(i,["_url","name"],r),i}function Xk(t,e){const i={},r=f(t,["name"]);return r!=null&&m(i,["_url","name"],r),i}function Qk(t,e,i){const r={},a=f(t,["pageSize"]);e!==void 0&&a!=null&&m(e,["_query","pageSize"],a);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const u=f(t,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),r}function Wk(t,e,i){const r={},a=f(t,["pageSize"]);e!==void 0&&a!=null&&m(e,["_query","pageSize"],a);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const u=f(t,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),r}function Zk(t,e){const i={},r=f(t,["config"]);return r!=null&&Qk(r,i),i}function eR(t,e){const i={},r=f(t,["config"]);return r!=null&&Wk(r,i),i}function tR(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["nextPageToken"]);a!=null&&m(i,["nextPageToken"],a);const l=f(t,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>fx(h))),m(i,["tuningJobs"],u)}return i}function nR(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["nextPageToken"]);a!=null&&m(i,["nextPageToken"],a);const l=f(t,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>of(h))),m(i,["tuningJobs"],u)}return i}function iR(t,e){const i={},r=f(t,["name"]);r!=null&&m(i,["model"],r);const a=f(t,["name"]);return a!=null&&m(i,["endpoint"],a),i}function sR(t,e){const i={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=f(t,["examples"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),m(i,["examples","examples"],a)}return i}function rR(t,e,i){const r={};let a=f(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(a==="DISTILLATION"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["distillationSpec","promptDatasetUri"],u)}let l=f(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(l==="DISTILLATION"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["distillationSpec","promptDatasetUri"],u)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function fx(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["name"]);a!=null&&m(i,["name"],a);const l=f(t,["state"]);l!=null&&m(i,["state"],Ay(l));const u=f(t,["createTime"]);u!=null&&m(i,["createTime"],u);const h=f(t,["tuningTask","startTime"]);h!=null&&m(i,["startTime"],h);const g=f(t,["tuningTask","completeTime"]);g!=null&&m(i,["endTime"],g);const p=f(t,["updateTime"]);p!=null&&m(i,["updateTime"],p);const y=f(t,["description"]);y!=null&&m(i,["description"],y);const w=f(t,["baseModel"]);w!=null&&m(i,["baseModel"],w);const b=f(t,["_self"]);return b!=null&&m(i,["tunedModel"],iR(b)),i}function of(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["name"]);a!=null&&m(i,["name"],a);const l=f(t,["state"]);l!=null&&m(i,["state"],Ay(l));const u=f(t,["createTime"]);u!=null&&m(i,["createTime"],u);const h=f(t,["startTime"]);h!=null&&m(i,["startTime"],h);const g=f(t,["endTime"]);g!=null&&m(i,["endTime"],g);const p=f(t,["updateTime"]);p!=null&&m(i,["updateTime"],p);const y=f(t,["error"]);y!=null&&m(i,["error"],y);const w=f(t,["description"]);w!=null&&m(i,["description"],w);const b=f(t,["baseModel"]);b!=null&&m(i,["baseModel"],b);const S=f(t,["tunedModel"]);S!=null&&m(i,["tunedModel"],S);const E=f(t,["preTunedModel"]);E!=null&&m(i,["preTunedModel"],E);const A=f(t,["supervisedTuningSpec"]);A!=null&&m(i,["supervisedTuningSpec"],A);const N=f(t,["preferenceOptimizationSpec"]);N!=null&&m(i,["preferenceOptimizationSpec"],N);const C=f(t,["distillationSpec"]);C!=null&&m(i,["distillationSpec"],C);const k=f(t,["tuningDataStats"]);k!=null&&m(i,["tuningDataStats"],k);const R=f(t,["encryptionSpec"]);R!=null&&m(i,["encryptionSpec"],R);const M=f(t,["partnerModelTuningSpec"]);M!=null&&m(i,["partnerModelTuningSpec"],M);const z=f(t,["customBaseModel"]);z!=null&&m(i,["customBaseModel"],z);const O=f(t,["experiment"]);O!=null&&m(i,["experiment"],O);const j=f(t,["labels"]);j!=null&&m(i,["labels"],j);const B=f(t,["outputUri"]);B!=null&&m(i,["outputUri"],B);const q=f(t,["pipelineJob"]);q!=null&&m(i,["pipelineJob"],q);const W=f(t,["serviceAccount"]);W!=null&&m(i,["serviceAccount"],W);const te=f(t,["tunedModelDisplayName"]);te!=null&&m(i,["tunedModelDisplayName"],te);const ae=f(t,["veoTuningSpec"]);return ae!=null&&m(i,["veoTuningSpec"],ae),i}function aR(t,e){const i={},r=f(t,["sdkHttpResponse"]);r!=null&&m(i,["sdkHttpResponse"],r);const a=f(t,["name"]);a!=null&&m(i,["name"],a);const l=f(t,["metadata"]);l!=null&&m(i,["metadata"],l);const u=f(t,["done"]);u!=null&&m(i,["done"],u);const h=f(t,["error"]);return h!=null&&m(i,["error"],h),i}function Md(t,e){const i={},r=f(t,["gcsUri"]);r!=null&&m(i,["validationDatasetUri"],r);const a=f(t,["vertexDatasetResource"]);return a!=null&&m(i,["validationDatasetUri"],a),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oR extends fi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new _s(ui.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var r;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const a={tunedModelName:i.baseModel};!((r=i.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(a.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},i);return await this.tuneInternal(a)}else{const a=Object.assign({},i),l=await this.tuneMldevInternal(a);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Jd.JOB_STATE_QUEUED}}}}async getInternal(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=Xk(e);return h=re("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>of(y))}else{const p=Yk(e);return h=re("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>fx(y))}}async listInternal(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=eR(e);return h=re("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=nR(y),b=new nv;return Object.assign(b,w),b})}else{const p=Zk(e);return h=re("tunedModels",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=tR(y),b=new nv;return Object.assign(b,w),b})}}async cancel(e){var i,r,a,l;let u,h="",g={};if(this.apiClient.isVertexAI()){const p=Hk(e);return h=re("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=Bk(y),b=new iv;return Object.assign(b,w),b})}else{const p=Vk(e);return h=re("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(w=>{const b=w;return b.sdkHttpResponse={headers:y.headers},b})),u.then(y=>{const w=Gk(y),b=new iv;return Object.assign(b,w),b})}}async tuneInternal(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=Kk(e,e);return l=re("tuningJobs",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:g.headers},y})),a.then(g=>of(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,r;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Jk(e);return l=re("tunedModels",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:g.headers},y})),a.then(g=>aR(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lR{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const cR=1024*1024*8,uR=3,dR=1e3,fR=2,Fl="x-goog-upload-status";async function hR(t,e,i){var r;const a=await hx(t,e,i),l=await(a==null?void 0:a.json());if(((r=a==null?void 0:a.headers)===null||r===void 0?void 0:r[Fl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function pR(t,e,i){var r;const a=await hx(t,e,i),l=await(a==null?void 0:a.json());if(((r=a==null?void 0:a.headers)===null||r===void 0?void 0:r[Fl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=_y(l),h=new Nf;return Object.assign(h,u),h}async function hx(t,e,i){var r,a;let l=0,u=0,h=new Yd(new Response),g="upload";for(l=t.size;u<l;){const p=Math.min(cR,l-u),y=t.slice(u,u+p);u+p>=l&&(g+=", finalize");let w=0,b=dR;for(;w<uR&&(h=await i.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((r=h==null?void 0:h.headers)===null||r===void 0)&&r[Fl]));)w++,await gR(b),b=b*fR;if(u+=p,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[Fl])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function mR(t){return{size:t.size,type:t.type}}function gR(t){return new Promise(e=>setTimeout(e,t))}class vR{async upload(e,i,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hR(e,i,r)}async uploadToFileSearchStore(e,i,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pR(e,i,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mR(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yR{create(e,i,r){return new xR(e,i,r)}}class xR{constructor(e,i,r){this.url=e,this.headers=i,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rv="x-goog-api-key";class bR{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(Rv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Rv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wR="gl-node/";class _R{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const i=this.httpOptions;i!=null&&i.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const r=new _t({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:i==null?void 0:i.timeout,maxRetries:(e=i==null?void 0:i.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=r.interactions,this._interactions}constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const r=uE(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new bR(this.apiKey);this.apiClient=new m2({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:wR+"web",uploader:new vR,downloader:new lR}),this.models=new j2(this.apiClient),this.live=new A2(this.apiClient,a,new yR),this.batches=new qT(this.apiClient),this.chats=new wN(this.models,this.apiClient),this.caches=new yN(this.apiClient),this.files=new DN(this.apiClient),this.operations=new U2(this.apiClient),this.authTokens=new Q2(this.apiClient),this.tunings=new oR(this.apiClient),this.fileSearchStores=new rk(this.apiClient)}}function lc(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(i[r[a]]=t[r[a]]);return i}function SR(t,e,i,r){function a(l){return l instanceof i?l:new i(function(u){u(l)})}return new(i||(i=Promise))(function(l,u){function h(y){try{p(r.next(y))}catch(w){u(w)}}function g(y){try{p(r.throw(y))}catch(w){u(w)}}function p(y){y.done?l(y.value):a(y.value).then(h,g)}p((r=r.apply(t,e||[])).next())})}const ER=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class jf extends Error{constructor(e,i="FunctionsError",r){super(e),this.name=i,this.context=r}}class TR extends jf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Iv extends jf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Mv extends jf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var lf;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(lf||(lf={}));class NR{constructor(e,{headers:i={},customFetch:r,region:a=lf.Any}={}){this.url=e,this.headers=i,this.region=a,this.fetch=ER(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return SR(this,arguments,void 0,function*(i,r={}){var a;let l,u;try{const{headers:h,method:g,body:p,signal:y,timeout:w}=r;let b={},{region:S}=r;S||(S=this.region);const E=new URL(`${this.url}/${i}`);S&&S!=="any"&&(b["x-region"]=S,E.searchParams.set("forceFunctionRegion",S));let A;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",A=p):typeof p=="string"?(b["Content-Type"]="text/plain",A=p):typeof FormData<"u"&&p instanceof FormData?A=p:(b["Content-Type"]="application/json",A=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?A=JSON.stringify(p):A=p;let N=y;w&&(u=new AbortController,l=setTimeout(()=>u.abort(),w),y?(N=u.signal,y.addEventListener("abort",()=>u.abort())):N=u.signal);const C=yield this.fetch(E.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),h),body:A,signal:N}).catch(z=>{throw new TR(z)}),k=C.headers.get("x-relay-error");if(k&&k==="true")throw new Iv(C);if(!C.ok)throw new Mv(C);let R=((a=C.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),M;return R==="application/json"?M=yield C.json():R==="application/octet-stream"||R==="application/pdf"?M=yield C.blob():R==="text/event-stream"?M=C:R==="multipart/form-data"?M=yield C.formData():M=yield C.text(),{data:M,error:null,response:C}}catch(h){return{data:null,error:h,response:h instanceof Mv||h instanceof Iv?h.context:void 0}}finally{l&&clearTimeout(l)}})}}var CR=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},AR=class{constructor(t){var e,i,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(i=t.isMaybeSingle)!==null&&i!==void 0?i:!1,this.urlLengthLimit=(r=t.urlLengthLimit)!==null&&r!==void 0?r:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let u=null,h=null,g=null,p=l.status,y=l.statusText;if(l.ok){var w,b;if(i.method!=="HEAD"){var S;const C=await l.text();C===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((S=i.headers.get("Accept"))===null||S===void 0)&&S.includes("application/vnd.pgrst.plan+text"))?h=C:h=JSON.parse(C))}const A=(w=i.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),N=(b=l.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");A&&N&&N.length>1&&(g=parseInt(N[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,g=null,p=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var E;const A=await l.text();try{u=JSON.parse(A),Array.isArray(u)&&l.status===404&&(h=[],u=null,p=200,y="OK")}catch{l.status===404&&A===""?(p=204,y="No Content"):u={message:A}}if(u&&i.isMaybeSingle&&(!(u==null||(E=u.details)===null||E===void 0)&&E.includes("0 rows"))&&(u=null,p=200,y="OK"),u&&i.shouldThrowOnError)throw new CR(u)}return{error:u,data:h,count:g,status:p,statusText:y}});return this.shouldThrowOnError||(a=a.catch(l=>{var u;let h="",g="",p="";const y=l==null?void 0:l.cause;if(y){var w,b,S,E;const C=(w=y==null?void 0:y.message)!==null&&w!==void 0?w:"",k=(b=y==null?void 0:y.code)!==null&&b!==void 0?b:"";h=`${(S=l==null?void 0:l.name)!==null&&S!==void 0?S:"FetchError"}: ${l==null?void 0:l.message}`,h+=`

Caused by: ${(E=y==null?void 0:y.name)!==null&&E!==void 0?E:"Error"}: ${C}`,k&&(h+=` (${k})`),y!=null&&y.stack&&(h+=`
${y.stack}`)}else{var A;h=(A=l==null?void 0:l.stack)!==null&&A!==void 0?A:""}const N=this.url.toString().length;return(l==null?void 0:l.name)==="AbortError"||(l==null?void 0:l.code)==="ABORT_ERR"?(p="",g="Request was aborted (timeout or manual cancellation)",N>this.urlLengthLimit&&(g+=`. Note: Your request URL is ${N} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((y==null?void 0:y.name)==="HeadersOverflowError"||(y==null?void 0:y.code)==="UND_ERR_HEADERS_OVERFLOW")&&(p="",g="HTTP headers exceeded server limits (typically 16KB)",N>this.urlLengthLimit&&(g+=`. Your request URL is ${N} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:h,hint:g,code:p},data:null,count:null,status:0,statusText:""}})),a.then(t,e)}returns(){return this}overrideTypes(){return this}},kR=class extends AR{select(t){let e=!1;const i=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:i,foreignTable:r,referencedTable:a=r}={}){const l=a?`${a}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${t}.${e?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:i=e}={}){const r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:i,referencedTable:r=i}={}){const a=typeof r>"u"?"offset":`${r}.offset`,l=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(l,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:i=!1,buffers:r=!1,wal:a=!1,format:l="text"}={}){var u;const h=[t?"analyze":null,e?"verbose":null,i?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),g=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${g}"; options=${h};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Dv=new RegExp("[,()]");var mr=class extends kR{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const i=Array.from(new Set(e)).map(r=>typeof r=="string"&&Dv.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}notIn(t,e){const i=Array.from(new Set(e)).map(r=>typeof r=="string"&&Dv.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${i})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:i,type:r}={}){let a="";r==="plain"?a="pl":r==="phrase"?a="ph":r==="websearch"&&(a="w");const l=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${a}fts${l}.${e}`),this}match(t){return Object.entries(t).forEach(([e,i])=>{this.url.searchParams.append(e,`eq.${i}`)}),this}not(t,e,i){return this.url.searchParams.append(t,`not.${e}.${i}`),this}or(t,{foreignTable:e,referencedTable:i=e}={}){const r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,i){return this.url.searchParams.append(t,`${e}.${i}`),this}},RR=class{constructor(t,{headers:e={},schema:i,fetch:r,urlLengthLimit:a=8e3}){this.url=t,this.headers=new Headers(e),this.schema=i,this.fetch=r,this.urlLengthLimit=a}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:i=!1,count:r}=e??{},a=i?"HEAD":"GET";let l=!1;const u=(t??"*").split("").map(p=>/\s/.test(p)&&!l?"":(p==='"'&&(l=!l),p)).join(""),{url:h,headers:g}=this.cloneRequestState();return h.searchParams.set("select",u),r&&g.append("Prefer",`count=${r}`),new mr({method:a,url:h,headers:g,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:i=!0}={}){var r;const a="POST",{url:l,headers:u}=this.cloneRequestState();if(e&&u.append("Prefer",`count=${e}`),i||u.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((g,p)=>g.concat(Object.keys(p)),[]);if(h.length>0){const g=[...new Set(h)].map(p=>`"${p}"`);l.searchParams.set("columns",g.join(","))}}return new mr({method:a,url:l,headers:u,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:i=!1,count:r,defaultToNull:a=!0}={}){var l;const u="POST",{url:h,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),e!==void 0&&h.searchParams.set("on_conflict",e),r&&g.append("Prefer",`count=${r}`),a||g.append("Prefer","missing=default"),Array.isArray(t)){const p=t.reduce((y,w)=>y.concat(Object.keys(w)),[]);if(p.length>0){const y=[...new Set(p)].map(w=>`"${w}"`);h.searchParams.set("columns",y.join(","))}}return new mr({method:u,url:h,headers:g,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var i;const r="PATCH",{url:a,headers:l}=this.cloneRequestState();return e&&l.append("Prefer",`count=${e}`),new mr({method:r,url:a,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const i="DELETE",{url:r,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new mr({method:i,url:r,headers:a,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function Pa(t){"@babel/helpers - typeof";return Pa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pa(t)}function IR(t,e){if(Pa(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(Pa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MR(t){var e=IR(t,"string");return Pa(e)=="symbol"?e:e+""}function DR(t,e,i){return(e=MR(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function jv(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,r)}return i}function bl(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?jv(Object(i),!0).forEach(function(r){DR(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):jv(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}var jR=class px{constructor(e,{headers:i={},schema:r,fetch:a,timeout:l,urlLengthLimit:u=8e3}={}){this.url=e,this.headers=new Headers(i),this.schemaName=r,this.urlLengthLimit=u;const h=a??globalThis.fetch;l!==void 0&&l>0?this.fetch=(g,p)=>{const y=new AbortController,w=setTimeout(()=>y.abort(),l),b=p==null?void 0:p.signal;if(b){if(b.aborted)return clearTimeout(w),h(g,p);const S=()=>{clearTimeout(w),y.abort()};return b.addEventListener("abort",S,{once:!0}),h(g,bl(bl({},p),{},{signal:y.signal})).finally(()=>{clearTimeout(w),b.removeEventListener("abort",S)})}return h(g,bl(bl({},p),{},{signal:y.signal})).finally(()=>clearTimeout(w))}:this.fetch=h}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new RR(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new px(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,i={},{head:r=!1,get:a=!1,count:l}={}){var u;let h;const g=new URL(`${this.url}/rpc/${e}`);let p;const y=S=>S!==null&&typeof S=="object"&&(!Array.isArray(S)||S.some(y)),w=r&&Object.values(i).some(y);w?(h="POST",p=i):r||a?(h=r?"HEAD":"GET",Object.entries(i).filter(([S,E])=>E!==void 0).map(([S,E])=>[S,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([S,E])=>{g.searchParams.append(S,E)})):(h="POST",p=i);const b=new Headers(this.headers);return w?b.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&b.set("Prefer",`count=${l}`),new mr({method:h,url:g,headers:b,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}};class UR{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const r=i.versions;if(r&&r.node){const a=r.node,l=parseInt(a.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const r=this.getWebSocketConstructor();return new r(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const OR="2.95.3",LR=`realtime-js/${OR}`,PR="1.0.0",mx="2.0.0",Uv=mx,cf=1e4,zR=1e3,qR=100;var Vi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Vi||(Vi={}));var vt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(vt||(vt={}));var Cn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Cn||(Cn={}));var uf;(function(t){t.websocket="websocket"})(uf||(uf={}));var gs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(gs||(gs={}));class VR{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,i){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,r;const a=(r=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var i,r;const a=(r=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:{},u=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,i,r){var a,l;const u=e.topic,h=(a=e.ref)!==null&&a!==void 0?a:"",g=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,y=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},w=Object.keys(y).length===0?"":JSON.stringify(y);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+h.length+u.length+p.length+w.length,S=new ArrayBuffer(this.HEADER_LENGTH+b);let E=new DataView(S),A=0;E.setUint8(A++,this.KINDS.userBroadcastPush),E.setUint8(A++,g.length),E.setUint8(A++,h.length),E.setUint8(A++,u.length),E.setUint8(A++,p.length),E.setUint8(A++,w.length),E.setUint8(A++,i),Array.from(g,C=>E.setUint8(A++,C.charCodeAt(0))),Array.from(h,C=>E.setUint8(A++,C.charCodeAt(0))),Array.from(u,C=>E.setUint8(A++,C.charCodeAt(0))),Array.from(p,C=>E.setUint8(A++,C.charCodeAt(0))),Array.from(w,C=>E.setUint8(A++,C.charCodeAt(0)));var N=new Uint8Array(S.byteLength+r.byteLength);return N.set(new Uint8Array(S),0),N.set(new Uint8Array(r),S.byteLength),N.buffer}decode(e,i){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return i(r)}if(typeof e=="string"){const r=JSON.parse(e),[a,l,u,h,g]=r;return i({join_ref:a,ref:l,topic:u,event:h,payload:g})}return i({})}_binaryDecode(e){const i=new DataView(e),r=i.getUint8(0),a=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,i,a)}}_decodeUserBroadcast(e,i,r){const a=i.getUint8(1),l=i.getUint8(2),u=i.getUint8(3),h=i.getUint8(4);let g=this.HEADER_LENGTH+4;const p=r.decode(e.slice(g,g+a));g=g+a;const y=r.decode(e.slice(g,g+l));g=g+l;const w=r.decode(e.slice(g,g+u));g=g+u;const b=e.slice(g,e.byteLength),S=h===this.JSON_ENCODING?JSON.parse(r.decode(b)):b,E={type:this.BROADCAST_EVENT,event:y,payload:S};return u>0&&(E.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(e,i){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>i.includes(r)))}}class gx{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ye;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ye||(Ye={}));const Ov=(t,e,i={})=>{var r;const a=(r=i.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=HR(u,t,e,a),l),{}):{}},HR=(t,e,i,r)=>{const a=e.find(h=>h.name===t),l=a==null?void 0:a.type,u=i[t];return l&&!r.includes(l)?vx(l,u):df(u)},vx=(t,e)=>{if(t.charAt(0)==="_"){const i=t.slice(1,t.length);return FR(e,i)}switch(t){case Ye.bool:return GR(e);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return BR(e);case Ye.json:case Ye.jsonb:return $R(e);case Ye.timestamp:return JR(e);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return df(e);default:return df(e)}},df=t=>t,GR=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},BR=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},$R=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},FR=(t,e)=>{if(typeof t!="string")return t;const i=t.length-1,r=t[i];if(t[0]==="{"&&r==="}"){let l;const u=t.slice(1,i);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(h=>vx(e,h))}return t},JR=t=>typeof t=="string"?t.replace(" ","T"):t,yx=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Dd{constructor(e,i,r={},a=cf){this.channel=e,this.event=i,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var r;return this._hasReceived(e)&&i((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Lv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Lv||(Lv={}));class ja{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ja.syncState(this.state,a,l,u),this.pendingDiffs.forEach(g=>{this.state=ja.syncDiff(this.state,g,l,u)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},a=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ja.syncDiff(this.state,a,l,u),h())}),this.onJoin((a,l,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:u})}),this.onLeave((a,l,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,r,a){const l=this.cloneDeep(e),u=this.transformState(i),h={},g={};return this.map(l,(p,y)=>{u[p]||(g[p]=y)}),this.map(u,(p,y)=>{const w=l[p];if(w){const b=y.map(N=>N.presence_ref),S=w.map(N=>N.presence_ref),E=y.filter(N=>S.indexOf(N.presence_ref)<0),A=w.filter(N=>b.indexOf(N.presence_ref)<0);E.length>0&&(h[p]=E),A.length>0&&(g[p]=A)}else h[p]=y}),this.syncDiff(l,{joins:h,leaves:g},r,a)}static syncDiff(e,i,r,a){const{joins:l,leaves:u}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(l,(h,g)=>{var p;const y=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(g),y.length>0){const w=e[h].map(S=>S.presence_ref),b=y.filter(S=>w.indexOf(S.presence_ref)<0);e[h].unshift(...b)}r(h,y,g)}),this.map(u,(h,g)=>{let p=e[h];if(!p)return;const y=g.map(w=>w.presence_ref);p=p.filter(w=>y.indexOf(w.presence_ref)<0),e[h]=p,a(h,p,g),p.length===0&&delete e[h]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(r=>i(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,r)=>{const a=e[r];return"metas"in a?i[r]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):i[r]=a,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Pv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Pv||(Pv={}));var Ua;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ua||(Ua={}));var oi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(oi||(oi={}));class wr{constructor(e,i={config:{}},r){var a,l;if(this.topic=e,this.params=i,this.socket=r,this.bindings={},this.state=vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Dd(this,Cn.join,this.params,this.timeout),this.rejoinTimer=new gx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vt.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Cn.reply,{},(u,h)=>{this._trigger(this._replyEventName(h),u)}),this.presence=new ja(this),this.broadcastEndpointURL=yx(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var r,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==vt.closed){const{config:{broadcast:u,presence:h,private:g}}=this.params,p=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(S=>S.filter))!==null&&a!==void 0?a:[],y=!!this.bindings[Ua.PRESENCE]&&this.bindings[Ua.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,w={},b={broadcast:u,presence:Object.assign(Object.assign({},h),{enabled:y}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(S=>e==null?void 0:e(oi.CHANNEL_ERROR,S)),this._onClose(()=>e==null?void 0:e(oi.CLOSED)),this.updateJoinPayload(Object.assign({config:b},w)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:S})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),S===void 0){e==null||e(oi.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,N=(E=A==null?void 0:A.length)!==null&&E!==void 0?E:0,C=[];for(let k=0;k<N;k++){const R=A[k],{filter:{event:M,schema:z,table:O,filter:j}}=R,B=S&&S[k];if(B&&B.event===M&&wr.isFilterValueEqual(B.schema,z)&&wr.isFilterValueEqual(B.table,O)&&wr.isFilterValueEqual(B.filter,j))C.push(Object.assign(Object.assign({},R),{id:B.id}));else{this.unsubscribe(),this.state=vt.errored,e==null||e(oi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(oi.SUBSCRIBED);return}}).receive("error",S=>{this.state=vt.errored,e==null||e(oi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(oi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,r){return this.state===vt.joined&&e===Ua.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,i,r)}async httpSend(e,i,r={}){var a;if(i==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);if(h.status===202)return{success:!0};let g=h.statusText;try{const p=await h.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(e,i={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=e,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,h,g;const p=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=vt.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Cn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new Dd(this,Cn.leave,{},e),r.receive("ok",()=>{i(),a("ok")}).receive("timeout",()=>{i(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vt.closed,this.bindings={}}async _fetchWithTimeout(e,i,r){const a=new AbortController,l=setTimeout(()=>a.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:a.signal}));return clearTimeout(l),u}_push(e,i,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Dd(this,e,i,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>qR){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,r){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,r){var a,l;const u=e.toLocaleLowerCase(),{close:h,error:g,leave:p,join:y}=Cn;if(r&&[h,g,p,y].indexOf(u)>=0&&r!==this._joinRef())return;let b=this._onMessage(u,i,r);if(i&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(S=>{var E,A,N;return((E=S.filter)===null||E===void 0?void 0:E.event)==="*"||((N=(A=S.filter)===null||A===void 0?void 0:A.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===u}).map(S=>S.callback(b,r)):(l=this.bindings[u])===null||l===void 0||l.filter(S=>{var E,A,N,C,k,R;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in S){const M=S.id,z=(E=S.filter)===null||E===void 0?void 0:E.event;return M&&((A=i.ids)===null||A===void 0?void 0:A.includes(M))&&(z==="*"||(z==null?void 0:z.toLocaleLowerCase())===((N=i.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const M=(k=(C=S==null?void 0:S.filter)===null||C===void 0?void 0:C.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return M==="*"||M===((R=i==null?void 0:i.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===u}).map(S=>{if(typeof b=="object"&&"ids"in b){const E=b.data,{schema:A,table:N,commit_timestamp:C,type:k,errors:R}=E;b=Object.assign(Object.assign({},{schema:A,table:N,commit_timestamp:C,eventType:k,new:{},old:{},errors:R}),this._getPayloadRecords(E))}S.callback(b,r)})}_isClosed(){return this.state===vt.closed}_isJoined(){return this.state===vt.joined}_isJoining(){return this.state===vt.joining}_isLeaving(){return this.state===vt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,r){const a=e.toLocaleLowerCase(),l={type:a,filter:i,callback:r};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,i){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===r&&wr.isEqual(a.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const r in e)if(e[r]!==i[r])return!1;return!0}static isFilterValueEqual(e,i){return(e??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Cn.close,{},e)}_onError(e){this._on(Cn.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=Ov(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=Ov(e.columns,e.old_record)),i}}const jd=()=>{},wl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},KR=[1e3,2e3,5e3,1e4],YR=1e4,XR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class QR{constructor(e,i){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=cf,this.transport=null,this.heartbeatIntervalMs=wl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jd,this.ref=0,this.reconnectTimer=null,this.vsn=Uv,this.logger=jd,this.conn=null,this.sendBuffer=[],this.serializer=new VR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((r=i==null?void 0:i.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${uf.websocket}`,this.httpEndpoint=yx(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=UR.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return i==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,r){this.logger(e,i,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vi.connecting:return gs.Connecting;case Vi.open:return gs.Open;case Vi.closing:return gs.Closing;default:return gs.Closed}}isConnected(){return this.connectionState()===gs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===r);if(a)return a;{const l=new wr(`realtime:${e}`,i,this);return this.channels.push(l),l}}push(e){const{topic:i,event:r,payload:a,ref:l}=e,u=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${i} ${r} (${l})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(zR,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},wl.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",p)}catch(y){this.log("error","error in heartbeat callback",y)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:a,payload:l,ref:u}=i,h=u?`(${u})`:"",g=l.status||"";this.log("receive",`${g} ${r} ${a} ${h}`.trim(),l),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(a,l,u)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Vi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Vi.open||this.conn.readyState===Vi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(i){this.log("error","error in heartbeat callback",i)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Cn.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(i);return`${e}${r}${a}`}_workerObjectUrl(e){let i;if(e)i=e;else{const r=new Blob([XR],{type:"application/javascript"});i=URL.createObjectURL(r)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i,r=!1;if(e)i=e,r=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),i=this.accessTokenValue}else i=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(a=>{const l={access_token:i,version:LR};i&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(Cn.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(i)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new gx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},wl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,r,a,l,u,h,g,p,y,w,b,S;switch(this.transport=(i=e==null?void 0:e.transport)!==null&&i!==void 0?i:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:cf,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:wl.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:jd,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:Uv,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(E=>KR[E-1]||YR),this.vsn){case PR:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:((E,A)=>A(JSON.stringify(E))),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:((E,A)=>A(JSON.parse(E)));break;case mx:this.encode=(b=e==null?void 0:e.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(S=e==null?void 0:e.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var za=class extends Error{constructor(t,e){var i;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((i=e.icebergType)==null?void 0:i.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function WR(t,e,i){const r=new URL(e,t);if(i)for(const[a,l]of Object.entries(i))l!==void 0&&r.searchParams.set(a,l);return r.toString()}async function ZR(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function eI(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:i,path:r,query:a,body:l,headers:u}){const h=WR(t.baseUrl,r,a),g=await ZR(t.auth),p=await e(h,{method:i,headers:{...l?{"Content-Type":"application/json"}:{},...g,...u},body:l?JSON.stringify(l):void 0}),y=await p.text(),w=(p.headers.get("content-type")||"").includes("application/json"),b=w&&y?JSON.parse(y):y;if(!p.ok){const S=w?b:void 0,E=S==null?void 0:S.error;throw new za((E==null?void 0:E.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:E==null?void 0:E.type,icebergCode:E==null?void 0:E.code,details:S})}return{status:p.status,headers:p.headers,data:b}}}}function _l(t){return t.join("")}var tI=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:_l(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const i={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_l(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_l(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_l(t.namespace)}`}),!0}catch(e){if(e instanceof za&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(i){if(i instanceof za&&i.status===409)return;throw i}}};function lr(t){return t.join("")}var nI=class{constructor(t,e="",i){this.client=t,this.prefix=e,this.accessDelegation=i}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${lr(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${lr(t.namespace)}/tables`,body:e,headers:i})).data.metadata}async updateTable(t,e){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${lr(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${lr(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${lr(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${lr(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(i){if(i instanceof za&&i.status===404)return!1;throw i}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(i){if(i instanceof za&&i.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw i}}},iI=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const i=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=eI({baseUrl:i,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new tI(this.client,e),this.tableOps=new nI(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},cc=class extends Error{constructor(t,e="storage",i,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=i,this.statusCode=r}};function uc(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Sl=class extends cc{constructor(t,e,i,r="storage"){super(t,r,e,i),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},xx=class extends cc{constructor(t,e,i="storage"){super(t,i),this.name=i==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const sI=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),rI=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ff=t=>{if(Array.isArray(t))return t.map(i=>ff(i));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([i,r])=>{const a=i.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=ff(r)}),e},aI=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function qa(t){"@babel/helpers - typeof";return qa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qa(t)}function oI(t,e){if(qa(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(qa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lI(t){var e=oI(t,"string");return qa(e)=="symbol"?e:e+""}function cI(t,e,i){return(e=lI(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function zv(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,r)}return i}function ye(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?zv(Object(i),!0).forEach(function(r){cI(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):zv(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}const qv=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},uI=async(t,e,i,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(i!=null&&i.noResolveJson)){const a=t,l=a.status||500;if(typeof a.json=="function")a.json().then(u=>{const h=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||l+"";e(new Sl(qv(u),l,h,r))}).catch(()=>{if(r==="vectors"){const u=l+"";e(new Sl(a.statusText||`HTTP ${l} error`,l,u,r))}else{const u=l+"";e(new Sl(a.statusText||`HTTP ${l} error`,l,u,r))}});else{const u=l+"";e(new Sl(a.statusText||`HTTP ${l} error`,l,u,r))}}else e(new xx(qv(t),t,r))},dI=(t,e,i,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!r?ye(ye({},a),i):(rI(r)?(a.headers=ye({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,e!=null&&e.duplex&&(a.duplex=e.duplex),ye(ye({},a),i))};async function Aa(t,e,i,r,a,l,u){return new Promise((h,g)=>{t(i,dI(e,r,a,l)).then(p=>{if(!p.ok)throw p;if(r!=null&&r.noResolveJson)return p;if(u==="vectors"){const y=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!y||!y.includes("application/json"))return{}}return p.json()}).then(p=>h(p)).catch(p=>uI(p,g,r,u))})}function bx(t="storage"){return{get:async(e,i,r,a)=>Aa(e,"GET",i,r,a,void 0,t),post:async(e,i,r,a,l)=>Aa(e,"POST",i,a,l,r,t),put:async(e,i,r,a,l)=>Aa(e,"PUT",i,a,l,r,t),head:async(e,i,r,a)=>Aa(e,"HEAD",i,ye(ye({},r),{},{noResolveJson:!0}),a,void 0,t),remove:async(e,i,r,a,l)=>Aa(e,"DELETE",i,a,l,r,t)}}const fI=bx("storage"),{get:Va,post:Nn,put:hf,head:hI,remove:Uf}=fI,nn=bx("vectors");var Mr=class{constructor(t,e={},i,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=sI(i),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(uc(i))return{data:null,error:i};throw i}}},pI=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(uc(e))return{data:null,error:e};throw e}}};let wx;wx=Symbol.toStringTag;var mI=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[wx]="BlobDownloadBuilder",this.promise=null}asStream(){return new pI(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(uc(e))return{data:null,error:e};throw e}}};const gI={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var vI=class extends Mr{constructor(t,e={},i,r){super(t,e,r,"storage"),this.bucketId=i}async uploadOrUpdate(t,e,i,r){var a=this;return a.handleOperation(async()=>{let l;const u=ye(ye({},Vv),r);let h=ye(ye({},a.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const g=u.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),g&&l.append("metadata",a.encodeMetadata(g)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),g&&!l.has("metadata")&&l.append("metadata",a.encodeMetadata(g))):(l=i,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,g&&(h["x-metadata"]=a.toBase64(a.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),r!=null&&r.headers&&(h=ye(ye({},h),r.headers));const p=a._removeEmptyFolders(e),y=a._getFinalPath(p),w=await(t=="PUT"?hf:Nn)(a.fetch,`${a.url}/object/${y}`,l,ye({headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{path:p,id:w.Id,fullPath:w.Key}})}async upload(t,e,i){return this.uploadOrUpdate("POST",t,e,i)}async uploadToSignedUrl(t,e,i,r){var a=this;const l=a._removeEmptyFolders(t),u=a._getFinalPath(l),h=new URL(a.url+`/object/upload/sign/${u}`);return h.searchParams.set("token",e),a.handleOperation(async()=>{let g;const p=ye({upsert:Vv.upsert},r),y=ye(ye({},a.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",p.cacheControl)):(g=i,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType),{path:l,fullPath:(await hf(a.fetch,h.toString(),g,{headers:y})).Key}})}async createSignedUploadUrl(t,e){var i=this;return i.handleOperation(async()=>{let r=i._getFinalPath(t);const a=ye({},i.headers);e!=null&&e.upsert&&(a["x-upsert"]="true");const l=await Nn(i.fetch,`${i.url}/object/upload/sign/${r}`,{},{headers:a}),u=new URL(i.url+l.url),h=u.searchParams.get("token");if(!h)throw new cc("No token returned by API");return{signedUrl:u.toString(),path:t,token:h}})}async update(t,e,i){return this.uploadOrUpdate("PUT",t,e,i)}async move(t,e,i){var r=this;return r.handleOperation(async()=>await Nn(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i==null?void 0:i.destinationBucket},{headers:r.headers}))}async copy(t,e,i){var r=this;return r.handleOperation(async()=>({path:(await Nn(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i==null?void 0:i.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,i){var r=this;return r.handleOperation(async()=>{let a=r._getFinalPath(t),l=await Nn(r.fetch,`${r.url}/object/sign/${a}`,ye({expiresIn:e},i!=null&&i.transform?{transform:i.transform}:{}),{headers:r.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{signedUrl:encodeURI(`${r.url}${l.signedURL}${u}`)}})}async createSignedUrls(t,e,i){var r=this;return r.handleOperation(async()=>{const a=await Nn(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return a.map(u=>ye(ye({},u),{},{signedUrl:u.signedURL?encodeURI(`${r.url}${u.signedURL}${l}`):null}))})}download(t,e,i){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),l=a?`?${a}`:"",u=this._getFinalPath(t),h=()=>Va(this.fetch,`${this.url}/${r}/${u}${l}`,{headers:this.headers,noResolveJson:!0},i);return new mI(h,this.shouldThrowOnError)}async info(t){var e=this;const i=e._getFinalPath(t);return e.handleOperation(async()=>ff(await Va(e.fetch,`${e.url}/object/info/${i}`,{headers:e.headers})))}async exists(t){var e=this;const i=e._getFinalPath(t);try{return await hI(e.fetch,`${e.url}/object/${i}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(uc(r)&&r instanceof xx){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const i=this._getFinalPath(t),r=[],a=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&r.push(a);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});u!==""&&r.push(u);let h=r.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${i}${h}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await Uf(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,i){var r=this;return r.handleOperation(async()=>{const a=ye(ye(ye({},gI),e),{},{prefix:t||""});return await Nn(r.fetch,`${r.url}/object/list/${r.bucketId}`,a,{headers:r.headers},i)})}async listV2(t,e){var i=this;return i.handleOperation(async()=>{const r=ye({},t);return await Nn(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,r,{headers:i.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const yI="2.95.3",Ja={"X-Client-Info":`storage-js/${yI}`};var xI=class extends Mr{constructor(t,e={},i,r){const a=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));const l=a.href.replace(/\/$/,""),u=ye(ye({},Ja),e);super(l,u,i,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const i=e.listBucketOptionsToQueryString(t);return await Va(e.fetch,`${e.url}/bucket${i}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Va(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var i=this;return i.handleOperation(async()=>await Nn(i.fetch,`${i.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}))}async updateBucket(t,e){var i=this;return i.handleOperation(async()=>await hf(i.fetch,`${i.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await Nn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Uf(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},bI=class extends Mr{constructor(t,e={},i){const r=t.replace(/\/$/,""),a=ye(ye({},Ja),e);super(r,a,i,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Nn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const i=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&i.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&i.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&i.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&i.set("sortOrder",t.sortOrder),t!=null&&t.search&&i.set("search",t.search);const r=i.toString(),a=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await Va(e.fetch,a,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Uf(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!aI(t))throw new cc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new iI({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(i,{get(a,l){const u=a[l];return typeof u!="function"?u:async(...h)=>{try{return{data:await u.apply(a,h),error:null}}catch(g){if(r)throw g;return{data:null,error:g}}}}})}},wI=class extends Mr{constructor(t,e={},i){const r=t.replace(/\/$/,""),a=ye(ye({},Ja),{},{"Content-Type":"application/json"},e);super(r,a,i,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await nn.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var i=this;return i.handleOperation(async()=>await nn.post(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:i.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await nn.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var i=this;return i.handleOperation(async()=>await nn.post(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:i.headers})||{})}},_I=class extends Mr{constructor(t,e={},i){const r=t.replace(/\/$/,""),a=ye(ye({},Ja),{},{"Content-Type":"application/json"},e);super(r,a,i,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await nn.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await nn.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await nn.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await nn.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await nn.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},SI=class extends Mr{constructor(t,e={},i){const r=t.replace(/\/$/,""),a=ye(ye({},Ja),{},{"Content-Type":"application/json"},e);super(r,a,i,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await nn.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await nn.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await nn.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await nn.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},EI=class extends SI{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new TI(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,i=this;return e().call(i,t)}async getBucket(t){var e=()=>super.getBucket,i=this;return e().call(i,t)}async listBuckets(t={}){var e=()=>super.listBuckets,i=this;return e().call(i,t)}async deleteBucket(t){var e=()=>super.deleteBucket,i=this;return e().call(i,t)}},TI=class extends wI{constructor(t,e,i,r){super(t,e,r),this.vectorBucketName=i}async createIndex(t){var e=()=>super.createIndex,i=this;return e().call(i,ye(ye({},t),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,i=this;return e().call(i,ye(ye({},t),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,i=this;return e().call(i,i.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,i=this;return e().call(i,i.vectorBucketName,t)}index(t){return new NI(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},NI=class extends _I{constructor(t,e,i,r,a){super(t,e,a),this.vectorBucketName=i,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,i=this;return e().call(i,ye(ye({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(t){var e=()=>super.getVectors,i=this;return e().call(i,ye(ye({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,i=this;return e().call(i,ye(ye({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,i=this;return e().call(i,ye(ye({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,i=this;return e().call(i,ye(ye({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},CI=class extends xI{constructor(t,e={},i,r){super(t,e,i,r)}from(t){return new vI(this.url,this.headers,t,this.fetch)}get vectors(){return new EI(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new bI(this.url+"/iceberg",this.headers,this.fetch)}};const _x="2.95.3",gr=30*1e3,pf=3,Ud=pf*gr,AI="http://localhost:9999",kI="supabase.auth.token",RI={"X-Client-Info":`gotrue-js/${_x}`},mf="X-Supabase-Api-Version",Sx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},II=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,MI=600*1e3;class Ha extends Error{constructor(e,i,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=r}}function de(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class DI extends Ha{constructor(e,i,r){super(e,i,r),this.name="AuthApiError",this.status=i,this.code=r}}function jI(t){return de(t)&&t.name==="AuthApiError"}class vs extends Ha{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class pi extends Ha{constructor(e,i,r,a){super(e,r,a),this.name=i,this.status=r}}class tn extends pi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Od(t){return de(t)&&t.name==="AuthSessionMissingError"}class cr extends pi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class El extends pi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Tl extends pi{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function UI(t){return de(t)&&t.name==="AuthImplicitGrantRedirectError"}class Hv extends pi{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class OI extends pi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class gf extends pi{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function Ld(t){return de(t)&&t.name==="AuthRetryableFetchError"}class Gv extends pi{constructor(e,i,r){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=r}}class vf extends pi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Bv=` 	
\r=`.split(""),LI=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Bv.length;e+=1)t[Bv[e].charCodeAt(0)]=-2;for(let e=0;e<Jl.length;e+=1)t[Jl[e].charCodeAt(0)]=e;return t})();function $v(t,e,i){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;i(Jl[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;i(Jl[r]),e.queuedBits-=6}}function Ex(t,e,i){const r=LI[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Fv(t){const e=[],i=u=>{e.push(String.fromCodePoint(u))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=u=>{qI(u,r,i)};for(let u=0;u<t.length;u+=1)Ex(t.charCodeAt(u),a,l);return e.join("")}function PI(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function zI(t,e){for(let i=0;i<t.length;i+=1){let r=t.charCodeAt(i);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(t.charCodeAt(i+1)-56320&65535|a)+65536,i+=1}PI(r,e)}}function qI(t,e,i){if(e.utf8seq===0){if(t<=127){i(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function Er(t){const e=[],i={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Ex(t.charCodeAt(a),i,r);return new Uint8Array(e)}function VI(t){const e=[];return zI(t,i=>e.push(i)),new Uint8Array(e)}function ys(t){const e=[],i={queue:0,queuedBits:0},r=a=>{e.push(a)};return t.forEach(a=>$v(a,i,r)),$v(null,i,r),e.join("")}function HI(t){return Math.round(Date.now()/1e3)+t}function GI(){return Symbol("auth-callback")}const kt=()=>typeof window<"u"&&typeof document<"u",fs={tested:!1,writable:!1},Tx=()=>{if(!kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fs.tested)return fs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),fs.tested=!0,fs.writable=!0}catch{fs.tested=!0,fs.writable=!1}return fs.writable};function BI(t){const e={},i=new URL(t);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return i.searchParams.forEach((r,a)=>{e[a]=r}),e}const Nx=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),$I=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",vr=async(t,e,i)=>{await t.setItem(e,JSON.stringify(i))},hs=async(t,e)=>{const i=await t.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},At=async(t,e)=>{await t.removeItem(e)};class dc{constructor(){this.promise=new dc.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}dc.promiseConstructor=Promise;function Nl(t){const e=t.split(".");if(e.length!==3)throw new vf("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!II.test(e[r]))throw new vf("JWT not in base64url format");return{header:JSON.parse(Fv(e[0])),payload:JSON.parse(Fv(e[1])),signature:Er(e[2]),raw:{header:e[0],payload:e[1]}}}async function FI(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function JI(t,e){return new Promise((r,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await t(l);if(!e(l,null,u)){r(u);return}}catch(u){if(!e(l,u)){a(u);return}}})()})}function KI(t){return("0"+t.toString(16)).substr(-2)}function YI(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=i.length;let a="";for(let l=0;l<56;l++)a+=i.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,KI).join("")}async function XI(t){const i=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",i),a=new Uint8Array(r);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function QI(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const i=await XI(t);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ur(t,e,i=!1){const r=YI();let a=r;i&&(a+="/PASSWORD_RECOVERY"),await vr(t,`${e}-code-verifier`,a);const l=await QI(r);return[l,r===l?"plain":"s256"]}const WI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ZI(t){const e=t.headers.get(mf);if(!e||!e.match(WI))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function eM(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function tM(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function dr(t){if(!nM.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Pd(){const t={};return new Proxy(t,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const r=i.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function iM(t,e){return new Proxy(t,{get:(i,r,a)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,r,a)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,r,a)}})}function Jv(t){return JSON.parse(JSON.stringify(t))}const ms=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),sM=[502,503,504];async function Kv(t){var e;if(!$I(t))throw new gf(ms(t),0);if(sM.includes(t.status))throw new gf(ms(t),t.status);let i;try{i=await t.json()}catch(l){throw new vs(ms(l),l)}let r;const a=ZI(t);if(a&&a.getTime()>=Sx["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?r=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(r=i.error_code),r){if(r==="weak_password")throw new Gv(ms(i),t.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new tn}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Gv(ms(i),t.status,i.weak_password.reasons);throw new DI(ms(i),t.status||500,r)}const rM=(t,e,i,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),i))};async function ge(t,e,i,r){var a;const l=Object.assign({},r==null?void 0:r.headers);l[mf]||(l[mf]=Sx["2024-01-01"].name),r!=null&&r.jwt&&(l.Authorization=`Bearer ${r.jwt}`);const u=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(u.redirect_to=r.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",g=await aM(t,e,i+h,{headers:l,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(g):{data:Object.assign({},g),error:null}}async function aM(t,e,i,r,a,l){const u=rM(e,r,a,l);let h;try{h=await t(i,Object.assign({},u))}catch(g){throw console.error(g),new gf(ms(g),0)}if(h.ok||await Kv(h),r!=null&&r.noResolveJson)return h;try{return await h.json()}catch(g){await Kv(g)}}function Tn(t){var e;let i=null;cM(t)&&(i=Object.assign({},t),t.expires_at||(i.expires_at=HI(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:i,user:r},error:null}}function Yv(t){const e=Tn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((i,r)=>i&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Hi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function oM(t){return{data:t,error:null}}function lM(t){const{action_link:e,email_otp:i,hashed_token:r,redirect_to:a,verification_type:l}=t,u=lc(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:i,hashed_token:r,redirect_to:a,verification_type:l},g=Object.assign({},u);return{data:{properties:h,user:g},error:null}}function Xv(t){return t}function cM(t){return t.access_token&&t.refresh_token&&t.expires_in}const zd=["global","local","others"];class uM{constructor({url:e="",headers:i={},fetch:r}){this.url=e,this.headers=i,this.fetch=Nx(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=zd[0]){if(zd.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zd.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,i={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:Hi})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:i}=e,r=lc(e,["options"]),a=Object.assign(Object.assign({},r),i);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:lM,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(de(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Hi})}catch(i){if(de(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,r,a,l,u,h,g;try{const p={nextPage:null,lastPage:0,total:0},y=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Xv});if(y.error)throw y.error;const w=await y.json(),b=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(g=(h=y.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return S.length>0&&(S.forEach(E=>{const A=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(E.split(";")[1].split("=")[1]);p[`${N}Page`]=A}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(de(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){dr(e);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Hi})}catch(i){if(de(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){dr(e);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:Hi})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,i=!1){dr(e);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:Hi})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){dr(e.userId);try{const{data:i,error:r}=await ge(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:i,error:r}}catch(i){if(de(i))return{data:null,error:i};throw i}}async _deleteFactor(e){dr(e.userId),dr(e.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(de(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,r,a,l,u,h,g;try{const p={nextPage:null,lastPage:0,total:0},y=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Xv});if(y.error)throw y.error;const w=await y.json(),b=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(g=(h=y.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return S.length>0&&(S.forEach(E=>{const A=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(E.split(";")[1].split("=")[1]);p[`${N}Page`]=A}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(de(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(de(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(de(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(de(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(de(i))return{data:null,error:i};throw i}}}function Qv(t={}){return{getItem:e=>t[e]||null,setItem:(e,i)=>{t[e]=i},removeItem:e=>{delete t[e]}}}const fr={debug:!!(globalThis&&Tx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Cx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class dM extends Cx{}async function fM(t,e,i){fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),fr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await i()}finally{fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new dM(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(fr.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function hM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ax(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function pM(t){return parseInt(t,16)}function mM(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function gM(t){var e;const{chainId:i,domain:r,expirationTime:a,issuedAt:l=new Date,nonce:u,notBefore:h,requestId:g,resources:p,scheme:y,uri:w,version:b}=t;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const S=Ax(t.address),E=y?`${y}://${r}`:r,A=t.statement?`${t.statement}
`:"",N=`${E} wants you to sign in with your Ethereum account:
${S}

${A}`;let C=`URI: ${w}
Version: ${b}
Chain ID: ${i}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(a&&(C+=`
Expiration Time: ${a.toISOString()}`),h&&(C+=`
Not Before: ${h.toISOString()}`),g&&(C+=`
Request ID: ${g}`),p){let k=`
Resources:`;for(const R of p){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);k+=`
- ${R}`}C+=k}return`${N}
${C}`}class pt extends Error{constructor({message:e,code:i,cause:r,name:a}){var l;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(l=a??(r instanceof Error?r.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=i}}class Kl extends pt{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function vM({error:t,options:e}){var i,r,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((i=l.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=l.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new pt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const u=window.location.hostname;if(kx(u)){if(l.rp.id!==u)return new pt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function yM({error:t,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new pt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(kx(r)){if(i.rpId!==r)return new pt({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class xM{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const bM=new xM;function wM(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:i,excludeCredentials:r}=t,a=lc(t,["challenge","user","excludeCredentials"]),l=Er(e).buffer,u=Object.assign(Object.assign({},i),{id:Er(i.id).buffer}),h=Object.assign(Object.assign({},a),{challenge:l,user:u});if(r&&r.length>0){h.excludeCredentials=new Array(r.length);for(let g=0;g<r.length;g++){const p=r[g];h.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:Er(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function _M(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:i}=t,r=lc(t,["challenge","allowCredentials"]),a=Er(e).buffer,l=Object.assign(Object.assign({},r),{challenge:a});if(i&&i.length>0){l.allowCredentials=new Array(i.length);for(let u=0;u<i.length;u++){const h=i[u];l.allowCredentials[u]=Object.assign(Object.assign({},h),{id:Er(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function SM(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t;return{id:t.id,rawId:t.id,response:{attestationObject:ys(new Uint8Array(t.response.attestationObject)),clientDataJSON:ys(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function EM(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t,r=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ys(new Uint8Array(a.authenticatorData)),clientDataJSON:ys(new Uint8Array(a.clientDataJSON)),signature:ys(new Uint8Array(a.signature)),userHandle:a.userHandle?ys(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function kx(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Wv(){var t,e;return!!(kt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function TM(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Kl("Browser returned unexpected credential type",e)}:{data:null,error:new Kl("Empty credential response",e)}}catch(e){return{data:null,error:vM({error:e,options:t})}}}async function NM(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Kl("Browser returned unexpected credential type",e)}:{data:null,error:new Kl("Empty credential response",e)}}catch(e){return{data:null,error:yM({error:e,options:t})}}}const CM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},AM={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Yl(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),i=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),r={};for(const a of t)if(a)for(const l in a){const u=a[l];if(u!==void 0)if(Array.isArray(u))r[l]=u;else if(i(u))r[l]=u;else if(e(u)){const h=r[l];e(h)?r[l]=Yl(h,u):r[l]=Yl(u)}else r[l]=u}return r}function kM(t,e){return Yl(CM,t,e||{})}function RM(t,e){return Yl(AM,t,e||{})}class IM{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:r,signal:a},l){var u;try{const{data:h,error:g}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!h)return{data:null,error:g};const p=a??bM.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:y}=h.webauthn.credential_options.publicKey;if(!y.name){const w=r;if(w)y.name=`${y.id}:${w}`;else{const S=(await this.client.getUser()).data.user,E=((u=S==null?void 0:S.user_metadata)===null||u===void 0?void 0:u.name)||(S==null?void 0:S.email)||(S==null?void 0:S.id)||"User";y.name=`${y.id}:${E}`}}y.displayName||(y.displayName=y.name)}switch(h.webauthn.type){case"create":{const y=kM(h.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:w,error:b}=await TM({publicKey:y,signal:p});return w?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:w}},error:null}:{data:null,error:b}}case"request":{const y=RM(h.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:w,error:b}=await NM(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:y,signal:p}));return w?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:w}},error:null}:{data:null,error:b}}}}catch(h){return de(h)?{data:null,error:h}:{data:null,error:new vs("Unexpected error in challenge",h)}}}async _verify({challengeId:e,factorId:i,webauthn:r}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new Ha("rpId is required for WebAuthn authentication")};try{if(!Wv())return{data:null,error:new vs("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:r},signal:a},{request:l});if(!u)return{data:null,error:h};const{webauthn:g}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:g.type,rpId:i,rpOrigins:r,credential_response:g.credential_response}})}catch(u){return de(u)?{data:null,error:u}:{data:null,error:new vs("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new Ha("rpId is required for WebAuthn registration")};try{if(!Wv())return{data:null,error:new vs("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(y=>{var w;return(w=y.data)===null||w===void 0?void 0:w.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===e&&b.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:h};const{data:g,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:i,rpOrigins:r},signal:a},{create:l});return g?this._verify({factorId:u.id,challengeId:g.challengeId,webauthn:{rpId:i,rpOrigins:r,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(u){return de(u)?{data:null,error:u}:{data:null,error:new vs("Unexpected error in register",u)}}}}hM();const MM={url:AI,storageKey:kI,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:RI,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Zv(t,e,i){return await i()}const hr={};class Ga{get jwks(){var e,i;return(i=(e=hr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){hr[this.storageKey]=Object.assign(Object.assign({},hr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=hr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){hr[this.storageKey]=Object.assign(Object.assign({},hr[this.storageKey]),{cachedAt:e})}constructor(e){var i,r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},MM),e);if(this.storageKey=l.storageKey,this.instanceID=(i=Ga.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,Ga.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&kt()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new uM({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Nx(l.fetch),this.lock=l.lock||Zv,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&kt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=fM:this.lock=Zv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new IM(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Tx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Qv(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Qv(this.memoryStorage)),kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(h){this._debug("#broadcastChannel","error",h)}})}this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${_x}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},r="none";if(kt()&&(i=BI(window.location.href),this._isImplicitGrantCallback(i)?r="implicit":await this._isPKCECallback(i)&&(r="pkce")),kt()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:l}=await this._getSessionFromURL(i,r);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),UI(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:u,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return de(i)?this._returnResult({error:i}):this._returnResult({error:new vs("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,r,a;try{const l=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Tn}),{data:u,error:h}=l;if(h||!u)return this._returnResult({data:{user:null,session:null},error:h});const g=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(de(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var i,r,a;try{let l;if("email"in e){const{email:y,password:w,options:b}=e;let S=null,E=null;this.flowType==="pkce"&&([S,E]=await ur(this.storage,this.storageKey)),l=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:y,password:w,data:(i=b==null?void 0:b.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:S,code_challenge_method:E},xform:Tn})}else if("phone"in e){const{phone:y,password:w,options:b}=e;l=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:w,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},channel:(a=b==null?void 0:b.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:Tn})}else throw new El("You must provide either an email or phone number and a password");const{data:u,error:h}=l;if(h||!u)return await At(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const g=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(await At(this.storage,`${this.storageKey}-code-verifier`),de(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let i;if("email"in e){const{email:l,password:u,options:h}=e;i=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Yv})}else if("phone"in e){const{phone:l,password:u,options:h}=e;i=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Yv})}else throw new El("You must provide either an email or phone number and a password");const{data:r,error:a}=i;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!r||!r.session||!r.user){const l=new cr;return this._returnResult({data:{user:null,session:null},error:l})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(i){if(de(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,r,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,r,a,l,u,h,g,p,y,w,b;let S,E;if("message"in e)S=e.message,E=e.signature;else{const{chain:A,wallet:N,statement:C,options:k}=e;let R;if(kt())if(typeof N=="object")R=N;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")R=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=N}const M=new URL((i=k==null?void 0:k.url)!==null&&i!==void 0?i:window.location.href),z=await R.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!z||z.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=Ax(z[0]);let j=(r=k==null?void 0:k.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!j){const q=await R.request({method:"eth_chainId"});j=pM(q)}const B={domain:M.host,address:O,statement:C,uri:M.href,version:"1",chainId:j,nonce:(a=k==null?void 0:k.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(u=(l=k==null?void 0:k.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(h=k==null?void 0:k.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(g=k==null?void 0:k.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=k==null?void 0:k.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=k==null?void 0:k.signInWithEthereum)===null||y===void 0?void 0:y.resources};S=gM(B),E=await R.request({method:"personal_sign",params:[mM(S),O]})}try{const{data:A,error:N}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:E},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Tn});if(N)throw N;if(!A||!A.session||!A.user){const C=new cr;return this._returnResult({data:{user:null,session:null},error:C})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:N})}catch(A){if(de(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(e){var i,r,a,l,u,h,g,p,y,w,b,S;let E,A;if("message"in e)E=e.message,A=e.signature;else{const{chain:N,wallet:C,statement:k,options:R}=e;let M;if(kt())if(typeof C=="object")M=C;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))M=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=C}const z=new URL((i=R==null?void 0:R.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in M&&M.signIn){const O=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R==null?void 0:R.signInWithSolana),{version:"1",domain:z.host,uri:z.href}),k?{statement:k}:null));let j;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")j=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)j=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)E=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),A=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${z.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${z.href}`,`Issued At: ${(a=(r=R==null?void 0:R.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=R==null?void 0:R.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((u=R==null?void 0:R.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((h=R==null?void 0:R.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((g=R==null?void 0:R.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((p=R==null?void 0:R.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((w=(y=R==null?void 0:R.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||w===void 0)&&w.length?["Resources",...R.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const O=await M.signMessage(new TextEncoder().encode(E),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=O}}try{const{data:N,error:C}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:ys(A)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Tn});if(C)throw C;if(!N||!N.session||!N.user){const k=new cr;return this._returnResult({data:{user:null,session:null},error:k})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:C})}catch(N){if(de(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(e){const i=await hs(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(i??"").split("/");try{if(!r&&this.flowType==="pkce")throw new OI;const{data:l,error:u}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Tn});if(await At(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const h=new cr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:u})}catch(l){if(await At(this.storage,`${this.storageKey}-code-verifier`),de(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:i,provider:r,token:a,access_token:l,nonce:u}=e,h=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Tn}),{data:g,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const y=new cr;return this._returnResult({data:{user:null,session:null},error:y})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(i){if(de(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,r,a,l,u;try{if("email"in e){const{email:h,options:g}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await ur(this.storage,this.storageKey));const{error:w}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(i=g==null?void 0:g.data)!==null&&i!==void 0?i:{},create_user:(r=g==null?void 0:g.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in e){const{phone:h,options:g}=e,{data:p,error:y}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(u=g==null?void 0:g.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y})}throw new El("You must provide either an email or phone number.")}catch(h){if(await At(this.storage,`${this.storageKey}-code-verifier`),de(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var i,r;try{let a,l;"options"in e&&(a=(i=e.options)===null||i===void 0?void 0:i.redirectTo,l=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:h}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:Tn});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const g=u.session,p=u.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(a){if(de(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var i,r,a,l,u;try{let h=null,g=null;this.flowType==="pkce"&&([h,g]=await ur(this.storage,this.storageKey));const p=await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:g}),headers:this.headers,xform:oM});return!((l=p.data)===null||l===void 0)&&l.url&&kt()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(await At(this.storage,`${this.storageKey}-code-verifier`),de(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:r}=e;if(r)throw r;if(!i)throw new tn;const{error:a}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(de(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:l}=e,{error:u}=await ge(this.fetch,"POST",i,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:r,type:a,options:l}=e,{data:u,error:h}=await ge(this.fetch,"POST",i,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new El("You must provide either an email or phone number and a type")}catch(i){if(de(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await i()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=i();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await hs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Ud:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const u=await hs(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Pd()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=iM(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(e){try{return e?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Hi}):await this._useSession(async i=>{var r,a,l;const{data:u,error:h}=i;if(h)throw h;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new tn}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Hi})})}catch(i){if(de(i))return Od(i)&&(await this._removeSession(),await At(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async r=>{const{data:a,error:l}=r;if(l)throw l;if(!a.session)throw new tn;const u=a.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await ur(this.storage,this.storageKey));const{data:p,error:y}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:u.access_token,xform:Hi});if(y)throw y;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(r){if(await At(this.storage,`${this.storageKey}-code-verifier`),de(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new tn;const i=Date.now()/1e3;let r=i,a=!0,l=null;const{payload:u}=Nl(e.access_token);if(u.exp&&(r=u.exp,a=r<=i),a){const{data:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-i,expires_at:r},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(i){if(de(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var r;if(!e){const{data:u,error:h}=i;if(h)throw h;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new tn;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(de(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!kt())throw new Tl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Tl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Hv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tl("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Hv("No code detected.");const{data:k,error:R}=await this._exchangeCodeForSession(e.code);if(R)throw R;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:l,refresh_token:u,expires_in:h,expires_at:g,token_type:p}=e;if(!l||!h||!u||!p)throw new Tl("No session defined in URL");const y=Math.round(Date.now()/1e3),w=parseInt(h);let b=y+w;g&&(b=parseInt(g));const S=b-y;S*1e3<=gr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${w}s`);const E=b-w;y-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,b,y):y-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,b,y);const{data:A,error:N}=await this._getUser(l);if(N)throw N;const C={provider_token:r,provider_refresh_token:a,access_token:l,expires_in:w,expires_at:b,refresh_token:u,token_type:p,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(r){if(de(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await hs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var r;const{data:a,error:l}=i;if(l&&!Od(l))return this._returnResult({error:l});const u=(r=a.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(jI(h)&&(h.status===404||h.status===401||h.status===403)||Od(h)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await At(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=GI(),r={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async i=>{var r,a;try{const{data:{session:l},error:u}=i;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,i={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await ur(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(l){if(await At(this.storage,`${this.storageKey}-code-verifier`),de(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:i,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(de(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:r,error:a}=await this._useSession(async l=>{var u,h,g,p,y;const{data:w,error:b}=l;if(b)throw b;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",S,{headers:this.headers,jwt:(y=(p=w.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(a)throw a;return kt()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(de(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var r;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:u,provider:h,token:g,access_token:p,nonce:y}=e,w=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=l==null?void 0:l.access_token)!==null&&r!==void 0?r:void 0,body:{provider:h,id_token:g,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Tn}),{data:b,error:S}=w;return S?this._returnResult({data:{user:null,session:null},error:S}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new cr}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:S}))}catch(a){if(await At(this.storage,`${this.storageKey}-code-verifier`),de(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var r,a;const{data:l,error:u}=i;if(u)throw u;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(i){if(de(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const r=Date.now();return await JI(async a=>(a>0&&await FI(200*Math.pow(2,a-1)),this._debug(i,"refreshing attempt",a),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Tn})),(a,l)=>{const u=200*Math.pow(2,a);return l&&Ld(l)&&Date.now()+u-r<gr})}catch(r){if(this._debug(i,"error",r),de(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",r),kt()&&!i.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,i;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await hs(this.storage,this.storageKey);if(a&&this.userStorage){let u=await hs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await vr(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Pd()}else if(a&&!a.user&&!a.user){const u=await hs(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(a.user=u.user,await At(this.storage,this.storageKey+"-user"),await vr(this.storage,this.storageKey,a)):a.user=Pd()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const l=((i=a.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Ud;if(this._debug(r,`session has${l?"":" not"} expired with margin of ${Ud}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),Ld(u)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(a.access_token);!h&&(u!=null&&u.user)?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(r,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var i,r;if(!e)throw new tn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new dc;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new tn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={data:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(a,"error",l),de(l)){const u={data:null,error:l};return Ld(l)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,i,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",i,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:i});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,i)}catch(g){l.push(g)}});if(await Promise.all(u),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await At(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},e),r=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&i.user&&await vr(this.userStorage,this.storageKey+"-user",{user:i.user});const a=Object.assign({},i);delete a.user;const l=Jv(a);await vr(this.storage,this.storageKey,l)}else{const a=Jv(i);await vr(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await At(this.storage,this.storageKey),await At(this.storage,this.storageKey+"-code-verifier"),await At(this.storage,this.storageKey+"-user"),this.userStorage&&await At(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&kt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:r}}=i;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/gr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${gr}ms, refresh threshold is ${pf} ticks`),a<=pf&&await this._callRefreshToken(r.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Cx)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,r){const a=[`provider=${encodeURIComponent(i)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[l,u]=await ur(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(h.toString())}if(r!=null&&r.queryParams){const l=new URLSearchParams(r.queryParams);a.push(l.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var r;const{data:a,error:l}=i;return l?this._returnResult({data:null,error:l}):await ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(i){if(de(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var r,a;const{data:l,error:u}=i;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:p}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(i){if(de(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var r;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?SM(e.webauthn.credential_response):EM(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:g}=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:g}))})}catch(i){if(de(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var r;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const u=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});if(u.error)return u;const{data:h}=u;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:wM(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:_M(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(de(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:r}=await this.getUser();if(r)return{data:null,error:r};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=i==null?void 0:i.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(e){var i,r,a,l;if(e)try{const{payload:S}=Nl(e);let E=null;S.aal&&(E=S.aal);let A=E;const{data:{user:N},error:C}=await this.getUser(e);if(C)return this._returnResult({data:null,error:C});((r=(i=N==null?void 0:N.factors)===null||i===void 0?void 0:i.filter(M=>M.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(A="aal2");const R=S.amr||[];return{data:{currentLevel:E,nextLevel:A,currentAuthenticationMethods:R},error:null}}catch(S){if(de(S))return this._returnResult({data:null,error:S});throw S}const{data:{session:u},error:h}=await this.getSession();if(h)return this._returnResult({data:null,error:h});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=Nl(u.access_token);let p=null;g.aal&&(p=g.aal);let y=p;((l=(a=u.user.factors)===null||a===void 0?void 0:a.filter(S=>S.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(y="aal2");const b=g.amr||[];return{data:{currentLevel:p,nextLevel:y,currentAuthenticationMethods:b},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:r},error:a}=i;return a?this._returnResult({data:null,error:a}):r?await ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new tn})})}catch(i){if(de(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new tn});const u=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&kt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,i){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new tn});const u=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&kt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:i},error:r}=e;return r?this._returnResult({data:null,error:r}):i?await ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new tn})})}catch(e){if(de(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async i=>{const{data:{session:r},error:a}=i;return a?this._returnResult({data:null,error:a}):r?(await ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new tn})})}catch(i){if(de(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,i={keys:[]}){let r=i.keys.find(h=>h.kid===e);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(h=>h.kid===e),r&&this.jwks_cached_at+MI>a)return r;const{data:l,error:u}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,r=l.keys.find(h=>h.kid===e),!r)?null:r}async getClaims(e,i={}){try{let r=e;if(!r){const{data:S,error:E}=await this.getSession();if(E||!S.session)return this._returnResult({data:null,error:E});r=S.session.access_token}const{header:a,payload:l,signature:u,raw:{header:h,payload:g}}=Nl(r);i!=null&&i.allowExpired||eM(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!p){const{error:S}=await this.getUser(r);if(S)throw S;return{data:{claims:l,header:a,signature:u},error:null}}const y=tM(a.alg),w=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,w,u,VI(`${h}.${g}`)))throw new vf("Invalid JWT signature");return{data:{claims:l,header:a,signature:u},error:null}}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}}Ga.nextInstanceID={};const DM=Ga,jM="2.95.3";let Ia="";typeof Deno<"u"?Ia="deno":typeof document<"u"?Ia="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ia="react-native":Ia="node";const UM={"X-Client-Info":`supabase-js-${Ia}/${jM}`},OM={headers:UM},LM={schema:"public"},PM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zM={};function Ba(t){"@babel/helpers - typeof";return Ba=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ba(t)}function qM(t,e){if(Ba(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(Ba(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VM(t){var e=qM(t,"string");return Ba(e)=="symbol"?e:e+""}function HM(t,e,i){return(e=VM(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ey(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,r)}return i}function st(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?ey(Object(i),!0).forEach(function(r){HM(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ey(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}const GM=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),BM=()=>Headers,$M=(t,e,i)=>{const r=GM(i),a=BM();return async(l,u)=>{var h;const g=(h=await e())!==null&&h!==void 0?h:t;let p=new a(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),r(l,st(st({},u),{},{headers:p}))}};function FM(t){return t.endsWith("/")?t:t+"/"}function JM(t,e){var i,r;const{db:a,auth:l,realtime:u,global:h}=t,{db:g,auth:p,realtime:y,global:w}=e,b={db:st(st({},g),a),auth:st(st({},p),l),realtime:st(st({},y),u),storage:{},global:st(st(st({},w),h),{},{headers:st(st({},(i=w==null?void 0:w.headers)!==null&&i!==void 0?i:{}),(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?b.accessToken=t.accessToken:delete b.accessToken,b}function KM(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(FM(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var YM=class extends DM{constructor(t){super(t)}},XM=class{constructor(t,e,i){var r,a;this.supabaseUrl=t,this.supabaseKey=e;const l=KM(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:LM,realtime:zM,auth:st(st({},PM),{},{storageKey:u}),global:OM},g=JM(i??{},h);if(this.storageKey=(r=g.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(y,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=g.auth)!==null&&p!==void 0?p:{},this.headers,g.global.fetch)}this.fetch=$M(e,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(st({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new jR(new URL("rest/v1",l).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch,timeout:g.db.timeout,urlLengthLimit:g.db.urlLengthLimit}),this.storage=new CI(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new NR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,i)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,i;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:r,userStorage:a,storageKey:l,flowType:u,lock:h,debug:g,throwOnError:p},y,w){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new YM({url:this.authUrl.href,headers:st(st({},b),y),storageKey:l,autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:r,userStorage:a,flowType:u,lock:h,debug:g,throwOnError:p,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new QR(this.realtimeUrl.href,st(st({},t),{},{params:st(st({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const QM=(t,e,i)=>new XM(t,e,i);function WM(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const i=e.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}WM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ZM="https://zedjyffrerxwgcqrlyab.supabase.co",e5="sb_publishable_oxJDptCT_nQeXPmv3V62Bw_HV0CWrxs",yf=QM(ZM,e5),Ka=async(t="vork-profilepic-bucket",e,i)=>{const r=t==="vork-profile pic bucket"||t==="vork-profile%20pic%20bucket"?"vork-profilepic-bucket":t,{data:a,error:l}=await yf.storage.from(r).upload(e,i,{cacheControl:"3600",upsert:!0});if(l)throw l.message.includes("Bucket not found")&&console.error(`CRITICAL: The bucket "${r}" was not found. Please create it in your Supabase dashboard and set it to Public.`),console.error("Supabase Upload Error:",l),l;const{data:{publicUrl:u}}=yf.storage.from(r).getPublicUrl(a.path);return`${u}?t=${Date.now()}`},t5=async(t,e)=>{const{error:i}=await yf.storage.from(t).remove([e]);i&&console.warn("Supabase Delete Warning:",i.message)},n5=t=>{if(!t||!t.includes("/storage/v1/object/public/"))return null;try{const e=t.split("/public/");if(e.length<2)return null;const i=e[1],r=i.indexOf("/");if(r===-1)return null;const a=i.substring(r+1).split("?")[0];return decodeURIComponent(a)}catch{return null}},i5=t=>{const e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),a=new Uint8Array(r);for(let l=0;l<e.length;l++)a[l]=e.charCodeAt(l);return new Blob([r],{type:i})},s5=({onClose:t,onAddOrder:e})=>{const[i,r]=P.useState("input"),[a,l]=P.useState(""),[u,h]=P.useState([]),[g,p]=P.useState(null),[y,w]=P.useState(!1),[b,S]=P.useState(""),[E,A]=P.useState(""),[N,C]=P.useState("locating"),k=P.useRef(null),R=P.useRef(null);P.useEffect(()=>{const B=setTimeout(()=>C("locked"),2e3);return()=>clearTimeout(B)},[]);const M=B=>{const q=B.target.files;q&&Array.from(q).forEach(W=>{const te=new FileReader;te.onloadend=()=>{typeof te.result=="string"&&h(ae=>[...ae,te.result].slice(0,4))},te.readAsDataURL(W)})},z=B=>{h(q=>q.filter((W,te)=>te!==B))},O=async()=>{const B=String(a).trim();if(!(!B&&u.length===0)){r("analyzing");try{const q=new _R({apiKey:void 0}),W=[{text:`Tu es un expert en btiment et urgences domestiques. Analyse ce problme. 
        Photos fournies: ${u.length}. 
        Description: "${B.substring(0,1e3)}".
        
        Tche:
        1. Identifie la catgorie d'artisan (Plomberie, lectricit, Climatisation, Serrurerie, Vitrerie, etc.).
        2. Estime la priorit (Basse, Moyenne, Haute, Critique).
        3. Rdige un rsum technique court (1 phrase).
        4. Donne un conseil de scurit immdiat (trs important).
        5. Estime une fourchette de prix approximative en FCFA (ex: "15.000 - 30.000").
        
        Retourne un JSON.`}];u.forEach(ee=>{const H=String(ee).split(",");if(H.length<2)return;const Z=H[1],ie=H[0].split(";")[0].split(":");if(ie.length<2)return;const ve=ie[1];Z&&ve&&W.push({inlineData:{data:String(Z),mimeType:String(ve)}})});const ae=(await q.models.generateContent({model:"gemini-2.0-flash",contents:[{role:"user",parts:W}],config:{responseMimeType:"application/json",responseSchema:{type:"object",properties:{category:{type:"string"},priority:{type:"string",enum:["Basse","Moyenne","Haute","Critique"]},summary:{type:"string"},advice:{type:"string"},estimatedPriceRange:{type:"string"}},required:["category","priority","summary","advice"]}}})).text;if(!ae)throw new Error("Empty response from AI");const K=JSON.parse(ae);p(K),S(K.category),A(K.priority),r("proposal")}catch(q){console.error("AI Analysis failed:",q);const W={category:"Multi-services",priority:"Haute",summary:a||"Problme technique urgent",advice:"Coupez les arrives (eau/lec) et ne touchez  rien en attendant le pro.",estimatedPriceRange:"Sur devis"};p(W),S(W.category),A(W.priority),r("proposal")}}},j=async()=>{r("matching");const B=`urgent-${Date.now()}`,q=[];try{for(const[ee,ce]of u.entries()){const H=i5(ce),Z=`orders/${B}/urgent_${ee}_${Date.now()}.jpg`,ie=await Ka("vork-profilepic-bucket",Z,H);q.push(ie)}}catch(ee){console.error("Upload to Supabase failed:",ee)}const W=y?b:(g==null?void 0:g.category)||"Urgence",te=y?E:(g==null?void 0:g.priority)||"Haute",ae=new Date().toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),K={id:B,category:W,status:"EN ATTENTE D'EXPERT",date:ae,description:((g==null?void 0:g.summary)||a)+(g!=null&&g.estimatedPriceRange?` (Budget est.: ${g.estimatedPriceRange} FCFA)`:""),location:"Dakar, Localisation GPS",city:"Dakar",isUrgent:!0,priority:te,responses:{userId:""},images:q,targetedArtisans:[],contactedArtisanIds:[],currentRadius:1,createdAt:new Date().toISOString()};setTimeout(()=>{e?e(K):t()},3500)};return d.jsxs("div",{className:"fixed inset-0 z-[100] bg-[#0a0a0c] flex flex-col animate-in fade-in duration-300 overflow-y-auto no-scrollbar pb-10 font-sans",children:[d.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-[600px] bg-gradient-to-b from-red-600/20 via-transparent to-transparent blur-[100px] pointer-events-none"}),d.jsxs("header",{className:"px-6 pt-12 pb-6 flex items-center justify-between sticky top-0 bg-[#0a0a0c]/80 backdrop-blur-xl z-50 border-b border-white/5",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"size-10 bg-red-600 rounded-xl flex items-center justify-center shadow-[0_0_20px_rgba(220,38,38,0.4)]",children:d.jsx(li,{className:"size-5 text-white animate-pulse"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-black text-white tracking-tight uppercase leading-none",children:"URGENCE VORK"}),d.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[d.jsxs("span",{className:"relative flex h-2 w-2",children:[d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),d.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]}),d.jsx("p",{className:"text-[10px] text-red-400 font-bold uppercase tracking-widest",children:i==="matching"?"Recherche active...":"Mode Assistance"})]})]})]}),d.jsx("button",{onClick:t,className:"size-10 bg-white/5 rounded-xl flex items-center justify-center text-white border border-white/10 hover:bg-white/10 active:scale-95 transition-all",children:d.jsx(yn,{size:20})})]}),d.jsxs("div",{className:"bg-orange-500/10 border-y border-orange-500/20 px-6 py-2 flex items-center gap-3",children:[d.jsx(Jg,{size:16,className:"text-orange-500 shrink-0"}),d.jsx("p",{className:"text-[10px] text-orange-200 font-medium leading-tight",children:"Conseil scurit : En cas de danger (feu, gaz), vacuez immdiatement avant d'utiliser l'app."})]}),d.jsxs("div",{className:"px-6 pt-6 flex-1 flex flex-col",children:[i==="input"&&d.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 flex flex-col flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 bg-white/5 p-3 rounded-2xl border border-white/5 self-start",children:[d.jsx("div",{className:`size-8 rounded-xl flex items-center justify-center ${N==="locked"?"bg-emerald-500/20 text-emerald-500":"bg-white/10 text-slate-400"}`,children:d.jsx(di,{size:16,className:N==="locating"?"animate-bounce":""})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:"Localisation"}),d.jsx("p",{className:`text-xs font-bold ${N==="locked"?"text-white":"text-slate-400"}`,children:N==="locked"?"Prcision: 5 mtres":"Recherche GPS..."})]})]}),d.jsxs("div",{className:"relative group",children:[d.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1 mb-2 block",children:"Que se passe-t-il ?"}),d.jsx("textarea",{value:a,onChange:B=>l(B.target.value),placeholder:"Ex: Une canalisation a clat dans la cuisine...",className:"w-full h-32 bg-white/5 border border-white/10 rounded-[2rem] p-6 text-lg text-white placeholder:text-slate-600 focus:outline-none focus:border-red-500/50 transition-all resize-none shadow-inner"}),d.jsx("div",{className:"absolute bottom-4 right-4 flex gap-2",children:d.jsx("button",{className:"size-10 bg-white/10 rounded-full flex items-center justify-center text-slate-400 hover:text-white hover:bg-red-600 transition-all",children:d.jsx(fy,{size:18})})})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex justify-between items-center px-2",children:[d.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.3em]",children:"Preuves (IA)"}),d.jsxs("span",{className:"text-[9px] text-red-500/50 font-bold uppercase",children:[u.length,"/4"]})]}),d.jsxs("div",{className:"flex gap-3 overflow-x-auto no-scrollbar pb-2",children:[d.jsxs("button",{onClick:()=>{var B;return(B=R.current)==null?void 0:B.click()},className:"size-24 shrink-0 rounded-[1.8rem] bg-red-600/10 border-2 border-dashed border-red-600/30 flex flex-col items-center justify-center gap-2 group hover:bg-red-600 hover:border-red-600 transition-all active:scale-95",children:[d.jsx(Cr,{size:24,className:"text-red-500 group-hover:text-white"}),d.jsx("span",{className:"text-[8px] font-black text-red-500 group-hover:text-white uppercase tracking-widest",children:"Photo"})]}),d.jsxs("button",{onClick:()=>{var B;return(B=k.current)==null?void 0:B.click()},className:"size-24 shrink-0 rounded-[1.8rem] bg-white/5 border-2 border-dashed border-white/10 flex flex-col items-center justify-center gap-2 group hover:border-purple-500/30 transition-all active:scale-95",children:[d.jsx(bs,{size:20,className:"text-slate-500 group-hover:text-purple-500"}),d.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Galerie"})]}),u.map((B,q)=>d.jsxs("div",{className:"relative size-24 shrink-0 rounded-[1.8rem] overflow-hidden border border-white/10 group bg-[#121214]",children:[d.jsx("img",{src:B,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",alt:"Urgency preview"}),d.jsx("button",{onClick:()=>z(q),className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(Fa,{size:20,className:"text-red-500"})})]},q))]}),d.jsx("input",{type:"file",ref:R,accept:"image/*",capture:"environment",className:"hidden",onChange:M}),d.jsx("input",{type:"file",ref:k,accept:"image/*",multiple:!0,className:"hidden",onChange:M})]}),d.jsx("div",{className:"mt-auto pb-6",children:d.jsxs("button",{onClick:O,disabled:!a.trim()&&u.length===0,className:"w-full py-6 rounded-[2.5rem] bg-gradient-to-r from-red-600 to-orange-600 text-white font-black text-sm uppercase tracking-[0.2em] shadow-[0_10px_40px_rgba(220,38,38,0.4)] disabled:opacity-50 disabled:shadow-none transition-all active:scale-[0.98] flex items-center justify-center gap-3 relative overflow-hidden group",children:[d.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Lancer l'alerte ",d.jsx(li,{size:18,className:"fill-current"})]}),d.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]})})]}),i==="analyzing"&&d.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-8 animate-in fade-in duration-500",children:[d.jsx("div",{className:"relative",children:d.jsxs("div",{className:"size-40 rounded-full border-4 border-red-600/20 flex items-center justify-center relative",children:[d.jsx("div",{className:"absolute inset-0 rounded-full border-t-4 border-red-600 animate-spin"}),d.jsx("div",{className:"absolute inset-4 rounded-full border-4 border-red-600/10"}),d.jsx(Tr,{size:48,className:"text-red-500 animate-pulse"})]})}),d.jsxs("div",{className:"text-center space-y-2",children:[d.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tight",children:"Analyse IA en cours..."}),d.jsx("p",{className:"text-slate-500 text-sm animate-pulse font-medium",children:"Diagnostic des images et de la description"})]})]}),i==="proposal"&&g&&d.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-6 duration-500 pb-20",children:[d.jsxs("div",{className:"glass-card p-8 rounded-[3rem] bg-gradient-to-br from-[#1a1a20] to-[#121214] border border-white/10 relative overflow-hidden shadow-2xl",children:[d.jsx("div",{className:"absolute -top-20 -right-20 size-64 bg-red-600/10 blur-[80px]"}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Tr,{size:16,className:"text-purple-400"}),d.jsx("span",{className:"text-[10px] font-black text-purple-400 uppercase tracking-widest",children:"Diagnostic IA"})]}),d.jsxs("button",{onClick:()=>w(!y),className:"text-[10px] font-black text-slate-500 hover:text-white uppercase tracking-widest flex items-center gap-1 transition-colors",children:[d.jsx(_f,{size:12})," ",y?"Fermer":"Modifier"]})]}),d.jsxs("div",{className:"mb-6 space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:`size-12 rounded-2xl flex items-center justify-center ${(y?E:g.priority)==="Critique"?"bg-red-600 text-white shadow-lg shadow-red-600/30":"bg-orange-500/20 text-orange-500"}`,children:d.jsx(dS,{size:24})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:"Priorit"}),y?d.jsx("select",{value:E,onChange:B=>A(B.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg px-2 py-1 text-white font-bold text-sm mt-1 focus:outline-none focus:border-red-500",children:["Basse","Moyenne","Haute","Critique"].map(B=>d.jsx("option",{value:B,className:"bg-black",children:B},B))}):d.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tight",children:g.priority})]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"size-12 rounded-2xl bg-indigo-600/20 text-indigo-400 flex items-center justify-center",children:d.jsx(li,{size:24})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:"Expert Requis"}),y?d.jsx("select",{value:b,onChange:B=>S(B.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg px-2 py-1 text-white font-bold text-sm mt-1 focus:outline-none focus:border-indigo-500",children:Nr.map(B=>d.jsx("option",{value:B.name,className:"bg-black",children:B.name},B.name))}):d.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tight",children:g.category})]})]})]}),d.jsx("div",{className:"bg-black/30 rounded-2xl p-4 border border-white/5",children:d.jsxs("p",{className:"text-slate-300 text-sm font-medium leading-relaxed",children:['"',g.summary,'"']})}),d.jsxs("div",{className:"mt-4 flex items-start gap-3 p-4 bg-orange-500/5 rounded-2xl border border-orange-500/10",children:[d.jsx(Jg,{size:18,className:"text-orange-500 mt-0.5 shrink-0"}),d.jsxs("p",{className:"text-xs text-orange-200/80 font-medium italic",children:['"',g.advice,'"']})]})]})]}),d.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-white/5 border border-white/5 rounded-3xl",children:[d.jsx("span",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Budget Estim"}),d.jsxs("span",{className:"text-white font-black text-sm tracking-tight",children:[g.estimatedPriceRange||"Sur devis"," FCFA"]})]}),d.jsxs("button",{onClick:j,className:"w-full py-6 rounded-[2.5rem] bg-white text-black font-black text-sm uppercase tracking-[0.2em] shadow-[0_0_40px_rgba(255,255,255,0.2)] active:scale-[0.98] transition-all flex items-center justify-center gap-3 mt-4 hover:bg-slate-200",children:["Confirmer et Chercher ",d.jsx(ci,{size:18})]})]}),i==="matching"&&d.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-12 animate-in zoom-in-95 duration-500",children:[d.jsxs("div",{className:"relative size-80 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-red-600/5 rounded-full animate-ping [animation-duration:2s]"}),d.jsx("div",{className:"absolute inset-10 bg-red-600/10 rounded-full animate-ping [animation-duration:2s] [animation-delay:0.5s]"}),d.jsx("div",{className:"absolute inset-20 bg-red-600/20 rounded-full animate-ping [animation-duration:2s] [animation-delay:1s]"}),d.jsx("div",{className:"absolute inset-0 rounded-full border border-red-600/30 overflow-hidden",children:d.jsx("div",{className:"w-full h-1/2 bg-gradient-to-b from-red-600/20 to-transparent origin-bottom animate-[spin_2s_linear_infinite]"})}),d.jsx("div",{className:"relative size-24 bg-red-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(220,38,38,0.6)] z-10 border-4 border-[#0a0a0c]",children:d.jsx(ci,{className:"size-10 text-white animate-bounce"})}),d.jsx("div",{className:"absolute top-10 right-20 size-3 bg-white rounded-full animate-bounce [animation-delay:0.2s]"}),d.jsx("div",{className:"absolute bottom-20 left-10 size-3 bg-white rounded-full animate-bounce [animation-delay:0.8s]"}),d.jsx("div",{className:"absolute bottom-10 right-10 size-3 bg-white rounded-full animate-bounce [animation-delay:1.5s]"})]}),d.jsxs("div",{className:"text-center space-y-6 max-w-xs mx-auto",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("h3",{className:"text-3xl font-black text-white uppercase tracking-tighter",children:"Recherche..."}),d.jsxs("p",{className:"text-slate-500 text-sm font-medium",children:["Nous contactons les experts ",d.jsx("span",{className:"text-white font-bold",children:y?b:g==null?void 0:g.category}),"  proximit."]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-3 bg-white/5 px-4 py-3 rounded-xl border border-white/5 animate-in slide-in-from-bottom duration-500",children:[d.jsx(Ql,{size:16,className:"text-emerald-500"}),d.jsx("span",{className:"text-xs font-bold text-white",children:"Analyse termine"})]}),d.jsxs("div",{className:"flex items-center gap-3 bg-white/5 px-4 py-3 rounded-xl border border-white/5 animate-in slide-in-from-bottom duration-500 delay-300",children:[d.jsx(Lt,{size:16,className:"text-indigo-500 animate-spin"}),d.jsx("span",{className:"text-xs font-bold text-white",children:"3 Experts notifis..."})]})]})]})]})]})]})},r5=({setView:t,orders:e,archivedOrders:i=[],onDeleteOrder:r,onArchiveOrder:a,onSelectOrder:l,onOpenChat:u})=>{const[h,g]=P.useState("En cours"),[p,y]=P.useState(null),[w,b]=P.useState(null),[S,E]=P.useState(null),A=h==="En cours"?e:i,N=async(C,k)=>{C.preventDefault(),C.stopPropagation(),b(null),y(k.id);try{r&&await r(k)}catch(R){console.error("Critical failure deleting order:",R)}finally{y(null)}};return d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] animate-in slide-in-from-right duration-500 pb-32",children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 sticky top-0 bg-[#0a0a0c]/90 backdrop-blur-xl z-50 border-b border-white/5 flex items-center justify-between",children:[d.jsx("h1",{className:"text-2xl font-black text-white tracking-tight uppercase",children:"Mes Commandes"}),d.jsx("div",{className:"flex gap-2",children:d.jsx("button",{className:"size-11 bg-white/5 rounded-2xl flex items-center justify-center text-purple-400 border border-purple-500/20 shadow-[0_0_15px_rgba(168,85,247,0.15)] active:scale-90 transition-all",children:d.jsx(Ar,{size:20})})})]}),d.jsx("div",{className:"px-6 mt-6 flex gap-2",children:["En cours","Termin"].map(C=>d.jsx("button",{onClick:()=>g(C),className:`flex-1 py-4 rounded-[1.5rem] text-[11px] font-black uppercase tracking-widest border transition-all ${h===C?"bg-[#1a1a20] border-white/20 text-white shadow-[0_10px_30px_rgba(0,0,0,0.5)]":"bg-transparent border-transparent text-slate-600"}`,children:C},C))}),d.jsx("div",{className:"px-6 mt-8 space-y-6",children:A.length>0?A.map(C=>{var te,ae;const k=C.responses&&C.responses.length>0,R=p===C.id,M=w===C.id,z=C.status==="En cours"||C.status==="Accept",O=C.status==="En attente de clture",j=C.status==="EN ATTENTE D'EXPERT",B=h==="En cours"&&j&&!k,q=h==="Termin"||z||O,W=C.resultImages||((te=C.finalReview)==null?void 0:te.images)||[];return d.jsx("div",{className:`flex flex-col gap-2 transition-all duration-300 ${R?"opacity-0 scale-90 translate-y-4":"opacity-100 scale-100 translate-y-0"}`,children:d.jsxs("div",{onClick:()=>l==null?void 0:l(C),className:`glass-card p-6 rounded-[2.5rem] bg-[#121214]/60 border border-white/5 relative group transition-all active:scale-[0.98] hover:border-purple-500/30 ${C.isUrgent?"border-red-500/30":""}`,children:[C.isUrgent&&h!=="Termin"&&d.jsxs("div",{className:"absolute -top-3 left-8 px-3 py-1 bg-red-600 text-white rounded-full text-[8px] font-black uppercase tracking-widest flex items-center gap-1.5 shadow-lg shadow-red-600/30 border border-white/20",children:[d.jsx(li,{size:10,className:"fill-current"}),"Urgence ",C.priority]}),M&&d.jsxs("div",{className:"absolute inset-0 z-[70] bg-[#121214] rounded-[2.5rem] p-6 flex flex-col justify-center items-center text-center animate-in fade-in zoom-in-95 duration-200",onClick:K=>{K.preventDefault(),K.stopPropagation()},children:[d.jsx("div",{className:"size-12 bg-red-500/20 rounded-2xl flex items-center justify-center text-red-500 mb-3",children:d.jsx(bf,{size:24})}),d.jsx("h4",{className:"text-white font-black text-sm uppercase tracking-tight mb-1",children:"Annuler la demande ?"}),d.jsxs("div",{className:"flex gap-3 w-full mt-4",children:[d.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),b(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Retour"}),d.jsx("button",{onClick:K=>N(K,C),className:"flex-1 py-3 bg-red-600 text-white rounded-xl text-[10px] font-black uppercase tracking-widest",children:"Confirmer"})]})]}),R&&d.jsx("div",{className:"absolute inset-0 z-[70] bg-[#121214]/80 backdrop-blur-sm rounded-[2.5rem] flex items-center justify-center",children:d.jsx(Lt,{className:"animate-spin text-purple-500",size:32})}),d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`size-2.5 rounded-full ${z?"bg-emerald-500":C.isUrgent&&h!=="Termin"?"bg-red-500 animate-pulse":h==="Termin"?"bg-slate-700":"bg-purple-500"}`}),d.jsx("h3",{className:"text-white font-black text-base uppercase tracking-tight",children:C.category})]}),d.jsx("p",{className:"text-[10px] text-slate-600 font-black uppercase tracking-widest",children:C.date})]}),d.jsxs("div",{className:"flex flex-col items-end gap-2",children:[d.jsx("div",{className:"flex gap-2",children:B&&!M&&d.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),b(C.id)},className:"p-1.5 bg-red-500/10 rounded-lg text-red-500 border border-red-500/30 z-[60]",children:d.jsx(Fa,{size:14})})}),d.jsx("div",{className:`px-3 py-1.5 rounded-xl text-[9px] font-black uppercase tracking-[0.15em] border ${h==="Termin"?"bg-white/5 text-slate-500 border-white/10":j?"bg-orange-500/10 text-orange-500 border-orange-500/20":z?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":O?"bg-orange-500/10 text-orange-400 border-orange-500/20":"bg-emerald-500/10 text-emerald-400 border-emerald-500/20"}`,children:h==="Termin"?"ARCHIV":j?"EN ATTENTE":z?"ACCEPT":O?"VALIDATION...":C.status})]})]}),d.jsxs("p",{className:"text-slate-400 text-sm mb-5 line-clamp-1 italic font-medium leading-relaxed bg-white/5 p-3 rounded-2xl border border-white/5",children:['"',C.description,'"']}),h==="Termin"&&W.length>0&&d.jsxs("div",{className:"mb-5",children:[d.jsx("p",{className:"text-[8px] font-black text-emerald-500/70 uppercase tracking-widest mb-2 pl-1",children:"Photos du rsultat"}),d.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:W.map((K,ee)=>d.jsxs("div",{onClick:ce=>{ce.stopPropagation(),E(K)},className:"relative size-14 shrink-0 rounded-xl overflow-hidden border border-white/10 group cursor-pointer hover:border-emerald-500/50 transition-all bg-[#121214]",children:[d.jsx("img",{src:K,className:"w-full h-full object-cover",alt:"Result thumbnail"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-black/30 transition-all",children:d.jsx(xs,{size:12,className:"text-white"})})]},ee))})]}),d.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[d.jsxs("div",{onClick:K=>{C.artisanId&&(K.stopPropagation(),u==null||u({id:C.artisanId,name:C.artisanName,image:C.artisanImage,category:C.category}))},className:"flex items-center gap-2.5 text-slate-400 group/artisan hover:text-purple-400 transition-colors cursor-pointer",children:[d.jsx("div",{className:"size-8 bg-white/5 rounded-lg flex items-center justify-center group-hover/artisan:bg-purple-500/10 transition-colors",children:q?d.jsx(Pl,{className:"size-4 text-emerald-500"}):d.jsx(Pl,{className:"size-4 text-purple-400"})}),d.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest ${k||q?"text-purple-400":"text-slate-500"}`,children:q?C.artisanName||"Expert assign":k?`${(ae=C.responses)==null?void 0:ae.length} experts intresss`:"Recherche expert..."})]}),d.jsx($a,{size:18,className:"text-slate-700"})]})]})},C.id)}):d.jsxs("div",{className:"flex flex-col items-center justify-center py-32 opacity-20",children:[d.jsx(P1,{size:64,className:"mb-6 text-slate-500"}),d.jsx("p",{className:"text-xs font-black uppercase tracking-[0.4em] text-slate-500",children:h==="En cours"?"Aucune commande":"Historique vide"})]})}),S&&d.jsxs("div",{className:"fixed inset-0 z-[200] bg-black/95 flex items-center justify-center p-4 animate-in fade-in duration-300 backdrop-blur-sm",onClick:()=>E(null),children:[d.jsx("button",{onClick:()=>E(null),className:"absolute top-6 right-6 size-10 bg-white/10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors active:scale-90",children:d.jsx(yn,{size:20})}),d.jsx("img",{src:S,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl animate-in zoom-in-95 duration-300",alt:"Full screen view",onClick:C=>C.stopPropagation()})]})]})},a5=(t,e)=>{const i=Math.max(0,100-e*10),a=(t.rating||0)/5*100,l=t.averageResponseTime||60,u=Math.max(0,100-l*2),h=t.currentActiveJobs||0,g=t.maxConcurrentJobs||3,p=h<g?100:30,y=i*.4+a*.3+u*.2+p*.1;return{...t,realDistance:e,compositeScore:Number(y.toFixed(1)),scoreDetails:{distanceScore:i,ratingScore:a,reactivityScore:u,workloadScore:p}}},o5=async(t,e,i,r)=>{const a=[e.lat,e.lng],l=i*1e3,u=US(a,l),h=[],g=et(fe,"artisans");for(const w of u){const b=wt(g,kn("g"),Kw(w[0]),Yw(w[1]));h.push(Xl(b))}const p=await Promise.all(h),y=[];for(const w of p)for(const b of w.docs){if(r.has(b.id))continue;const E={...rt(b.data()),id:b.id};E.category===t&&E.available===!0&&E.locationCoords&&yy(a,[E.locationCoords.lat,E.locationCoords.lng])*1e3<=l&&y.push(E)}return y},Rx=async(t,e=1,i=[])=>Of(t,{lat:14.7167,lng:-17.4677},i),Of=async(t,e,i=[])=>{const r=[1,2,4,8,15,30],a=10,l=new Map,u=new Set(i);for(const g of r){if(l.size>=a)break;const p=await o5(t,e,g,u);for(const y of p)if(!l.has(y.id)){const w=yy([e.lat,e.lng],[y.locationCoords.lat,y.locationCoords.lng]),b=a5(y,w);l.set(y.id,b),u.add(y.id)}}return Array.from(l.values()).sort((g,p)=>p.compositeScore-g.compositeScore).slice(0,10).map(g=>g.id)},l5=async t=>{try{const e=Ae(fe,"orders",t),i=await An(e);if(!i.exists())return null;const r=i.data();if(r.status!=="EN ATTENTE D'EXPERT")return null;const a=r.category,l=r.locationCoords||{lat:14.7167,lng:-17.4677},u=[...r.contactedArtisanIds||[],...r.rejectedArtisanIds||[]],h=await Of(a,l,u);if(h.length>0){const g=h[0];return await Jt(e,{contactedArtisanIds:qd(g),targetedArtisans:qd(g),updatedAt:new Date().toISOString()}),g}return null}catch(e){return console.error("Error getting next best artisan:",e),null}},c5=async(t,e,i)=>Of(e,i),u5=({category:t,preSelectedArtisan:e,hideArtisanName:i,onBack:r,onSubmit:a})=>{const[l,u]=P.useState(""),[h,g]=P.useState([]),[p,y]=P.useState(!1),[w,b]=P.useState(""),S=P.useRef(null),E={lat:14.7167,lng:-17.4677},A=k=>{const R=k.target.files;R&&g(M=>[...M,...Array.from(R)].slice(0,4))},N=k=>{g(R=>R.filter((M,z)=>z!==k))},C=async()=>{y(!0),b("upload");const k=`ord-${Date.now()}`,R=[];try{if(h.length>0)for(const[O,j]of h.entries()){const B=j.name.split(".").pop(),q=`orders/${k}/initial_${O}_${Date.now()}.${B}`,W=await Ka("vork-profilepic-bucket",q,j);R.push(W)}b("matching");let M=[];e?M=[e.id]:M=await c5(k,t.name,E);const z={id:k,category:t.name,status:"EN ATTENTE D'EXPERT",date:new Date().toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),description:l,location:"Dakar, Localisation Actuelle",locationCoords:E,city:"Dakar",responses:[],images:R,targetedArtisans:M,isDirect:!!e,contactedArtisanIds:M,currentRadius:1,rejectedArtisanIds:[]};b("saving"),await a(z)}catch(M){console.error("Error publishing order:",M),alert("Une erreur est survenue lors de la publication."),y(!1)}};return d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] flex flex-col animate-in slide-in-from-bottom duration-500 pb-10",children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 flex items-center gap-4 sticky top-0 bg-[#0a0a0c]/90 backdrop-blur-xl z-50 border-b border-white/5",children:[d.jsx("button",{onClick:r,disabled:p,className:"size-10 bg-white/5 rounded-xl flex items-center justify-center text-white border border-white/10",children:d.jsx(It,{className:"w-5 h-5"})}),d.jsxs("div",{children:[d.jsxs("h1",{className:"text-xl font-black text-white tracking-tight uppercase",children:["Demande ",t.name]}),d.jsx("p",{className:"text-[10px] text-purple-400 font-bold uppercase tracking-widest",children:"Nouvelle Publication"})]})]}),d.jsxs("div",{className:"px-6 py-8 space-y-8 flex-1",children:[e&&d.jsxs("div",{className:"bg-indigo-600/10 border border-indigo-500/20 p-4 rounded-3xl flex items-center gap-4 shadow-lg",children:[d.jsx("div",{className:"size-12 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-indigo-600/20 overflow-hidden",children:d.jsx(yt,{src:e.image,name:e.name})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-bold text-sm",children:"Rservation directe"}),d.jsx("p",{className:"text-[10px] text-indigo-400 font-medium",children:i?"Expert Vork":`Pour ${e.name}`})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("label",{className:"text-xl font-bold text-white tracking-tight",children:"Description"}),d.jsx("textarea",{value:l,onChange:k=>u(k.target.value),placeholder:"Dcrivez votre problme en dtail...",className:"w-full h-40 bg-[#121214] border border-white/5 rounded-[1.5rem] p-6 text-slate-300 placeholder:text-slate-600 focus:outline-none focus:border-purple-500/50 transition-all resize-none shadow-xl"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("label",{className:"text-xl font-bold text-white tracking-tight",children:["Photos ",d.jsx("span",{className:"text-slate-500 font-medium text-sm",children:"(max 4)"})]}),d.jsxs("div",{className:"flex gap-4 overflow-x-auto no-scrollbar pb-2",children:[h.length<4&&d.jsxs("button",{onClick:()=>{var k;return(k=S.current)==null?void 0:k.click()},className:"size-24 shrink-0 rounded-2xl border-2 border-dashed border-white/10 bg-white/5 flex flex-col items-center justify-center gap-1 group hover:border-purple-500/50 transition-all",children:[d.jsx(Cr,{size:20,className:"text-slate-500 group-hover:text-purple-400"}),d.jsx("span",{className:"text-[10px] font-bold text-slate-500 group-hover:text-purple-400 uppercase tracking-widest",children:"Ajouter"})]}),d.jsx("input",{type:"file",ref:S,className:"hidden",accept:"image/*",multiple:!0,onChange:A}),h.map((k,R)=>d.jsxs("div",{className:"size-24 shrink-0 rounded-2xl relative overflow-hidden border border-white/10 group",children:[d.jsx("img",{src:URL.createObjectURL(k),className:"w-full h-full object-cover",alt:"Preview"}),d.jsx("button",{onClick:()=>N(R),className:"absolute top-1 right-1 size-6 bg-red-600 rounded-full flex items-center justify-center text-white",children:d.jsx(Fa,{size:12})})]},R))]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("label",{className:"text-xl font-bold text-white tracking-tight",children:"Ville"}),d.jsxs("div",{className:"relative group",children:[d.jsx("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 flex items-center gap-3",children:d.jsx(di,{className:"size-5 text-pink-500 fill-pink-500/20"})}),d.jsx("input",{type:"text",readOnly:!0,value:"Dakar, Localisation Actuelle",className:"w-full bg-[#121214] border border-white/5 rounded-2xl py-5 pl-14 pr-16 text-white font-medium shadow-xl"}),d.jsx("button",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-purple-400 text-xs font-black uppercase tracking-widest hover:text-white transition-colors",children:"Auto"})]})]}),d.jsx("div",{className:"pt-4 mt-auto",children:d.jsxs("button",{onClick:C,disabled:!l.trim()||p,className:"w-full py-6 rounded-[1.8rem] bg-gradient-to-r from-purple-800 to-purple-500 text-white/90 font-black text-base transition-all active:scale-[0.98] disabled:opacity-50 shadow-2xl shadow-purple-900/40 relative overflow-hidden group",children:[p?d.jsxs("div",{className:"flex items-center justify-center gap-3",children:[d.jsx(Lt,{className:"size-4 animate-spin text-white"}),d.jsx("span",{className:"uppercase tracking-[0.2em]",children:"Traitement..."})]}):d.jsx("span",{className:"uppercase tracking-[0.1em]",children:"Publier la demande"}),d.jsx("div",{className:"absolute inset-0 bg-white/5 translate-x-full group-hover:translate-x-0 transition-transform duration-500 pointer-events-none"})]})})]}),p&&d.jsxs("div",{className:"fixed inset-0 z-[110] bg-black/90 backdrop-blur-md flex flex-col items-center justify-center p-8 text-center animate-in fade-in duration-300",children:[d.jsxs("div",{className:"size-32 rounded-full border-4 border-purple-500/20 flex items-center justify-center mb-8 relative",children:[d.jsx(Tr,{size:48,className:"text-purple-500 animate-pulse z-10"}),d.jsx("div",{className:"absolute inset-0 border-t-4 border-purple-500 rounded-full animate-spin"})]}),d.jsxs("h2",{className:"text-3xl font-black text-white uppercase tracking-tighter mb-4 animate-pulse",children:[w==="upload"&&"Envoi des photos...",w==="matching"&&"Analyse en cours...",w==="saving"&&"Demande Publie !"]}),d.jsx("p",{className:"text-slate-400 text-sm font-medium",children:e?`Nous notifions ${e.name}...`:"Nous contactons les experts de la zone..."})]})]})},d5=async(t,e,i)=>{if(!t||!i)return console.error("Missing IDs for quote rejection",{orderId:t,quoteId:i}),!1;try{const r=Ae(fe,"orders",t,"quotes",i);await Jt(r,{status:"rejected",rejectedAt:new Date().toISOString()});const a=Ae(fe,"orders",t);return await Jt(a,{rejectedArtisanIds:qd(e)}),l5(t).catch(l=>console.warn("Background replacement search failed:",l.message)),!0}catch(r){throw console.error("Failed to reject quote:",r),r}},f5=async(t,e)=>{if(!t.artisanId)throw new Error("Missing artisanId for archiving.");const i=Ae(fe,"artisans",t.artisanId),r=Ae(fe,"orders",t.id),a=Ae(fe,"archivedOrders",t.id),l=`rev-${Date.now()}`,u=Ae(et(fe,"reviews"),l);try{await Xw(fe,async h=>{const g=await h.get(i);if(!g.exists())throw new Error("Artisan does not exist!");const p=await h.get(r);if(!p.exists())throw new Error("Order does not exist in active orders!");const y=g.data(),w=p.data(),b=y.rating||0,S=y.reviewsCount||0,E=y.jobsDone||0;let A=b,N=S;e&&(N=S+1,A=(b*S+e.rating)/N),e&&h.set(u,{id:l,artisanId:t.artisanId,orderId:t.id,userId:t.userId,rating:e.rating,comment:e.comment,images:e.images||[],createdAt:Ma(),userName:"Client Vork",userAvatar:"CV",date:new Date().toLocaleDateString()}),h.set(a,{...w,status:"Termin",completedAt:Ma(),archivedAt:Ma(),finishRequestedBy:"client",reviewId:e?l:null,resultImages:(e==null?void 0:e.images)||[],finalReview:e||null}),h.update(i,{rating:Number(A.toFixed(2)),reviewsCount:N,jobsDone:E+1,currentActiveJobs:Qw(-1)}),h.delete(r)}),console.log("Order successfully archived with transaction.")}catch(h){throw console.error("Transaction failed: ",h),h}},h5=({isOpen:t,onClose:e,onConfirm:i,artisanName:r,artisanImage:a,orderId:l})=>{const[u,h]=P.useState(0),[g,p]=P.useState(""),[y,w]=P.useState("rate"),[b,S]=P.useState([]),E=P.useRef(null);if(!t)return null;const A=k=>{k.target.files&&S(R=>[...R,...Array.from(k.target.files)].slice(0,4))},N=k=>{S(R=>R.filter((M,z)=>z!==k))},C=async()=>{w("uploading");const k=[];try{if(b.length>0)for(const[R,M]of b.entries()){const z=M.name.split(".").pop()||"jpg",O=`reviews/${l}/result_${R}_${Date.now()}.${z}`,j=await Ka("vork-profilepic-bucket",O,M);k.push(j)}w("processing"),await i(u,g,k),w("success")}catch(R){console.error("Error submitting review:",R),w("rate"),alert("Erreur lors de l'envoi. Veuillez ressayer.")}};return d.jsxs("div",{className:"fixed inset-0 z-[150] flex items-end justify-center animate-in fade-in duration-300",children:[d.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md",onClick:y==="rate"?e:void 0}),d.jsxs("div",{className:"relative w-full max-w-md bg-[#0a0a0c] border-t border-white/10 rounded-t-[3rem] p-8 pb-safe-bottom shadow-2xl animate-in slide-in-from-bottom duration-500 max-h-[90vh] overflow-y-auto no-scrollbar text-center",children:[y==="rate"&&d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"size-16 mx-auto rounded-full overflow-hidden border-4 border-white/10 shadow-2xl",children:d.jsx(yt,{src:a,name:r,initialsClassName:"text-xl font-black text-white"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tight",children:"Mission Termine !"}),d.jsxs("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-widest mt-1",children:["Notez le travail de ",r]})]}),d.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(k=>d.jsx("button",{onClick:()=>h(k),className:"p-1 transition-transform hover:scale-110 focus:outline-none",children:d.jsx(jt,{size:32,className:`${u>=k?"fill-yellow-400 text-yellow-400":"text-white/10 fill-white/5"} transition-colors`})},k))}),d.jsxs("div",{className:"w-full space-y-3 text-left",children:[d.jsxs("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest pl-1",children:["Photos du rsultat ",d.jsx("span",{className:"text-indigo-400",children:"(Requis)"})]}),d.jsxs("div",{className:"flex gap-3 overflow-x-auto no-scrollbar pb-2",children:[b.length<4&&d.jsxs("button",{onClick:()=>{var k;return(k=E.current)==null?void 0:k.click()},className:"size-20 shrink-0 rounded-2xl border-2 border-dashed border-white/10 bg-white/5 flex flex-col items-center justify-center gap-1 group hover:border-indigo-500/50 transition-all",children:[d.jsx(bs,{size:18,className:"text-slate-500 group-hover:text-indigo-400"}),d.jsx("span",{className:"text-[8px] font-black text-slate-500 group-hover:text-indigo-400 uppercase tracking-widest",children:"Ajouter"})]}),d.jsx("input",{type:"file",ref:E,className:"hidden",accept:"image/*",multiple:!0,onChange:A}),b.map((k,R)=>d.jsxs("div",{className:"size-20 shrink-0 rounded-2xl relative overflow-hidden border border-white/10 group",children:[d.jsx("img",{src:URL.createObjectURL(k),className:"w-full h-full object-cover",alt:"Preview"}),d.jsx("button",{onClick:()=>N(R),className:"absolute top-1 right-1 size-5 bg-red-600 rounded-full flex items-center justify-center text-white shadow-lg",children:d.jsx(yn,{size:10})})]},R))]})]}),d.jsx("textarea",{value:g,onChange:k=>p(k.target.value),placeholder:"Un commentaire sur la prestation ? (Optionnel)",className:"w-full bg-white/5 border border-white/10 rounded-2xl p-4 text-sm text-white focus:outline-none focus:border-indigo-500 resize-none h-20 placeholder:text-slate-600"}),d.jsxs("div",{className:"flex w-full gap-3 pt-2",children:[d.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 rounded-2xl text-slate-500 font-black text-[10px] uppercase tracking-widest hover:bg-white/10",children:"Annuler"}),d.jsx("button",{onClick:C,disabled:u===0,className:"flex-[2] py-4 bg-emerald-500 text-white rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-lg shadow-emerald-500/20 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 transition-all",children:"Clturer la mission"})]})]}),(y==="uploading"||y==="processing")&&d.jsxs("div",{className:"flex flex-col items-center justify-center py-10 space-y-6",children:[d.jsxs("div",{className:"size-24 relative",children:[d.jsx("div",{className:"absolute inset-0 border-4 border-emerald-500/20 rounded-full"}),d.jsx("div",{className:"absolute inset-0 border-t-4 border-emerald-500 rounded-full animate-spin"})]}),d.jsx("h3",{className:"text-white font-black uppercase tracking-widest animate-pulse",children:y==="uploading"?"Envoi des photos...":"Archivage en cours..."})]}),y==="success"&&d.jsxs("div",{className:"flex flex-col items-center justify-center py-10 space-y-6 animate-in zoom-in duration-300",children:[d.jsx("div",{className:"size-24 bg-emerald-500 rounded-full flex items-center justify-center shadow-[0_0_40px_rgba(16,185,129,0.5)]",children:d.jsx(Ql,{size:48,className:"text-white animate-bounce"})}),d.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tight",children:"Succs !"})]})]})]})},p5=({order:t,onBack:e,onOpenChat:i,onOpenArtisanProfile:r})=>{var O;const[a,l]=P.useState([]),[u,h]=P.useState(null),[g,p]=P.useState(null),[y,w]=P.useState(!1),[b,S]=P.useState(!1),[E,A]=P.useState(null);P.useEffect(()=>{const j=wt(et(fe,"orders",t.id,"quotes"),kn("timestamp","desc")),B=gn(j,te=>{const ae=te.docs.map(K=>({...rt(K.data()),id:K.id}));l(ae.filter(K=>K.status!=="rejected"))}),q=()=>{const te=new Date(t.createdAt||Date.now()).getTime();(Date.now()-te)/(1e3*60)>=30&&(t.searchRadius||1)<2&&w(!0)};q();const W=setInterval(q,6e4);return()=>{B(),clearInterval(W)}},[t.id,t.createdAt,t.searchRadius]);const N=async j=>{h(j.id);try{await Jt(Ae(fe,"orders",t.id),{artisanId:j.artisanId,artisanName:j.artisanName,artisanImage:j.artisanImage,artisanRating:j.artisanRating,assignedPrice:j.price,status:"En cours",updatedAt:new Date().toISOString()});let B="Client",q="";if(sn.currentUser){const te=await An(Ae(fe,"users",sn.currentUser.uid));if(te.exists()){const ae=te.data();B=ae.name||"Client",q=ae.avatar||ae.image||""}}const W=`${t.userId}_${j.artisanId}`;await Il(Ae(fe,"chats",W),{id:W,userId:t.userId,userName:B,userImage:q,artisanId:j.artisanId,artisanName:j.artisanName,artisanImage:j.artisanImage,lastMessage:`Commande accepte (${j.price}).`,timestamp:new Date().toISOString(),unreadCount:0,isOnline:!0},{merge:!0}),await Ml(et(fe,"chats",W,"messages"),{text:`Bonjour ! J'ai accept votre devis de ${j.price}. Quand pouvez-vous intervenir ?`,sender:"user",timestamp:new Date().toISOString(),status:"sent"})}catch(B){console.error(B)}finally{h(null)}},C=async j=>{if(confirm("Refuser cette offre ?")){p(j.id);try{await d5(t.id,j.artisanId,j.id)}catch(B){console.error(B)}finally{p(null)}}},k=async(j,B,q)=>{try{if(await f5(t,{rating:j,comment:B,images:q}),t.artisanId){const W=`${t.userId}_${t.artisanId}`;await Ml(et(fe,"chats",W,"messages"),{text:` Mission termine et valide ! Note: ${j}/5. Photos ajoutes au portfolio.`,sender:"user",timestamp:new Date().toISOString(),status:"sent"})}await new Promise(W=>setTimeout(W,1500)),e()}catch(W){console.error(W),alert("Erreur lors de l'archivage."),S(!1)}},R=async()=>{try{const B=await Rx(t.category,2),q=new Set([...t.targetedArtisans||[],...B]);await Jt(Ae(fe,"orders",t.id),{searchRadius:2,targetedArtisans:Array.from(q),contactedArtisanIds:Array.from(q)}),w(!1),alert("Recherche largie !")}catch(j){console.error(j)}},M=["En cours","Accept","Termin","En attente de clture"].includes(t.status),z=t.status==="En attente de clture";return d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] flex flex-col animate-in slide-in-from-right duration-500 pb-32",children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 flex items-center justify-between sticky top-0 bg-[#0a0a0c]/90 backdrop-blur-xl z-50 border-b border-white/5",children:[d.jsx("button",{onClick:e,className:"size-10 bg-white/5 rounded-xl flex items-center justify-center text-white border border-white/10 active:scale-90",children:d.jsx(It,{className:"w-5 h-5"})}),d.jsxs("h1",{className:"text-[11px] font-black text-white tracking-[0.2em] uppercase",children:["COMMANDE #",t.id.slice(-5).toUpperCase()]}),d.jsx("button",{className:"size-10 bg-white/5 rounded-xl flex items-center justify-center text-slate-500 border border-white/10",children:d.jsx(cy,{size:20})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-8 p-6 bg-[#0a0a0c]",children:[d.jsxs("div",{className:"glass-card p-6 rounded-[2.5rem] bg-[#1a1a20]/60 border border-white/5",children:[d.jsxs("div",{className:"flex items-center gap-5",children:[d.jsx("div",{className:"size-16 bg-indigo-600/20 rounded-2xl flex items-center justify-center text-indigo-500 border border-indigo-500/10",children:d.jsx(bs,{size:28})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight mb-1",children:t.category}),d.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[d.jsx(Ar,{size:12}),d.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:t.date})]})]})]}),d.jsxs("div",{className:"flex items-center justify-between mt-6 pt-6 border-t border-white/5",children:[d.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"STATUT"}),d.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full border ${M?"bg-emerald-500/10 border-emerald-500/20 text-emerald-400":"bg-orange-500/10 border-orange-500/20 text-orange-400"}`,children:[d.jsx("div",{className:`size-2 rounded-full ${t.status==="Termin"?"bg-emerald-500":"bg-orange-500 animate-pulse"}`}),d.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:z?"VALIDATION...":t.status})]})]})]}),(t.status==="En cours"||t.status==="Accept")&&d.jsxs("div",{className:"glass-card p-6 rounded-[2rem] bg-indigo-900/10 border border-indigo-500/20 flex items-center justify-between shadow-xl",children:[d.jsxs("div",{className:"relative z-10",children:[d.jsx("h4",{className:"text-white font-black text-sm uppercase tracking-tight",children:"Travail termin ?"}),d.jsx("p",{className:"text-[10px] text-indigo-400/70 font-bold uppercase tracking-widest mt-0.5",children:"Validez pour clore la mission"})]}),d.jsxs("button",{onClick:()=>S(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-black text-[10px] uppercase tracking-widest shadow-lg active:scale-95 transition-all flex items-center gap-2 hover:bg-indigo-500",children:[d.jsx(Ql,{size:16})," Valider la fin"]})]}),!M&&d.jsxs("div",{className:"space-y-6",children:[d.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"DEVIS REUS"}),a.length>0?d.jsx("div",{className:"space-y-4",children:a.map(j=>d.jsxs("div",{className:"glass-card p-6 rounded-[2.5rem] bg-[#121214] border border-white/10 shadow-2xl",children:[d.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[d.jsx("div",{className:"size-14 rounded-2xl overflow-hidden border border-white/10 shadow-lg",children:d.jsx(yt,{src:j.artisanImage,name:j.artisanName,initialsClassName:"text-xl font-black text-white"})}),d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-black text-base uppercase tracking-tight",children:j.artisanName}),d.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[d.jsx(jt,{className:"size-3 text-yellow-400 fill-current"}),d.jsx("span",{className:"text-[10px] font-black text-white",children:j.artisanRating})]})]}),d.jsx("span",{className:"text-lg font-black text-emerald-400 tracking-tighter",children:j.price})]})})]}),d.jsxs("p",{className:"text-slate-400 text-xs italic mb-6 bg-white/5 p-4 rounded-2xl border border-white/5",children:['"',j.description,'"']}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:()=>C(j),disabled:g===j.id||u!==null,className:"flex-1 py-4 rounded-2xl bg-white/5 text-red-400 border border-white/5 font-black text-[11px] uppercase tracking-widest flex items-center justify-center gap-2",children:g===j.id?d.jsx(Lt,{className:"size-4 animate-spin"}):d.jsxs(d.Fragment,{children:[d.jsx(J_,{size:16})," Refuser"]})}),d.jsx("button",{onClick:()=>N(j),disabled:u!==null||g===j.id,className:"flex-[2] py-4 rounded-2xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-black text-[11px] uppercase tracking-widest flex items-center justify-center gap-2",children:u===j.id?d.jsx(Lt,{className:"size-4 animate-spin"}):d.jsxs(d.Fragment,{children:[d.jsx(hS,{size:16})," Accepter"]})})]})]},j.id))}):d.jsxs("div",{className:"glass-card p-10 rounded-[2.5rem] bg-[#121214]/60 border border-dashed border-white/10 text-center",children:[d.jsx(ci,{className:"animate-pulse text-slate-700 mx-auto mb-4",size:24}),d.jsx("p",{className:"text-slate-600 font-black text-[10px] uppercase tracking-widest",children:"Recherche d'experts..."}),y&&d.jsxs("button",{onClick:R,className:"flex items-center gap-3 px-8 py-4 bg-indigo-600 text-white rounded-[1.5rem] text-[10px] font-black uppercase tracking-widest shadow-xl mx-auto mt-4",children:[d.jsx(li,{size:14,className:"fill-current"})," largir la recherche"]})]})]}),M&&d.jsxs("div",{className:"space-y-6",children:[d.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"EXPERT ASSIGN"}),d.jsxs("div",{onClick:()=>r(t.artisanId),className:"glass-card p-6 rounded-[2.5rem] bg-[#121214] border border-white/10 shadow-2xl group cursor-pointer active:scale-[0.99] transition-all",children:[d.jsxs("div",{className:"flex items-center gap-5",children:[d.jsx("div",{className:"size-16 rounded-full border-2 border-indigo-500/30 overflow-hidden shadow-xl",children:d.jsx(yt,{src:t.artisanImage,name:t.artisanName||"Expert",initialsClassName:"text-xl font-black text-white"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h4",{className:"text-xl font-black text-white tracking-tighter mb-2",children:t.artisanName}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(jt,{className:"size-3 text-yellow-400 fill-current"}),d.jsx("span",{className:"text-xs font-black text-white",children:t.artisanRating})]})]})]}),d.jsxs("button",{onClick:j=>{j.stopPropagation(),i({id:t.artisanId,name:t.artisanName,image:t.artisanImage})},className:"w-full mt-8 py-4 bg-indigo-600 rounded-2xl flex items-center justify-center gap-3 text-white font-black text-[11px] uppercase tracking-widest active:scale-95 transition-all shadow-xl shadow-indigo-600/20",children:[d.jsx(wf,{size:16})," Discuter avec l'expert"]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"PHOTOS INITIALES"}),d.jsx("div",{className:"grid grid-cols-4 gap-2.5",children:(O=t.images)==null?void 0:O.map((j,B)=>d.jsxs("div",{onClick:()=>A(j),className:"relative aspect-square rounded-2xl overflow-hidden border border-white/10 group cursor-pointer",children:[d.jsx("img",{src:j,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",alt:"Detail"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-black/30 transition-all",children:d.jsx(xs,{size:16,className:"text-white"})})]},B))})]}),t.resultImages&&t.resultImages.length>0&&d.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[d.jsx("h3",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest px-1",children:"RSULTAT FINAL"}),d.jsx("div",{className:"grid grid-cols-4 gap-2.5",children:t.resultImages.map((j,B)=>d.jsxs("div",{onClick:()=>A(j),className:"relative aspect-square rounded-2xl overflow-hidden border border-emerald-500/20 group cursor-pointer",children:[d.jsx("img",{src:j,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",alt:"Result"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-black/30 transition-all",children:d.jsx(xs,{size:16,className:"text-white"})})]},B))})]})]}),d.jsx(h5,{isOpen:b,onClose:()=>S(!1),onConfirm:k,artisanName:t.artisanName||"Expert",artisanImage:t.artisanImage,orderId:t.id}),E&&d.jsxs("div",{className:"fixed inset-0 z-[200] bg-black/95 flex items-center justify-center p-4 animate-in fade-in",onClick:()=>A(null),children:[d.jsx("button",{className:"absolute top-6 right-6 size-10 bg-white/10 rounded-full flex items-center justify-center text-white",children:d.jsx(yn,{size:20})}),d.jsx("img",{src:E,className:"max-w-full max-h-full object-contain rounded-lg animate-in zoom-in-95",alt:"Full",onClick:j=>j.stopPropagation()})]})]})},m5=({order:t,onBack:e,onOpenChat:i})=>{var h;const[r,a]=P.useState(null),l=()=>{i({id:t.userId,name:"Client",image:""})},u=t.status==="En attente de clture";return["En cours","Accept","Termin","En attente de clture"].includes(t.status),d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] flex flex-col animate-in slide-in-from-right duration-500 pb-32",children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 flex items-center justify-between sticky top-0 bg-[#0a0a0c]/90 backdrop-blur-xl z-50 border-b border-white/5",children:[d.jsx("button",{onClick:e,className:"size-10 bg-white/5 rounded-xl flex items-center justify-center text-white border border-white/10 active:scale-90",children:d.jsx(It,{className:"w-5 h-5"})}),d.jsxs("h1",{className:"text-[11px] font-black text-white tracking-[0.2em] uppercase",children:["MISSION #",t.id.slice(-5).toUpperCase()]}),d.jsx("button",{className:"size-10 bg-white/5 rounded-xl flex items-center justify-center text-slate-500 border border-white/10",children:d.jsx(cy,{size:20})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-8 p-6 bg-[#0a0a0c]",children:[d.jsxs("div",{className:"glass-card p-6 rounded-[2.5rem] bg-[#1a1a20]/60 border border-white/5",children:[d.jsxs("div",{className:"flex items-center gap-5",children:[d.jsx("div",{className:"size-16 bg-purple-600/20 rounded-2xl flex items-center justify-center text-purple-500 border border-purple-500/10",children:d.jsx(bs,{size:28})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight mb-1",children:t.category}),d.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[d.jsx(di,{size:12}),d.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:t.location||"Localisation inconnue"})]})]})]}),d.jsxs("div",{className:"flex items-center justify-between mt-6 pt-6 border-t border-white/5",children:[d.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"STATUT"}),d.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full border ${t.status==="Termin"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-400":"bg-orange-500/10 border-orange-500/20 text-orange-400"}`,children:[d.jsx("div",{className:`size-2 rounded-full ${t.status==="Termin"?"bg-emerald-500":"bg-orange-500 animate-pulse"}`}),d.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:u?"ACTION REQUISE":t.status})]})]})]}),(t.status==="En cours"||t.status==="Accept"||u)&&d.jsxs("div",{className:"glass-card p-6 rounded-[2rem] bg-emerald-900/5 border border-emerald-500/20 flex items-center gap-4 shadow-xl",children:[d.jsx("div",{className:"size-10 rounded-full bg-emerald-500/10 flex items-center justify-center text-emerald-400 shrink-0 border border-emerald-500/20 shadow-[0_0_15px_rgba(16,185,129,0.2)]",children:d.jsx(Ar,{size:20,className:"animate-pulse"})}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-black text-sm uppercase tracking-tight",children:u?"Validation finale...":"Mission en cours"}),d.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-0.5",children:u?"Validation du paiement et archivage par le client en cours":"Attendez la validation du client pour clturer."})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"CLIENT"}),d.jsxs("div",{className:"glass-card p-6 rounded-[2.5rem] bg-[#121214] border border-white/10 shadow-2xl relative overflow-hidden",children:[d.jsxs("div",{className:"flex items-center gap-5",children:[d.jsx("div",{className:"size-16 rounded-full bg-slate-800 flex items-center justify-center text-slate-500 border-2 border-slate-700",children:d.jsx("span",{className:"text-xl font-black",children:"C"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h4",{className:"text-xl font-black text-white tracking-tighter mb-2",children:"Client"}),d.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Voir dtails dans le chat"})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-8",children:[d.jsxs("button",{onClick:l,className:"col-span-2 py-4 bg-indigo-600 rounded-2xl flex items-center justify-center gap-3 text-white font-black text-[11px] uppercase tracking-widest active:scale-95 transition-all shadow-xl shadow-indigo-600/20",children:[d.jsx(wf,{size:16})," Discuter avec le client"]}),d.jsxs("a",{href:"tel:+",className:"col-span-2 py-4 bg-white/5 border border-white/5 rounded-2xl flex items-center justify-center gap-3 text-slate-300 font-black text-[11px] uppercase tracking-widest active:scale-95 transition-all",children:[d.jsx(ec,{size:16})," Appeler"]})]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"DESCRIPTION"}),d.jsx("div",{className:"glass-card p-6 rounded-[2rem] bg-[#121214] border border-white/5",children:d.jsxs("p",{className:"text-slate-400 text-sm font-medium italic leading-relaxed",children:['"',t.description,'"']})})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"PHOTOS INITIALES"}),d.jsx("div",{className:"grid grid-cols-4 gap-2.5",children:(h=t.images)==null?void 0:h.map((g,p)=>d.jsxs("div",{onClick:()=>a(g),className:"relative aspect-square rounded-2xl overflow-hidden border border-white/10 group cursor-pointer",children:[d.jsx("img",{src:g,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",alt:"Detail"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-black/30 transition-all",children:d.jsx(xs,{size:16,className:"text-white"})})]},p))})]}),t.resultImages&&t.resultImages.length>0&&d.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[d.jsx("h3",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest px-1",children:"RSULTAT FINAL"}),d.jsx("div",{className:"grid grid-cols-4 gap-2.5",children:t.resultImages.map((g,p)=>d.jsxs("div",{onClick:()=>a(g),className:"relative aspect-square rounded-2xl overflow-hidden border border-emerald-500/20 group cursor-pointer",children:[d.jsx("img",{src:g,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",alt:"Result"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-black/30 transition-all",children:d.jsx(xs,{size:16,className:"text-white"})})]},p))})]})]}),r&&d.jsxs("div",{className:"fixed inset-0 z-[200] bg-black/95 flex items-center justify-center p-4 animate-in fade-in",onClick:()=>a(null),children:[d.jsx("button",{className:"absolute top-6 right-6 size-10 bg-white/10 rounded-full flex items-center justify-center text-white",children:d.jsx(yn,{size:20})}),d.jsx("img",{src:r,className:"max-w-full max-h-full object-contain rounded-lg animate-in zoom-in-95",alt:"Full",onClick:g=>g.stopPropagation()})]})]})},g5=({chats:t,onSelectChat:e,onBack:i,backLabel:r="Prcdent",onHome:a})=>{var A;const[l,u]=P.useState(!1),[h,g]=P.useState(null),[p,y]=P.useState(""),w=(A=sn.currentUser)==null?void 0:A.uid,b=N=>{g(N.targetTouches[0].clientX)},S=N=>{if(!h)return;N.changedTouches[0].clientX-h>100&&h<50&&i(),g(null)},E=t.filter(N=>(w===N.artisanId?N.userName||"Client":N.artisanName).toLowerCase().includes(p.toLowerCase())||N.lastMessage.toLowerCase().includes(p.toLowerCase()));return d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] animate-in slide-in-from-right duration-500 pb-32 overflow-y-auto no-scrollbar",onTouchStart:b,onTouchEnd:S,children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 sticky top-0 bg-[#0a0a0c]/90 backdrop-blur-xl z-50 border-b border-white/5",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("div",{className:"flex items-center gap-1 group relative",children:[d.jsxs("button",{onClick:i,onContextMenu:N=>{N.preventDefault(),u(!0)},className:"flex items-center gap-1 text-white hover:text-purple-400 transition-all active:scale-90 select-none",children:[d.jsxs("div",{className:"relative",children:[d.jsx(It,{size:28,className:"group-hover:-translate-x-1 transition-transform"}),d.jsx("div",{className:"absolute inset-0 bg-purple-500/20 blur-xl opacity-0 group-hover:opacity-100 transition-opacity rounded-full"})]}),d.jsxs("div",{className:"flex flex-col items-start leading-none mt-0.5",children:[d.jsx("span",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-slate-500 group-hover:text-purple-500 transition-colors",children:"Retour "}),d.jsx("span",{className:"text-xs font-black uppercase tracking-tight",children:r})]})]}),l&&d.jsxs("div",{className:"absolute top-12 left-0 w-48 bg-[#121214] border border-white/10 rounded-[1.8rem] shadow-2xl p-2 animate-in zoom-in-95 duration-200 z-[60]",children:[d.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-white/5 mb-1",children:[d.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Navigation Rapide"}),d.jsx("button",{onClick:()=>u(!1),children:d.jsx(yn,{size:12,className:"text-slate-600"})})]}),d.jsxs("button",{onClick:()=>{u(!1),a==null||a()},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 rounded-2xl transition-colors",children:[d.jsx(Ul,{size:16,className:"text-purple-400"}),d.jsx("span",{className:"text-xs font-bold text-white",children:"Aller  l'Accueil"})]}),d.jsxs("button",{onClick:()=>{u(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 rounded-2xl transition-colors",children:[d.jsx(Ll,{size:16,className:"text-slate-400"}),d.jsx("span",{className:"text-xs font-bold text-white",children:"Voir mon Profil"})]})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{className:"size-10 bg-white/5 rounded-full flex items-center justify-center text-white border border-white/5 hover:bg-white/10 transition-colors active:scale-90",children:d.jsx(Cr,{size:20})}),d.jsx("button",{className:"size-10 bg-white/5 rounded-full flex items-center justify-center text-white border border-white/5 hover:bg-white/10 transition-colors active:scale-90",children:d.jsx(aS,{size:20})})]})]}),d.jsx("h1",{className:"text-3xl font-black text-white tracking-tighter uppercase mt-4",children:"Messages"})]}),d.jsx("div",{className:"px-6 mt-6",children:d.jsxs("div",{className:"relative group",children:[d.jsx(ci,{className:`absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 transition-colors ${p?"text-purple-400":"text-slate-500"} group-focus-within:text-purple-400`}),d.jsx("input",{type:"text",value:p,onChange:N=>y(N.target.value),placeholder:"Rechercher...",className:"w-full bg-white/5 border border-white/5 rounded-2xl py-3.5 pl-12 pr-10 text-sm text-white placeholder:text-slate-600 focus:outline-none focus:border-purple-500/30 focus:bg-white/[0.08] transition-all"}),p&&d.jsx("button",{onClick:()=>y(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white transition-colors",children:d.jsx(yn,{size:14})})]})}),d.jsxs("div",{className:"px-6 mt-8 space-y-2",children:[d.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 mb-4 ml-1",children:p?`Rsultats pour "${p}"`:"Rcent"}),E.map(N=>{const C=w===N.artisanId,k=C?N.userName||"Client":N.artisanName,R=C?N.userImage||"":N.artisanImage;return d.jsxs("div",{onClick:()=>e(N),className:"group relative flex items-center gap-4 p-3.5 rounded-[2rem] hover:bg-white/5 transition-all active:scale-[0.98] cursor-pointer",children:[d.jsxs("div",{className:"relative shrink-0",children:[d.jsx("div",{className:"size-16 rounded-[1.5rem] overflow-hidden border border-white/10 shadow-lg group-hover:scale-105 transition-transform",children:d.jsx(yt,{src:R,name:k,initialsClassName:"text-lg font-black text-white"})}),N.isOnline&&d.jsx("div",{className:"absolute -bottom-1 -right-1 size-4 bg-emerald-500 rounded-full border-2 border-[#0a0a0c]"})]}),d.jsxs("div",{className:"flex-1 min-w-0 py-1",children:[d.jsxs("div",{className:"flex justify-between items-end mb-1",children:[d.jsx("h3",{className:"text-white font-black text-sm uppercase tracking-tight truncate group-hover:text-purple-400 transition-colors",children:k}),d.jsx("span",{className:"text-[9px] text-slate-600 font-black uppercase tracking-widest",children:N.timestamp})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:`text-xs truncate max-w-[85%] leading-relaxed ${N.unreadCount>0?"text-white font-bold":"text-slate-500 font-medium"}`,children:N.unreadCount>0?"A envoy un message":N.lastMessage}),N.unreadCount>0&&d.jsx("div",{className:"size-2.5 bg-purple-500 rounded-full shadow-[0_0_8px_rgba(168,85,247,0.5)]"})]})]})]},N.id)})]}),E.length===0&&d.jsxs("div",{className:"flex flex-col items-center justify-center py-40 opacity-10",children:[d.jsx(Zl,{size:48,className:"mb-4"}),d.jsx("p",{className:"font-black uppercase tracking-[0.2em] text-xs",children:p?"Aucun rsultat trouv":"Aucune conversation"})]}),l&&d.jsx("div",{className:"fixed inset-0 z-50 bg-transparent",onClick:()=>u(!1)})]})},v5=({chat:t,onBack:e,onOpenProfile:i})=>{var j;const[r,a]=P.useState([]),[l,u]=P.useState(""),[h,g]=P.useState(!1),p=P.useRef(null),w=((j=sn.currentUser)==null?void 0:j.uid)===t.artisanId,b=w?"artisan":"user",[S,E]=P.useState(t.userName),[A,N]=P.useState(t.userImage);P.useEffect(()=>{w&&(!S||S==="Client")&&t.userId?(async()=>{try{const q=await An(Ae(fe,"users",t.userId));if(q.exists()){const W=q.data(),te=W.name||"Client",ae=W.avatar||W.image||"";E(te),N(ae),await Jt(Ae(fe,"chats",t.id),{userName:te,userImage:ae})}}catch(q){console.error("Error fetching user details for chat",q)}})():(t.userName&&t.userName!==S&&E(t.userName),t.userImage&&t.userImage!==A&&N(t.userImage))},[t.id,w,t.userId,t.userName,t.userImage]);const C=w?S||"Client":t.artisanName,k=w?A||"":t.artisanImage,R=w?t.userId:t.artisanId;P.useEffect(()=>{const B=et(fe,"chats",t.id,"messages"),q=wt(B,kn("timestamp","asc")),W=gn(q,te=>{const ae=te.docs.map(K=>({...rt(K.data()),id:K.id}));a(ae)});return()=>W()},[t.id]),P.useEffect(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[r,h]);const M=async()=>{if(!l.trim())return;const B={text:l,sender:b,timestamp:new Date().toISOString(),status:"sent"};u("");try{const q=await Ml(et(fe,"chats",t.id,"messages"),B);await Jt(Ae(fe,"chats",t.id),{lastMessage:l,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),unreadCount:0})}catch(q){console.error("Error sending message:",q)}},z=B=>B===r.length-1?!1:r[B].sender===r[B+1].sender,O=B=>{try{return new Date(B).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return B}};return d.jsxs("div",{className:"fixed inset-0 z-[110] bg-[#0a0a0c] flex flex-col animate-in slide-in-from-right duration-500",children:[d.jsxs("header",{className:"px-4 pt-12 pb-4 flex items-center justify-between bg-[#0a0a0c]/90 backdrop-blur-xl z-20 border-b border-white/5 shadow-2xl",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:e,className:"p-2 text-white hover:bg-white/5 rounded-full transition-colors active:scale-90",children:d.jsx(It,{size:24})}),d.jsxs("div",{onClick:()=>i==null?void 0:i(R),className:"flex items-center gap-3 active:scale-95 transition-transform cursor-pointer hover:bg-white/5 p-1 rounded-2xl pr-3",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"size-10 rounded-full overflow-hidden border border-white/10 shadow-lg",children:d.jsx(yt,{src:k,name:C,initialsClassName:"text-[10px] font-black text-white"})}),t.isOnline&&d.jsx("div",{className:"absolute bottom-0 right-0 size-3 bg-emerald-500 rounded-full border-2 border-[#0a0a0c]"})]}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-sm font-black text-white uppercase tracking-tight leading-none",children:C}),d.jsxs("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mt-1 flex items-center gap-1",children:[t.isOnline?"En ligne":"Inactif",d.jsx("span",{className:"size-1 bg-slate-800 rounded-full"}),"Voir Profil"]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("a",{href:"tel:+221770000000",className:"p-2.5 text-emerald-400 hover:bg-emerald-500/10 rounded-full transition-colors active:scale-90",title:"Appeler",children:d.jsx(ec,{size:20})}),d.jsx("button",{onClick:()=>i==null?void 0:i(R),className:"p-2.5 text-purple-400 hover:bg-purple-500/10 rounded-full transition-colors active:scale-90",title:"Informations",children:d.jsx(Ol,{size:20})})]})]}),d.jsxs("div",{ref:p,className:"flex-1 overflow-y-auto p-4 space-y-1 no-scrollbar pb-32 flex flex-col pt-6",children:[d.jsxs("div",{onClick:()=>i==null?void 0:i(R),className:"text-center py-10 flex flex-col items-center gap-4 cursor-pointer group",children:[d.jsx("div",{className:"size-20 rounded-[2rem] overflow-hidden border-4 border-white/5 shadow-2xl group-hover:scale-105 transition-transform duration-500",children:d.jsx(yt,{src:k,name:C,initialsClassName:"text-3xl font-black text-white"})}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("h3",{className:"text-white font-black text-xl uppercase tracking-tighter",children:C}),d.jsx("p",{className:"text-[10px] text-purple-500/60 font-black uppercase tracking-[0.2em]",children:w?"Client VORK":"Expert certifi VORK"})]}),d.jsx("button",{className:"px-4 py-2 bg-white/5 rounded-full border border-white/5 text-[9px] font-black uppercase tracking-widest text-slate-500 group-hover:bg-white/10 transition-colors",children:"Ouvrir le profil complet"})]}),r.map((B,q)=>{const W=z(q),te=B.sender===b;return d.jsxs("div",{className:`flex flex-col ${te?"items-end":"items-start"} ${W?"mb-0.5":"mb-4"}`,children:[d.jsx("div",{className:`group relative max-w-[85%] px-4 py-2.5 text-sm font-medium leading-relaxed transition-all active:scale-[0.98] ${te?`bg-gradient-to-br from-purple-600 to-indigo-600 text-white shadow-lg ${W?"rounded-2xl":"rounded-2xl rounded-tr-none"}`:`bg-[#1a1a20] text-slate-200 border border-white/5 ${W?"rounded-2xl":"rounded-2xl rounded-tl-none"}`}`,children:B.text}),!W&&d.jsxs("div",{className:`flex items-center gap-1.5 mt-1 px-1 ${te?"flex-row-reverse":""}`,children:[d.jsx("span",{className:"text-[8px] text-slate-600 font-black uppercase tracking-widest",children:O(B.timestamp)}),te&&B.status&&d.jsx("div",{className:"flex items-center animate-in zoom-in duration-300",children:B.status==="read"?d.jsx(O_,{size:12,className:"text-purple-400"}):d.jsx(ly,{size:12,className:"text-slate-600"})})]})]},B.id)})]}),d.jsx("div",{className:"p-4 bg-gradient-to-t from-[#0a0a0c] via-[#0a0a0c] to-transparent sticky bottom-0 z-30",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{className:"size-11 shrink-0 bg-white/5 rounded-full flex items-center justify-center text-slate-400 hover:text-white transition-all border border-white/5 active:scale-90",children:d.jsx(B1,{size:20})}),d.jsxs("div",{className:"flex-1 bg-[#121214] rounded-[2rem] border border-white/10 flex items-center gap-2 px-2 py-1.5 shadow-2xl focus-within:border-purple-500/30 transition-all",children:[d.jsx("button",{className:"size-10 shrink-0 flex items-center justify-center text-slate-500 hover:text-purple-400 transition-colors",children:d.jsx(iS,{size:22})}),d.jsx("input",{type:"text",value:l,onChange:B=>u(B.target.value),onKeyPress:B=>B.key==="Enter"&&M(),placeholder:"Message...",className:"flex-1 bg-transparent text-sm text-white focus:outline-none py-2 min-w-0 placeholder:text-slate-700"}),l.trim()?d.jsx("button",{onClick:M,className:"size-10 shrink-0 bg-purple-600 text-white rounded-full flex items-center justify-center shadow-lg shadow-purple-600/30 active:scale-90 transition-all animate-in zoom-in duration-200",children:d.jsx(tc,{size:18})}):d.jsxs("div",{className:"flex items-center",children:[d.jsx("button",{className:"size-10 flex items-center justify-center text-slate-500 hover:text-white transition-colors",children:d.jsx(bs,{size:20})}),d.jsx("button",{className:"size-10 flex items-center justify-center text-slate-500 hover:text-white transition-colors",children:d.jsx(fy,{size:20})})]})]})]})})]})},y5=({user:t,setUser:e,onLogout:i,favoritesCount:r=0,onOpenFavorites:a,onOpenSettings:l,isDarkMode:u,setIsDarkMode:h,onUpdateEmail:g})=>{const[p,y]=P.useState(!1),[w,b]=P.useState(!1),[S,E]=P.useState(t),[A,N]=P.useState(null),[C,k]=P.useState(null),[R,M]=P.useState(null),z=P.useRef(null);P.useEffect(()=>{E(t)},[t]);const O=async()=>{let K=S.avatar;b(!0);try{if(A){const ce="vork-profilepic-bucket",H=n5(t.avatar);H&&await t5(ce,H);const Z=A.name.split(".").pop()||"png",ve=`avatars/${t.role==="artisan"?"artisan":"user"}/${t.id}_profile_${Date.now()}.${Z}`;K=await Ka(ce,ve,A)}e({...S,avatar:K});const ee=t.role==="artisan"?"artisans":"users";if(t.id){const ce={name:S.name,email:S.email,phone:S.phone,avatar:K,updatedAt:new Date().toISOString()};await Jt(Ae(fe,ee,t.id),ce)}C&&setTimeout(()=>{C&&URL.revokeObjectURL(C)},100),N(null),k(null),y(!1),M(null)}catch(ee){console.error("Erreur lors de la sauvegarde:",ee),alert("Erreur lors de la mise  jour du profil.")}finally{b(!1)}},j=()=>{C&&URL.revokeObjectURL(C),E(t),N(null),k(null),y(!1),M(null)},B=K=>{y(!0),M(K)},q=()=>{var K;p?(K=z.current)==null||K.click():(y(!0),M(null))},W=K=>{K.stopPropagation(),C&&URL.revokeObjectURL(C),E({...S,avatar:""}),N(null),k(null)},te=K=>{var ce;const ee=(ce=K.target.files)==null?void 0:ce[0];if(ee){C&&URL.revokeObjectURL(C);const H=URL.createObjectURL(ee);N(ee),k(H),E({...S,avatar:H})}},ae=GS(S.avatar);return d.jsxs("div",{className:"p-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-40",children:[d.jsxs("div",{className:"flex flex-col items-center mb-10 relative",children:[d.jsxs("div",{className:"relative group",children:[d.jsxs("div",{onClick:q,className:`size-32 bg-[#121214] rounded-[2.8rem] border border-white/5 flex items-center justify-center mb-6 shadow-2xl relative overflow-hidden group ${p?"cursor-pointer hover:border-indigo-500/30":"cursor-pointer"} transition-all`,children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/10 to-purple-500/10 group-hover:opacity-100 transition-opacity"}),d.jsx(yt,{src:S.avatar,name:S.name,className:"w-full h-full relative z-10",initialsClassName:"text-3xl font-black text-slate-700 relative z-10 group-hover:scale-110 transition-transform duration-500",timeout:2e3}),w&&d.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-[2px] flex items-center justify-center animate-in fade-in duration-300",children:d.jsx(Lt,{className:"animate-spin text-white size-8 drop-shadow-lg"})}),p&&!w&&d.jsxs("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-[2px] flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-20 gap-2",children:[d.jsx(Cr,{className:"text-white drop-shadow-lg",size:28}),d.jsx("span",{className:"text-[8px] font-black text-white uppercase tracking-widest",children:"Changer"})]}),d.jsx("input",{type:"file",ref:z,className:"hidden",accept:"image/*",onChange:te})]}),p&&ae&&!w&&d.jsx("button",{onClick:W,className:"absolute -top-2 -right-2 size-10 bg-red-600 rounded-2xl border-4 border-[#0a0a0c] flex items-center justify-center shadow-lg text-white animate-in zoom-in duration-300 z-40 active:scale-90",title:"Supprimer la photo",children:d.jsx(Fa,{size:16})}),d.jsx("div",{className:"absolute bottom-6 -right-2 size-8 bg-emerald-500 rounded-xl border-4 border-[#0a0a0c] flex items-center justify-center shadow-lg z-30",children:d.jsx(ws,{size:14,className:"text-white"})})]}),p&&R===null?d.jsxs("div",{className:"flex flex-col items-center gap-4 w-full",children:[d.jsx("input",{type:"text",value:S.name,onChange:K=>E({...S,name:K.target.value}),className:"text-3xl font-black text-white text-center bg-white/5 border border-white/10 rounded-2xl px-4 py-2 focus:outline-none focus:border-indigo-500 w-full max-w-[260px]",autoFocus:!0,placeholder:"Votre nom"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:O,className:"px-6 py-2 bg-indigo-600 rounded-xl text-[10px] font-black uppercase tracking-widest text-white shadow-lg",children:"Valider"}),d.jsx("button",{onClick:j,className:"px-6 py-2 bg-white/5 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Annuler"})]})]}):d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("h2",{className:"text-3xl font-black text-white tracking-tight uppercase",children:t.name||"Utilisateur"}),d.jsx("button",{onClick:()=>y(!0),className:"p-2 bg-white/5 rounded-full text-slate-500 hover:text-white transition-colors",children:d.jsx(_f,{size:14})})]}),d.jsx("p",{className:"text-[10px] text-indigo-400 font-black uppercase tracking-[0.25em] mt-2",children:"Dakar  Sngal"}),d.jsx("div",{className:"flex gap-2 mt-6",children:!p&&d.jsxs("button",{onClick:l,className:"px-10 py-3 rounded-[1.5rem] bg-[#1a1a20] border border-white/5 text-slate-300 font-black text-[10px] uppercase tracking-[0.3em] flex items-center gap-3 shadow-2xl hover:bg-indigo-600/10 hover:border-indigo-500/20 transition-all active:scale-95",children:[d.jsx(X1,{size:14,className:"text-indigo-400"}),"Paramtres"]})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-10",children:[d.jsxs("button",{onClick:a,className:"bg-[#121214] border border-white/5 p-6 rounded-[2.5rem] shadow-xl relative overflow-hidden group text-left transition-all active:scale-95",children:[d.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-purple-500/5 blur-2xl group-hover:bg-purple-500/10 transition-all"}),d.jsx(jl,{size:16,className:"text-purple-500 mb-2 group-hover:scale-110 transition-transform"}),d.jsx("h3",{className:"text-2xl font-black text-white tracking-tighter",children:r}),d.jsx("p",{className:"text-[9px] font-black text-slate-600 uppercase tracking-widest",children:"Favoris"})]}),d.jsxs("div",{className:"bg-[#121214] border border-white/5 p-6 rounded-[2.5rem] shadow-xl relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-blue-500/5 blur-2xl"}),d.jsx(Ar,{size:16,className:"text-blue-500 mb-2"}),d.jsx("h3",{className:"text-2xl font-black text-white tracking-tighter",children:"VORK"}),d.jsx("p",{className:"text-[9px] font-black text-slate-600 uppercase tracking-widest",children:"Pro"})]})]}),d.jsxs("div",{className:"space-y-4 mb-8",children:[d.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.3em] px-2 mb-4",children:"Informations"}),d.jsx(ty,{icon:d.jsx(Wl,{size:18}),label:"Email",value:p&&R==="email"?S.email:t.email,isEditing:p&&R==="email",onClick:()=>g==null?void 0:g(),onChange:K=>E({...S,email:K}),onSave:O,onCancel:j,isSaving:w&&R==="email",placeholder:"votre@email.com",finishEdit:()=>{y(!1),M(null)}}),d.jsx(ty,{icon:d.jsx(ec,{size:18}),label:"Tlphone",value:p&&R==="phone"?S.phone:t.phone,isEditing:p&&R==="phone",onClick:()=>B("phone"),onChange:K=>E({...S,phone:K}),onSave:O,onCancel:j,isSaving:w&&R==="phone",placeholder:"77 123 45 67",type:"tel",isPhoneField:!0,finishEdit:()=>{y(!1),M(null)}})]}),!p&&d.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-3 py-4 rounded-2xl bg-red-600/5 border border-red-600/20 text-red-500 font-black text-xs uppercase tracking-widest hover:bg-red-600 hover:text-white transition-all active:scale-[0.98]",children:[d.jsx(N1,{size:16}),"Se dconnecter"]})]})},ty=({icon:t,label:e,value:i,isEditing:r,onChange:a,onClick:l,onSave:u,onCancel:h,placeholder:g,type:p="text",isSaving:y,isPhoneField:w,finishEdit:b})=>{const S=!i||i.trim()==="",E=P.useRef(null);P.useEffect(()=>{var N;r&&((N=E.current)==null||N.focus())},[r]);const A=N=>{N.stopPropagation(),u(),b==null||b()};return d.jsxs("div",{className:`flex flex-col gap-2 bg-white/[0.03] border rounded-[2rem] p-5 transition-all group ${r?"border-indigo-500 bg-white/5 shadow-[0_20px_40px_rgba(0,0,0,0.3)]":"border-white/5"} ${S&&!r?"border-orange-500/20 bg-orange-500/[0.02]":""}`,children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:`size-10 rounded-2xl flex items-center justify-center transition-colors ${r?"bg-indigo-600 text-white":"bg-white/5 text-slate-500 group-hover:text-indigo-400"}`,children:r?d.jsx(_f,{size:16}):t}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-[8px] text-slate-600 font-black uppercase tracking-widest mb-0.5",children:e}),d.jsx("div",{className:"flex items-center justify-between",children:r?d.jsx("div",{className:"flex items-center gap-2 flex-1",children:d.jsx("input",{ref:E,type:p,value:i,onChange:N=>a(N.target.value),className:"w-full bg-transparent text-white font-bold text-base focus:outline-none",placeholder:g,disabled:y})}):d.jsx("p",{className:`font-bold text-sm truncate tracking-tight transition-all ${S?"text-indigo-400 italic":"text-white"}`,children:S?"Cliquer pour ajouter":i})})]}),!r&&d.jsxs("button",{onClick:l,className:"px-4 py-2 bg-white/5 border border-white/10 rounded-xl text-[8px] font-black uppercase tracking-[0.2em] text-indigo-400 hover:bg-indigo-600 hover:text-white transition-all active:scale-95 flex items-center gap-2",children:["Modifier ",d.jsx($a,{size:10})]})]}),r&&d.jsxs("div",{className:"flex gap-2 mt-4 animate-in slide-in-from-top-2 duration-300",children:[d.jsx("button",{onClick:A,disabled:y,className:"flex-1 py-4 rounded-2xl bg-indigo-600 text-white font-black text-[10px] uppercase tracking-[0.2em] flex items-center justify-center gap-2 shadow-xl active:scale-95 transition-all",children:y?d.jsx(Lt,{size:14,className:"animate-spin"}):d.jsxs(d.Fragment,{children:[d.jsx(ly,{size:14})," Enregistrer"]})}),d.jsx("button",{onClick:N=>{N.stopPropagation(),h()},className:"px-6 bg-white/5 rounded-2xl text-slate-500 flex items-center justify-center hover:bg-white/10 active:scale-95 transition-all border border-white/5",children:d.jsx(yn,{size:16})})]})]})},x5=({favoriteIds:t,artisans:e,onBack:i,onSelectArtisan:r})=>{const a=e.filter(l=>t.includes(l.id));return d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] animate-in slide-in-from-right duration-500 pb-32 overflow-y-auto no-scrollbar",children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 sticky top-0 bg-[#0a0a0c]/90 backdrop-blur-xl z-50 border-b border-white/5 flex items-center gap-4",children:[d.jsx("button",{onClick:i,className:"size-10 bg-white/5 rounded-xl flex items-center justify-center text-white border border-white/10 hover:bg-white/10 transition-colors active:scale-90",children:d.jsx(It,{className:"w-5 h-5"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-black text-white tracking-tight uppercase",children:"Mes Favoris"}),d.jsxs("p",{className:"text-[10px] text-purple-400 font-bold uppercase tracking-widest",children:[t.length," Experts"]})]})]}),d.jsx("div",{className:"px-6 mt-8 space-y-4",children:a.length>0?a.map(l=>d.jsx("div",{onClick:()=>r(l),className:"bg-[#121214] border border-white/5 rounded-[2.5rem] p-5 relative transition-all hover:border-purple-500/20 group cursor-pointer active:scale-[0.98] shadow-2xl",children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsxs("div",{className:"relative shrink-0",children:[d.jsx("div",{className:"size-20 rounded-[1.8rem] overflow-hidden border border-white/10 group-hover:scale-105 transition-transform duration-500 shadow-xl",children:d.jsx(yt,{src:l.image,name:l.name,initialsClassName:"text-2xl font-black text-white"})}),d.jsx("div",{className:"absolute -top-1 -right-1 size-7 bg-red-500 rounded-full border-4 border-[#121214] flex items-center justify-center text-white",children:d.jsx(jl,{size:10,className:"fill-current"})}),l.available&&d.jsx("div",{className:"absolute -bottom-1 -left-1 size-4 bg-emerald-500 rounded-full border-2 border-[#121214]"})]}),d.jsxs("div",{className:"flex-1 py-1",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-black text-lg uppercase tracking-tight group-hover:text-purple-400 transition-colors leading-none mb-1",children:l.name}),d.jsxs("p",{className:"text-purple-400 text-[10px] font-black uppercase tracking-[0.1em]",children:[l.category," Expert"]})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-white/5 px-2 py-1 rounded-lg border border-white/5",children:[d.jsx(jt,{className:"size-3 text-yellow-400 fill-yellow-400"}),d.jsx("span",{className:"text-white text-[10px] font-black",children:l.rating})]})]}),d.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[d.jsx(ws,{className:"size-4 text-emerald-500"}),d.jsx("span",{className:"text-emerald-500 text-[9px] font-bold uppercase tracking-widest",children:"Vrifi par VORK"})]}),d.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[d.jsxs("div",{className:"flex items-center gap-1 text-slate-500",children:[d.jsx(di,{className:"size-3"}),d.jsx("span",{className:"text-[10px] font-bold",children:l.location})]}),d.jsx("div",{className:"h-1 w-1 bg-slate-800 rounded-full"}),d.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase",children:l.distance})]})]})]})},l.id)):d.jsxs("div",{className:"flex flex-col items-center justify-center py-40 opacity-20",children:[d.jsx(jl,{size:64,className:"mb-6 text-slate-500"}),d.jsxs("p",{className:"font-black uppercase tracking-[0.4em] text-xs text-center leading-relaxed",children:["Ta liste de favoris ",d.jsx("br",{}),"est vide"]})]})})]})},b5=({onBack:t,isDarkMode:e,setIsDarkMode:i})=>d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] animate-in slide-in-from-right duration-500 pb-32 overflow-y-auto no-scrollbar",children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 sticky top-0 bg-[#0a0a0c]/90 backdrop-blur-xl z-50 border-b border-white/5 flex items-center gap-4",children:[d.jsx("button",{onClick:t,className:"size-10 bg-white/5 rounded-xl flex items-center justify-center text-white border border-white/10 hover:bg-white/10 transition-colors active:scale-90",children:d.jsx(It,{className:"w-5 h-5"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-black text-white tracking-tight uppercase",children:"Paramtres"}),d.jsx("p",{className:"text-[10px] text-indigo-400 font-bold uppercase tracking-widest",children:"Configuration App"})]})]}),d.jsxs("div",{className:"px-6 mt-8 space-y-10",children:[d.jsxs("section",{className:"space-y-4",children:[d.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.3em] px-2",children:"Compte & Scurit"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(ai,{icon:d.jsx(dy,{size:18}),label:"Changer le mot de passe"}),d.jsx(ai,{icon:d.jsx(X_,{size:18}),label:"Mthodes de Paiement"}),d.jsx(ai,{icon:d.jsx(Gd,{size:18}),label:"Confidentialit des donnes"})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.3em] px-2",children:"Prfrences"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(ai,{icon:d.jsx(k_,{size:18}),label:"Notifications Push",toggle:!0,active:!0}),d.jsx(ai,{icon:d.jsx(O1,{size:18}),label:"Mode Sombre",toggle:!0,active:e,onToggle:()=>i(!e)}),d.jsx(ai,{icon:d.jsx(Vd,{size:18}),label:"Langue",value:"Franais"})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.3em] px-2",children:"Support & Info"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(ai,{icon:d.jsx(Ol,{size:18}),label:"Centre d'aide"}),d.jsx(ai,{icon:d.jsx(Gd,{size:18}),label:"Conditions d'utilisation"}),d.jsx(ai,{icon:d.jsx(Ol,{size:18}),label:" propos de Vork",value:"v2.1.0"})]})]}),d.jsx("section",{className:"space-y-4 pt-4",children:d.jsxs("button",{className:"w-full flex items-center gap-4 bg-red-500/5 border border-red-500/10 rounded-3xl p-5 hover:bg-red-500/10 transition-all group",children:[d.jsx("div",{className:"size-10 bg-red-500/10 rounded-2xl flex items-center justify-center text-red-500",children:d.jsx(Fa,{size:18})}),d.jsxs("div",{className:"flex-1 text-left",children:[d.jsx("p",{className:"text-xs font-black text-red-500 uppercase tracking-tight",children:"Supprimer le compte"}),d.jsx("p",{className:"text-[8px] text-red-500/40 font-bold uppercase tracking-widest mt-0.5",children:"Cette action est irrversible"})]})]})})]})]}),ai=({icon:t,label:e,value:i,toggle:r,active:a,onToggle:l})=>d.jsxs("button",{onClick:()=>!r&&console.log("Click settings item"),className:"w-full flex items-center gap-4 bg-white/[0.03] border border-white/5 rounded-3xl p-5 hover:bg-white/[0.06] transition-all group",children:[d.jsx("div",{className:"size-10 bg-white/5 rounded-2xl flex items-center justify-center text-slate-500 group-hover:text-indigo-400 transition-colors",children:t}),d.jsx("div",{className:"flex-1 text-left",children:d.jsx("p",{className:"text-sm font-bold text-white tracking-tight",children:e})}),i&&d.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mr-2",children:i}),r?d.jsx("div",{onClick:u=>{u.stopPropagation(),l==null||l()},className:`w-10 h-6 rounded-full relative transition-all duration-300 p-1 cursor-pointer ${a?"bg-indigo-600":"bg-slate-800"}`,children:d.jsx("div",{className:`size-4 bg-white rounded-full shadow-lg transition-transform duration-300 ${a?"translate-x-4":"translate-x-0"}`})}):d.jsx($a,{size:16,className:"text-slate-600 group-hover:text-slate-300 transition-colors"})]}),w5=({artisan:t})=>{const[e,i]=P.useState("public"),[r,a]=P.useState([]),[l,u]=P.useState(null),[h,g]=P.useState(""),[p,y]=P.useState(""),[w,b]=P.useState(!1),[S,E]=P.useState(!0),[A,N]=P.useState(new Set),[C,k]=P.useState(null);P.useEffect(()=>{E(!0);let M;e==="targeted"?M=wt(et(fe,"orders"),Rt("status","==","EN ATTENTE D'EXPERT"),Rt("targetedArtisans","array-contains",t.id)):M=wt(et(fe,"orders"),Rt("status","==","EN ATTENTE D'EXPERT"));const z=gn(M,async O=>{var ae;const j=O.docs.map(K=>({...rt(K.data()),id:K.id})),B=[],q=new Set,W=(t.city||"Dakar").toLowerCase().trim(),te=(t.category||"").toLowerCase().trim();for(const K of j)if((await Xl(wt(et(fe,"orders",K.id,"quotes"),Rt("artisanId","==",t.id)))).empty||q.add(K.id),e==="public"){if(K.isDirect||K.category.toLowerCase().trim()!==te)continue;const ce=(K.city||"Dakar").toLowerCase().trim(),H=(K.location||"").toLowerCase().trim(),Z=ce===W,ie=H.includes(W),ve=H.includes("dakar")||ce==="dakar";if(W==="dakar"&&!ve||W!=="dakar"&&!Z&&!ie)continue;B.push(K)}else{if(!K.isDirect||!((ae=K.targetedArtisans)!=null&&ae.includes(t.id)))continue;B.push(K)}N(q),a(B.sort((K,ee)=>(ee.createdAt||"").localeCompare(K.createdAt||""))),E(!1)});return()=>z()},[t.id,t.category,t.city,e]);const R=async()=>{if(!(!l||!h)){b(!0);try{const M={artisanId:t.id,artisanName:t.name,artisanImage:t.image||"",artisanRating:t.rating||0,price:`${h} FCFA`,description:p,timestamp:new Date().toISOString(),status:"pending"};await Ml(et(fe,"orders",l.id,"quotes"),M),u(null),g(""),y(""),alert("Votre devis a t envoy au client !")}catch(M){console.error("Error sending quote:",M),alert("Erreur lors de l'envoi du devis. Veuillez ressayer.")}finally{b(!1)}}};return d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] animate-in fade-in duration-500 pb-32",children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 sticky top-0 bg-[#0a0a0c]/80 backdrop-blur-xl z-50 border-b border-white/5",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[d.jsx("div",{className:"size-10 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:d.jsx(li,{className:"size-5 text-white animate-pulse"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-black text-white tracking-tight uppercase",children:"Le March Vork"}),d.jsx("p",{className:"text-[10px] text-indigo-400 font-bold uppercase tracking-widest",children:"Opportunits"})]})]}),d.jsxs("div",{className:"flex p-1 bg-white/5 rounded-2xl border border-white/5",children:[d.jsxs("button",{onClick:()=>i("targeted"),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all ${e==="targeted"?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:text-white"}`,children:[d.jsx(Kg,{size:14})," Pour Moi"]}),d.jsxs("button",{onClick:()=>i("public"),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all ${e==="public"?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:text-white"}`,children:[d.jsx(Vd,{size:14})," Public"]})]})]}),d.jsx("div",{className:"px-6 mt-8 space-y-6",children:S?d.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[d.jsx(Lt,{className:"size-8 text-indigo-500 animate-spin mb-4"}),d.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Chargement..."})]}):r.length>0?r.map(M=>{const z=A.has(M.id);return d.jsxs("div",{onClick:()=>u(M),className:`glass-card p-6 rounded-[2.5rem] bg-[#121214] border border-white/5 hover:border-indigo-500/30 transition-all cursor-pointer relative overflow-hidden group ${z?"opacity-60 grayscale-[0.5]":""}`,children:[M.isUrgent&&d.jsx("div",{className:"absolute top-4 right-4 px-2 py-1 bg-red-600/20 text-red-500 rounded-lg text-[8px] font-black uppercase tracking-widest border border-red-500/20 animate-pulse",children:"Urgent"}),z&&d.jsxs("div",{className:"absolute top-4 left-4 px-2 py-1 bg-emerald-500/20 text-emerald-500 rounded-lg text-[8px] font-black uppercase tracking-widest border border-emerald-500/20 flex items-center gap-1",children:[d.jsx(Tr,{size:8})," Offre envoye"]}),e==="targeted"&&d.jsx("div",{className:"absolute top-0 right-0 size-24 bg-indigo-500/10 blur-2xl rounded-full pointer-events-none"}),d.jsxs("div",{className:"flex flex-col gap-4 relative z-10 pt-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`size-12 rounded-2xl flex items-center justify-center border ${e==="targeted"?"bg-indigo-500/20 text-indigo-400 border-indigo-500/20":"bg-white/5 text-slate-400 border-white/5"}`,children:e==="targeted"?d.jsx(Tr,{size:24}):d.jsx(uy,{size:24})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-black text-lg leading-none uppercase tracking-tight",children:M.category}),d.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1 flex items-center gap-1",children:[d.jsx(di,{size:10})," ",M.city||"Dakar","  ",M.searchRadius||1," km"]})]})]}),d.jsxs("p",{className:"text-slate-400 text-sm font-medium line-clamp-2 italic leading-relaxed",children:['"',M.description,'"']}),d.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-white/5",children:[d.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[d.jsx(Ar,{size:14}),d.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:e==="targeted"?"Rservation Directe":"Offre Publique"})]}),d.jsxs("div",{className:"flex items-center text-indigo-400 font-black text-[10px] uppercase tracking-widest group-hover:translate-x-1 transition-transform",children:[z?"Voir mon offre":"Proposer un devis"," ",d.jsx($a,{size:14})]})]})]})]},M.id)}):d.jsxs("div",{className:"flex flex-col items-center justify-center py-40 opacity-20 text-center",children:[e==="targeted"?d.jsx(Kg,{size:64,className:"mb-6 text-slate-500"}):d.jsx(Vd,{size:64,className:"mb-6 text-slate-500"}),d.jsx("p",{className:"text-xs font-black uppercase tracking-[0.4em] text-slate-500",children:e==="targeted"?"Aucune rservation":"Aucune offre publique"}),d.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-600 mt-2",children:e==="targeted"?"Les clients peuvent vous rserver depuis votre profil":`Aucune mission ${t.category} disponible  ${t.city||"Dakar"}`})]})}),l&&d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end justify-center animate-in fade-in duration-300",children:[d.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>u(null)}),d.jsxs("div",{className:"relative w-full max-w-md bg-[#0a0a0c] rounded-t-[3rem] p-8 pb-safe-bottom animate-in slide-in-from-bottom duration-500 border-t border-white/10 max-h-[90vh] overflow-y-auto no-scrollbar",children:[d.jsxs("header",{className:"flex justify-between items-start mb-8",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",children:"Faire une offre"}),d.jsxs("p",{className:"text-[10px] text-indigo-400 font-black uppercase tracking-widest mt-1",children:["Missions : ",l.category]})]}),d.jsx("button",{onClick:()=>u(null),className:"size-10 bg-white/5 rounded-xl flex items-center justify-center text-slate-500 hover:text-white transition-colors",children:d.jsx(yn,{size:20})})]}),d.jsxs("div",{className:"space-y-6",children:[l.images&&l.images.length>0?d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Photos du problme"}),d.jsx("div",{className:"flex gap-3 overflow-x-auto no-scrollbar pb-2",children:l.images.map((M,z)=>d.jsxs("div",{onClick:()=>k(M),className:"relative size-20 shrink-0 rounded-2xl overflow-hidden border border-white/10 group cursor-pointer bg-[#121214]",children:[d.jsx("img",{src:M,className:"w-full h-full object-cover transition-transform group-hover:scale-110 duration-500",alt:"Preview"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-black/30 transition-all duration-300",children:d.jsx(xs,{size:16,className:"text-white drop-shadow-md"})})]},z))})]}):d.jsxs("div",{className:"flex items-center gap-2 p-4 rounded-2xl bg-white/5 border border-white/5 text-slate-500",children:[d.jsx(bs,{size:16}),d.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:"Aucune photo fournie"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Prix propos (FCFA)"}),d.jsxs("div",{className:"relative",children:[d.jsx(e1,{className:"absolute left-4 top-1/2 -translate-y-1/2 size-4 text-slate-600"}),d.jsx("input",{type:"number",value:h,onChange:M=>g(M.target.value),placeholder:"Ex: 15000",className:"w-full bg-white/5 border border-white/10 rounded-2xl py-4 pl-12 pr-4 text-white font-bold focus:outline-none focus:border-indigo-500"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Message pour le client"}),d.jsx("textarea",{value:p,onChange:M=>y(M.target.value),placeholder:"Expliquez brivement votre approche...",className:"w-full h-32 bg-white/5 border border-white/10 rounded-2xl p-4 text-white text-sm focus:outline-none focus:border-indigo-500 resize-none"})]}),d.jsx("button",{onClick:R,disabled:w||!h,className:"w-full py-5 rounded-2xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-black text-sm uppercase tracking-[0.2em] shadow-xl active:scale-[0.98] transition-all flex items-center justify-center gap-3",children:w?d.jsx(Lt,{className:"size-5 animate-spin"}):d.jsxs(d.Fragment,{children:["Envoyer le devis ",d.jsx(tc,{size:18})]})})]})]})]}),C&&d.jsxs("div",{className:"fixed inset-0 z-[200] bg-black/95 flex items-center justify-center p-4 animate-in fade-in duration-300 backdrop-blur-sm",onClick:()=>k(null),children:[d.jsx("button",{onClick:()=>k(null),className:"absolute top-6 right-6 size-10 bg-white/10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors active:scale-90",children:d.jsx(yn,{size:20})}),d.jsx("img",{src:C,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl animate-in zoom-in-95 duration-300",alt:"Full screen view",onClick:M=>M.stopPropagation()})]})]})};t_(sn,n_).catch(console.error);const _5=t=>{if(!t)return!0;try{return new URL(t),!0}catch{return!1}},S5=async(t,e,i,r)=>{const a=i==="artisan"?"artisans":"users";let l=null,u=!1;if(r.avatar&&!_5(r.avatar))throw new Error("L'URL de la photo de profil est invalide.");try{l=(await i_(sn,t,e)).user,u=!0}catch(h){if(h.code==="auth/email-already-in-use")try{l=(await sy(sn,t,e)).user,u=!1;const p=Ae(fe,a,l.uid);if((await An(p)).exists())throw new Error(`Un compte ${i==="user"?"Client":"Artisan"} existe dj avec cet email. Veuillez vous connecter.`)}catch(g){throw g.message.includes("existe dj")?g:g.code==="auth/wrong-password"||g.code==="auth/invalid-credential"?new Error("Cet email est dj utilis, mais le mot de passe ne correspond pas."):g}else throw h.code==="auth/unauthorized-domain"?new Error("UNAUTHORIZED_DOMAIN"):h}try{const h={...r,id:l.uid,uid:l.uid,email:t,role:i,createdAt:new Date().toISOString()};return await Il(Ae(fe,a,l.uid),h,{merge:!0}),{user:l,role:i,data:rt(h)}}catch(h){throw console.error("Firestore Error:",h),new Error("Erreur lors de la cration du profil.")}},E5=async(t,e,i)=>{try{const r=await sy(sn,t,e),a=r.user.uid,u=Ae(fe,i==="artisan"?"artisans":"users",a),h=await An(u);if(h.exists())return{user:r.user,role:i,data:rt({...h.data(),id:a})};{const p=Ae(fe,i==="artisan"?"users":"artisans",a);throw(await An(p)).exists()?new Error(`Ce compte est enregistr comme ${i==="artisan"?"Client":"Artisan"}. Veuillez changer de mode de connexion.`):new Error("Profil introuvable. Veuillez vous inscrire.")}}catch(r){throw console.error("Login error:",r),r.code==="auth/wrong-password"||r.code==="auth/invalid-credential"?new Error("Email ou mot de passe incorrect."):r.code==="auth/user-not-found"?new Error("Aucun compte trouv avec cet email."):r}},T5=({onLoginSuccess:t})=>{const[e,i]=P.useState("login"),[r,a]=P.useState("user"),[l,u]=P.useState(""),[h,g]=P.useState(""),[p,y]=P.useState(""),[w,b]=P.useState(""),[S,E]=P.useState("Plomberie"),[A,N]=P.useState(null),[C,k]=P.useState(null),[R,M]=P.useState(!1),[z,O]=P.useState(!1),[j,B]=P.useState(null),q=P.useRef(null),W=K=>{var ce;const ee=(ce=K.target.files)==null?void 0:ce[0];ee&&(N(ee),k(URL.createObjectURL(ee)))},te=K=>{try{return new URL(K),!0}catch{return!1}},ae=async K=>{if(K.preventDefault(),!l||!h||e==="signup"&&!p){B("Veuillez remplir les champs obligatoires.");return}O(!0),B(null);try{if(e==="signup"){let ee="";if(A){const ie=`avatars/${r==="artisan"?"artisan":"user"}/${Date.now()}_${Math.floor(Math.random()*1e3)}_profile.jpg`;try{if(ee=await Ka("vork-profilepic-bucket",ie,A),!ee||!te(ee))throw new Error("L'URL de l'image gnre est invalide.")}catch(ve){throw console.error("Avatar upload failed",ve),new Error(`Erreur lors de l'upload de la photo: ${ve.message||"Problme inconnu"}`)}}const H=await S5(l,h,r,r==="artisan"?{name:p,phone:w,category:S,avatar:ee,image:ee,available:!0,rating:5,experience:0,jobsDone:0,about:"Nouvel expert Vork prt  intervenir.",services:[S],portfolio:[],reviews:[],city:"Dakar",location:"Dakar"}:{name:p,phone:w,avatar:ee,image:ee,city:"Dakar",favorites:[]});t(H.data,r)}else{const ee=await E5(l,h,r);t(ee.data,r)}}catch(ee){ee.message==="UNAUTHORIZED_DOMAIN"?(alert("Configurez votre domaine dans la console Firebase (Authentication > Settings > Authorized Domains)."),B("Domaine non autoris. Contactez l'administrateur.")):B(ee.message||"Une erreur est survenue lors de l'authentification.")}finally{O(!1)}};return d.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-[#0a0a0c] relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[120%] h-[120%] bg-gradient-to-tr from-purple-900/20 via-transparent to-pink-900/10 blur-[120px] pointer-events-none"}),d.jsxs("div",{className:"flex flex-col items-center text-center mb-8 z-10 animate-in fade-in zoom-in duration-700",children:[d.jsx("div",{className:"size-16 bg-gradient-to-br from-[#a855f7] to-[#ec4899] rounded-[1.5rem] flex items-center justify-center mb-4 shadow-2xl",children:d.jsx(W_,{className:"size-8 text-white",fill:"white"})}),d.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter mb-1 uppercase",children:"VORK"}),d.jsx("p",{className:"text-[10px] text-slate-500 font-black uppercase tracking-[0.4em]",children:"Premium Artisan Marketplace"})]}),d.jsxs("div",{className:"w-full max-w-sm glass-card bg-[#121214]/60 rounded-[2.5rem] p-8 border border-white/10 shadow-2xl relative z-20 animate-in slide-in-from-bottom-8 duration-700",children:[d.jsxs("div",{className:"flex bg-black/40 p-1 rounded-2xl mb-6 border border-white/5",children:[d.jsx("button",{onClick:()=>{i("login"),B(null)},className:`flex-1 py-3 text-[10px] font-black uppercase tracking-widest transition-all rounded-xl ${e==="login"?"bg-[#1a1a20] text-white shadow-xl border border-white/5":"text-slate-500 hover:text-slate-300"}`,children:"Connexion"}),d.jsx("button",{onClick:()=>{i("signup"),B(null)},className:`flex-1 py-3 text-[10px] font-black uppercase tracking-widest transition-all rounded-xl ${e==="signup"?"bg-[#1a1a20] text-white shadow-xl border border-white/5":"text-slate-500 hover:text-slate-300"}`,children:"Inscription"})]}),d.jsxs("div",{className:"flex gap-2 mb-6",children:[d.jsxs("button",{onClick:()=>{a("user"),B(null)},className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest flex items-center justify-center gap-2 border transition-all ${r==="user"?"bg-purple-600 border-purple-500 text-white shadow-lg scale-105":"bg-white/5 border-white/5 text-slate-600"}`,children:[d.jsx(Ll,{size:12})," Client"]}),d.jsxs("button",{onClick:()=>{a("artisan"),B(null)},className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest flex items-center justify-center gap-2 border transition-all ${r==="artisan"?"bg-indigo-600 border-indigo-500 text-white shadow-lg scale-105":"bg-white/5 border-white/5 text-slate-600"}`,children:[d.jsx(ay,{size:12})," Artisan"]})]}),d.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[e==="signup"&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex justify-center mb-4",children:d.jsxs("div",{onClick:()=>{var K;return(K=q.current)==null?void 0:K.click()},className:"size-20 rounded-full bg-white/5 border border-dashed border-white/20 flex items-center justify-center cursor-pointer hover:border-purple-500 overflow-hidden relative",children:[C?d.jsx("img",{src:C,className:"w-full h-full object-cover",alt:"Profile preview"}):d.jsx(Cr,{size:24,className:"text-slate-600"}),d.jsx("input",{type:"file",ref:q,onChange:W,className:"hidden",accept:"image/*"})]})}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Nom Complet"}),d.jsx("input",{type:"text",value:p,onChange:K=>y(K.target.value),placeholder:"Prnom Nom",className:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-white text-xs focus:outline-none focus:border-purple-500/50 transition-all placeholder:text-slate-700"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Tlphone"}),d.jsx("input",{type:"tel",value:w,onChange:K=>b(K.target.value),placeholder:"+221 ...",className:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-white text-xs focus:outline-none focus:border-purple-500/50 transition-all placeholder:text-slate-700"})]}),r==="artisan"&&d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Spcialit"}),d.jsx("select",{value:S,onChange:K=>E(K.target.value),className:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-white text-[10px] focus:outline-none focus:border-purple-500/50 appearance-none",children:["Plomberie","lectricit","Climatisation","Peinture","Menuiserie","Maonnerie","Nettoyage"].map(K=>d.jsx("option",{value:K,className:"bg-[#121214]",children:K},K))})]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Email"}),d.jsx("input",{type:"email",value:l,onChange:K=>u(K.target.value),placeholder:"email@vork.sn",className:"w-full bg-white/5 border border-white/10 rounded-2xl py-4 px-4 text-white text-xs focus:outline-none focus:border-purple-500/50 transition-all placeholder:text-slate-700"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Mot de passe"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:R?"text":"password",value:h,onChange:K=>g(K.target.value),placeholder:"",className:"w-full bg-white/5 border border-white/10 rounded-2xl py-4 px-4 text-white text-xs focus:outline-none focus:border-purple-500/50 transition-all placeholder:text-slate-700"}),d.jsx("button",{type:"button",onClick:()=>M(!R),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-600 hover:text-white transition-colors",children:R?d.jsx(r1,{size:16}):d.jsx(o1,{size:16})})]})]}),j&&d.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-xl flex items-start gap-2 animate-in shake duration-300",children:[d.jsx(bf,{size:14,className:"text-red-500 mt-0.5 shrink-0"}),d.jsx("p",{className:"text-red-500 text-[9px] font-bold uppercase tracking-tight leading-tight",children:j})]}),d.jsx("button",{type:"submit",disabled:z,className:"w-full bg-gradient-to-r from-[#a855f7] to-[#ec4899] py-5 rounded-2xl text-white font-black text-sm uppercase tracking-[0.2em] shadow-xl active:scale-[0.98] transition-all flex items-center justify-center gap-3 mt-4 group",children:z?d.jsx(Lt,{className:"size-4 animate-spin"}):d.jsxs(d.Fragment,{children:[e==="login"?"Continuer":"Crer mon compte"," ",d.jsx(Cl,{size:14,className:"group-hover:translate-x-1 transition-transform"})]})})]})]})]})},N5=({onVerified:t,onLogout:e})=>{const[i,r]=P.useState(!1),[a,l]=P.useState(!1),[u,h]=P.useState(0),[g,p]=P.useState(null),y=sn.currentUser;P.useEffect(()=>{let S;return u>0&&(S=setInterval(()=>{h(E=>E-1)},1e3)),()=>clearInterval(S)},[u]);const w=async()=>{var S;r(!0),p(null);try{await(y==null?void 0:y.reload()),(S=sn.currentUser)!=null&&S.emailVerified?t():p("Email non encore vrifi. Veuillez vrifier votre bote de rception (et vos spams).")}catch(E){console.error(E),p("Erreur lors de la vrification. Veuillez ressayer.")}finally{r(!1)}},b=async()=>{if(!(u>0)){l(!0),p(null);try{y&&(await s_(y),h(60))}catch(S){console.error(S),p("Trop de tentatives. Veuillez patienter avant de renvoyer l'email.")}finally{l(!1)}}};return d.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-[#0a0a0c] relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[120%] h-[120%] bg-gradient-to-tr from-indigo-900/20 via-transparent to-purple-900/10 blur-[120px] pointer-events-none"}),d.jsxs("div",{className:"w-full max-w-sm glass-card bg-[#121214]/60 rounded-[3rem] p-10 border border-white/10 shadow-2xl relative z-20 animate-in fade-in zoom-in-95 duration-500 text-center",children:[d.jsx("div",{className:"size-20 bg-indigo-600/20 rounded-[2rem] flex items-center justify-center mb-8 mx-auto border border-indigo-500/20 shadow-2xl shadow-indigo-600/10",children:d.jsx(Wl,{className:"size-10 text-indigo-400 animate-bounce-subtle"})}),d.jsxs("h1",{className:"text-3xl font-black text-white tracking-tighter uppercase mb-4 leading-tight",children:["Vrifiez votre ",d.jsx("br",{}),d.jsx("span",{className:"text-indigo-500",children:"e-mail"})]}),d.jsxs("p",{className:"text-slate-400 text-sm font-medium mb-8 leading-relaxed",children:["Un lien de validation a t envoy  ",d.jsx("br",{}),d.jsx("span",{className:"text-white font-bold",children:y==null?void 0:y.email}),".",d.jsx("br",{}),"Cliquez sur le lien pour activer votre compte Vork."]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("button",{onClick:w,disabled:i,className:"w-full py-5 rounded-2xl bg-indigo-600 text-white font-black text-sm uppercase tracking-[0.2em] shadow-xl shadow-indigo-600/20 active:scale-[0.98] transition-all flex items-center justify-center gap-3",children:i?d.jsx(Lt,{className:"size-5 animate-spin"}):d.jsxs(d.Fragment,{children:[d.jsx(H_,{size:18})," J'ai vrifi mon e-mail"]})}),d.jsx("button",{onClick:b,disabled:a||u>0,className:"w-full py-5 rounded-2xl bg-white/5 text-slate-300 font-black text-[11px] uppercase tracking-[0.2em] border border-white/5 hover:bg-white/10 transition-all flex items-center justify-center gap-3 disabled:opacity-50",children:a?d.jsx(Lt,{className:"size-4 animate-spin"}):u>0?`Renvoyer (${u}s)`:d.jsxs(d.Fragment,{children:[d.jsx(tc,{size:16})," Renvoyer l'e-mail"]})})]}),g&&d.jsx("div",{className:"mt-6 p-4 bg-red-500/10 border border-red-500/20 rounded-2xl animate-in fade-in slide-in-from-top-1",children:d.jsx("p",{className:"text-red-500 text-[10px] font-bold uppercase tracking-widest leading-tight",children:g})}),d.jsxs("button",{onClick:e,className:"mt-10 text-slate-600 hover:text-white transition-colors text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 mx-auto",children:[d.jsx(N_,{size:12})," Se dconnecter"]})]})]})},C5=({onBack:t,onSuccess:e,userRole:i})=>{const[r,a]=P.useState(""),[l,u]=P.useState(""),[h,g]=P.useState(!1),[p,y]=P.useState(null),[w,b]=P.useState("form"),S=async E=>{if(E.preventDefault(),!r||!l){y("Veuillez remplir tous les champs.");return}g(!0),y(null);try{const A=sn.currentUser;if(!A||!A.email)throw new Error("Utilisateur non connect");const N=r_.credential(A.email,l);await a_(A,N),await o_(A,r),await Jt(Ae(fe,i==="artisan"?"artisans":"users",A.uid),{email:r,updatedAt:new Date().toISOString()}),b("success")}catch(A){console.error("Email update error:",A);let N="Une erreur est survenue.";A.code==="auth/wrong-password"&&(N="Mot de passe actuel incorrect."),A.code==="auth/invalid-email"&&(N="Format d'email invalide."),A.code==="auth/email-already-in-use"&&(N="Cet email est dj utilis."),A.code==="auth/requires-recent-login"&&(N="Session expire. Reconnectez-vous."),y(N)}finally{g(!1)}};return w==="success"?d.jsx("div",{className:"min-h-screen bg-[#0a0a0c] flex flex-col items-center justify-center p-6 animate-in fade-in duration-500",children:d.jsxs("div",{className:"w-full max-w-sm glass-card bg-[#121214]/60 rounded-[3rem] p-10 border border-white/10 shadow-2xl text-center",children:[d.jsx("div",{className:"size-20 bg-emerald-500/20 rounded-[2rem] flex items-center justify-center mb-8 mx-auto border border-emerald-500/20",children:d.jsx(tc,{className:"size-10 text-emerald-400 animate-bounce"})}),d.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter mb-4",children:"Lien envoy !"}),d.jsxs("p",{className:"text-slate-400 text-sm font-medium mb-8 leading-relaxed",children:["Nous avons envoy un lien de confirmation  ",d.jsx("br",{}),d.jsx("span",{className:"text-white font-bold",children:r}),".",d.jsx("br",{}),"Votre e-mail sera mis  jour ds que vous aurez valid ce lien."]}),d.jsx("button",{onClick:()=>e(r),className:"w-full py-5 rounded-2xl bg-indigo-600 text-white font-black text-sm uppercase tracking-[0.2em] shadow-xl active:scale-95 transition-all",children:"Retour au profil"})]})}):d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] flex flex-col animate-in slide-in-from-right duration-500",children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 flex items-center gap-4 sticky top-0 bg-[#0a0a0c]/90 backdrop-blur-xl z-50 border-b border-white/5",children:[d.jsx("button",{onClick:t,className:"p-2 bg-white/5 rounded-xl border border-white/10 text-white active:scale-90 transition-transform",children:d.jsx(It,{className:"size-6"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-black text-white uppercase tracking-tight",children:"E-mail"}),d.jsx("p",{className:"text-[10px] text-indigo-400 font-bold uppercase tracking-widest text-left",children:"Scurit & Profil"})]})]}),d.jsxs("div",{className:"px-6 pt-8 max-w-sm mx-auto w-full",children:[d.jsxs("div",{className:"mb-10 text-center",children:[d.jsx("div",{className:"size-16 bg-indigo-600/10 rounded-2xl flex items-center justify-center mb-4 mx-auto border border-indigo-500/20",children:d.jsx(ws,{className:"size-8 text-indigo-400"})}),d.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight mb-2",children:"Changer d'adresse"}),d.jsx("p",{className:"text-slate-500 text-xs font-medium",children:"Pour votre scurit, nous devons vrifier votre identit avant de modifier votre e-mail."})]}),d.jsxs("form",{onSubmit:S,className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Nouvel e-mail"}),d.jsxs("div",{className:"relative",children:[d.jsx(Wl,{className:"absolute left-4 top-1/2 -translate-y-1/2 size-4 text-slate-600"}),d.jsx("input",{type:"email",value:r,onChange:E=>a(E.target.value),placeholder:"nouveau@email.com",className:"w-full bg-white/5 border border-white/10 rounded-2xl py-4 pl-12 pr-4 text-white text-sm focus:outline-none focus:border-indigo-500/50 transition-all"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Mot de passe actuel"}),d.jsxs("div",{className:"relative",children:[d.jsx(dy,{className:"absolute left-4 top-1/2 -translate-y-1/2 size-4 text-slate-600"}),d.jsx("input",{type:"password",value:l,onChange:E=>u(E.target.value),placeholder:"",className:"w-full bg-white/5 border border-white/10 rounded-2xl py-4 pl-12 pr-4 text-white text-sm focus:outline-none focus:border-indigo-500/50 transition-all"})]})]}),p&&d.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-500/10 border border-red-500/20 rounded-2xl animate-in shake duration-300",children:[d.jsx(bf,{className:"size-4 text-red-500 shrink-0"}),d.jsx("p",{className:"text-red-500 text-[10px] font-bold uppercase tracking-widest",children:p})]}),d.jsx("button",{type:"submit",disabled:h,className:"w-full py-5 rounded-2xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-black text-sm uppercase tracking-[0.2em] shadow-xl active:scale-[0.98] transition-all flex items-center justify-center gap-3 mt-4",children:h?d.jsx(Lt,{className:"size-5 animate-spin"}):d.jsxs(d.Fragment,{children:["Mettre  jour ",d.jsx(It,{className:"size-4 rotate-180"})]})})]})]})]})},A5=({orders:t,onBack:e,onViewOrder:i})=>d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] pb-24 animate-in slide-in-from-right duration-500",children:[d.jsxs("header",{className:"px-6 pt-12 pb-6 flex items-center gap-4 sticky top-0 bg-[#0a0a0c]/90 backdrop-blur-xl z-50 border-b border-white/5",children:[d.jsx("button",{onClick:e,className:"p-2 bg-white/5 rounded-xl border border-white/10 text-white hover:bg-white/10 transition-colors",children:d.jsx(It,{className:"w-5 h-5"})}),d.jsx("h1",{className:"text-xl font-black text-white uppercase tracking-tight",children:"Historique"})]}),d.jsx("div",{className:"px-6 py-6",children:t.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center py-40 opacity-20",children:[d.jsx(p1,{size:64,className:"mb-6 text-slate-500"}),d.jsxs("p",{className:"font-black uppercase tracking-[0.4em] text-xs text-center leading-relaxed",children:["Aucune mission ",d.jsx("br",{}),"termine"]})]}):d.jsx("div",{className:"space-y-4",children:t.map(r=>d.jsxs("div",{onClick:()=>i(r),className:"bg-[#121214] border border-white/5 rounded-[2.5rem] p-6 relative group cursor-pointer active:scale-[0.98] transition-all shadow-2xl",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"size-14 rounded-2xl overflow-hidden border border-white/10",children:d.jsx(yt,{src:r.artisanImage,name:r.artisanName||"Artisan",initialsClassName:"text-lg font-black text-white"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-black text-base uppercase tracking-tight mb-1",children:r.category}),d.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[d.jsx(oy,{size:12}),d.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:r.date})]})]})]}),d.jsx("div",{className:"bg-emerald-500/10 border border-emerald-500/20 px-3 py-1.5 rounded-xl",children:d.jsx("span",{className:"text-[10px] text-emerald-400 font-black uppercase tracking-widest",children:"Termin"})})]}),d.jsxs("div",{className:"flex items-center gap-4 py-4 border-y border-white/5 mb-4",children:[d.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[d.jsx(di,{size:14,className:"text-slate-600"}),d.jsx("span",{className:"text-[11px] text-slate-400 font-bold truncate",children:r.location})]}),d.jsx("div",{className:"text-white font-black text-sm",children:r.assignedPrice||"Vork Pay"})]}),r.finalReview&&d.jsxs("div",{className:"flex items-center gap-2 bg-yellow-400/5 border border-yellow-400/10 p-3 rounded-2xl",children:[d.jsx(jt,{size:14,className:"text-yellow-400 fill-yellow-400"}),d.jsxs("span",{className:"text-[11px] text-yellow-500 font-black uppercase tracking-widest",children:[r.finalReview.rating," / 5"]}),d.jsxs("p",{className:"text-[10px] text-slate-500 font-medium italic truncate flex-1 ml-2",children:['"',r.finalReview.comment,'"']})]})]},r.id))})})]}),k5=({activeView:t,setView:e,onPlusClick:i,userRole:r})=>["urgent","create-order","order-detail","generic-form","chat-detail","artisan-detail","category-detail","all-categories","portfolio","work-detail","reviews","favorites-list","settings","update-email","notifications","artisan-history"].includes(t)?null:d.jsx("nav",{className:"fixed bottom-0 left-0 right-0 glass border-t border-white/5 safe-bottom z-50 rounded-t-[20px]",children:d.jsx("div",{className:"flex justify-around items-center h-20 px-4",children:r==="artisan"?d.jsxs(d.Fragment,{children:[d.jsx(qi,{icon:d.jsx(Ul,{}),label:"Stats",active:t==="home",onClick:()=>e("home")}),d.jsx(qi,{icon:d.jsx(li,{}),label:"March",active:t==="marketplace",onClick:()=>e("marketplace")}),d.jsx(qi,{icon:d.jsx(Zl,{}),label:"Messages",active:t==="chats",onClick:()=>{e("chats")}}),d.jsx(qi,{icon:d.jsx(Ll,{}),label:"Profil",active:t==="profile",onClick:()=>e("profile")})]}):d.jsxs(d.Fragment,{children:[d.jsx(qi,{icon:d.jsx(Ul,{}),label:"Accueil",active:t==="home",onClick:()=>e("home")}),d.jsx(qi,{icon:d.jsx(ci,{}),label:"Chercher",active:t==="search",onClick:()=>e("search")}),d.jsxs("div",{className:"relative -top-8 group",children:[d.jsx("div",{className:"absolute inset-0 bg-purple-500/40 blur-xl rounded-full opacity-60 group-hover:opacity-100 transition-opacity"}),d.jsx("button",{onClick:i,className:"relative w-16 h-16 rounded-full bg-gradient-to-br from-[#a855f7] to-[#ec4899] shadow-2xl flex items-center justify-center text-white border-4 border-[#0a0a0c] transform transition hover:scale-105 active:scale-95",children:d.jsx($_,{className:"w-8 h-8"})})]}),d.jsx(qi,{icon:d.jsx(oy,{}),label:"Missions",active:t==="bookings",onClick:()=>e("bookings")}),d.jsx(qi,{icon:d.jsx(Ll,{}),label:"Moi",active:t==="profile",onClick:()=>e("profile")})]})})}),qi=({icon:t,label:e,active:i,onClick:r})=>d.jsxs("button",{onClick:r,className:`flex flex-col items-center gap-1 transition-all ${i?"text-[#34d399]":"text-slate-500 hover:text-slate-300"}`,children:[d.jsxs("div",{className:"relative",children:[w_.cloneElement(t,{size:28,className:i?"fill-current":""}),i&&d.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-[#34d399] rounded-full shadow-[0_0_5px_#34d399]"})]}),d.jsx("span",{className:`text-[10px] font-bold mt-0.5 tracking-tight ${i?"text-[#34d399]":""}`,children:e})]}),R5=(t,e)=>{const[i,r]=P.useState("prompt"),[a,l]=P.useState(null),u=P.useRef(null),h=P.useRef(null),g=50,p=P.useCallback((w,b,S=!1)=>{if(!t||!e)return;const E={lat:w,lng:b};!S&&u.current&&ql(u.current,E)<g||(e==="artisan"?LS(t,w,b):OS(t,w,b),u.current=E)},[t,e]),y=P.useCallback(()=>{if(!("geolocation"in navigator))return;const w=S=>{const{latitude:E,longitude:A}=S.coords;l({lat:E,lng:A}),p(E,A,!0),console.log(" Location forced refresh success")},b=S=>{navigator.geolocation.getCurrentPosition(w,E=>console.error("Location refresh failed completely",E.message),{enableHighAccuracy:!1,timeout:2e4,maximumAge:6e4})};navigator.geolocation.getCurrentPosition(w,b,{enableHighAccuracy:!0,timeout:15e3,maximumAge:5e3})},[p]);return P.useEffect(()=>{if(!t||!e)return;if(!("geolocation"in navigator)){console.warn("Geolocation is not supported by this browser.");return}const w=E=>{r("granted");const{latitude:A,longitude:N}=E.coords;l({lat:A,lng:N}),p(A,N,!1)},b=E=>{E.code!==E.TIMEOUT&&E.code===E.PERMISSION_DENIED&&r("denied")},S={enableHighAccuracy:!0,timeout:45e3,maximumAge:1e4};return h.current=navigator.geolocation.watchPosition(w,b,S),()=>{h.current!==null&&navigator.geolocation.clearWatch(h.current)}},[t,e,p]),{permissionStatus:i,location:a,refreshLocation:y}},I5=()=>{const[t,e]=P.useState("home"),[i,r]=P.useState([]),[a,l]=P.useState([]),[u,h]=P.useState([]),[g,p]=P.useState(!0),[y,w]=P.useState(!0),[b,S]=P.useState(()=>{const we=localStorage.getItem("vork-theme");return we===null?!0:we==="dark"}),[E,A]=P.useState(null),[N,C]=P.useState(null),[k,R]=P.useState("user"),[M,z]=P.useState(!1),[O,j]=P.useState([]),{location:B,refreshLocation:q}=R5(N==null?void 0:N.id,k),[W,te]=P.useState([]),[ae,K]=P.useState(null),[ee,ce]=P.useState(null),[H,Z]=P.useState(null),[ie,ve]=P.useState(null),[De,U]=P.useState(null),[X,ne]=P.useState("home"),[oe,xe]=P.useState("home"),[Ee,Ie]=P.useState("home"),[tt,Ke]=P.useState("home"),[Dn,mi]=P.useState("portfolio"),[$i,Fi]=P.useState("Tous"),[bn,qn]=P.useState("Tous"),[pe,wn]=P.useState("Tous"),Vn=P.useCallback(async(we,je)=>{try{let ct=await An(Ae(fe,je==="artisan"?"artisans":"users",we));if(!ct.exists()){const at=je==="user"?"artisan":"user";ct=await An(Ae(fe,at==="artisan"?"artisans":"users",we)),ct.exists()&&R(at)}if(ct.exists()){const at=rt(ct.data()),mt={...at,id:ct.id};mt.image=$d(mt.image||mt.avatar),C(mt),j(at.favorites||[])}}catch(We){console.error("Error loading profile:",We)}},[]);return P.useEffect(()=>{const we=l_(sn,async je=>{A(je),je?(je.emailVerified,z(!1),await Vn(je.uid,k)):C(null),w(!1)});return()=>we()},[k,Vn]),P.useEffect(()=>{if(!(N!=null&&N.id))return;p(!0);const we=wt(et(fe,"artisans"),kn("createdAt","desc"),Oa(20)),je=gn(we,Ue=>{r(Ue.docs.map(Oe=>{const Ve=rt(Oe.data()),Ji=$d(Ve.image||Ve.avatar);return{...Ve,id:Oe.id,image:Ji}})),p(!1)}),We=k==="artisan"?wt(et(fe,"orders"),Ww(Rt("artisanId","==",N.id),Rt("targetedArtisans","array-contains",N.id))):wt(et(fe,"orders"),Rt("userId","==",N.id)),ct=gn(We,Ue=>{const Oe=Ue.docs.map(Ve=>({...rt(Ve.data()),id:Ve.id})).sort((Ve,Ji)=>new Date(Ji.createdAt||0).getTime()-new Date(Ve.createdAt||0).getTime());l(Oe)}),at=k==="artisan"?wt(et(fe,"archivedOrders"),Rt("artisanId","==",N.id)):wt(et(fe,"archivedOrders"),Rt("userId","==",N.id)),mt=gn(at,Ue=>{const Oe=Ue.docs.map(Ve=>({...rt(Ve.data()),id:Ve.id})).sort((Ve,Ji)=>new Date(Ji.createdAt||0).getTime()-new Date(Ve.createdAt||0).getTime());h(Oe)}),Un=k==="artisan"?wt(et(fe,"chats"),Rt("artisanId","==",N.id)):wt(et(fe,"chats"),Rt("userId","==",N.id)),rn=gn(Un,Ue=>{te(Ue.docs.map(Oe=>({...rt(Oe.data()),id:Oe.id})))});return()=>{je(),ct(),rn(),mt()}},[N==null?void 0:N.id,k]),P.useEffect(()=>{document.documentElement.classList.toggle("dark",b),document.documentElement.classList.toggle("light",!b),localStorage.setItem("vork-theme",b?"dark":"light")},[b]),{view:t,setView:e,artisans:i,orders:a,archivedOrders:u,loading:g,authLoading:y,isDarkMode:b,setIsDarkMode:S,authUser:E,setAuthUser:A,userProfile:N,setUserProfile:C,userRole:k,setUserRole:R,showVerifyEmail:M,setShowVerifyEmail:z,favorites:O,setFavorites:j,chats:W,setChats:te,selectedChat:ae,setSelectedChat:K,selectedArtisan:ee,setSelectedArtisan:ce,selectedOrder:H,setSelectedOrder:Z,selectedCategory:ie,setSelectedCategory:ve,selectedPortfolioItem:De,setSelectedPortfolioItem:U,categorySource:X,setCategorySource:ne,artisanSource:oe,setArtisanSource:xe,allCategoriesSource:Ee,setAllCategoriesSource:Ie,chatSource:tt,setChatSource:Ke,workSource:Dn,setWorkSource:mi,searchFilterCategory:$i,setSearchFilterCategory:Fi,searchFilterRating:bn,setSearchFilterRating:qn,reviewRatingFilter:pe,setReviewRatingFilter:wn,loadUserProfile:Vn,handleLogout:async()=>{try{await c_(sn),C(null),e("home")}catch(we){console.error("Logout failed",we)}},openChatWithArtisan:async we=>{if(!N)return;let je,We,ct,at,mt,Un;if(k==="artisan"){if(je=we.id||"unknown",mt=we.name||"Client",Un=we.image||we.avatar||"",je!=="unknown"&&mt==="Client")try{const Ue=await An(Ae(fe,"users",je));if(Ue.exists()){const Oe=Ue.data();mt=Oe.name||"Client",Un=Oe.avatar||Oe.image||""}}catch(Ue){console.warn("Could not fetch user profile for chat",Ue)}We=N.id,ct=N.name,at=N.avatar||N.image}else je=N.id,mt=N.name,Un=N.avatar||N.image,We=we.id||"unknown",ct=we.name||"Expert",at=we.image||"";const rn=`${je}_${We}`;try{const Ue=await An(Ae(fe,"chats",rn));if(Ue.exists()){const Oe=rt(Ue.data()),Ve={...Oe,id:Ue.id,userName:mt||Oe.userName,userImage:Un||Oe.userImage,artisanName:ct||Oe.artisanName,artisanImage:at||Oe.artisanImage};mt&&mt!==Oe.userName&&Jt(Ae(fe,"chats",rn),{userName:mt,userImage:Un}),K(Ve),e("chat-detail")}else{const Oe={id:rn,userId:je,userName:mt||"Client",userImage:Un||"",artisanId:We,artisanName:ct||"Expert",artisanImage:at||"",lastMessage:"Dbut de la conversation",timestamp:new Date().toISOString(),unreadCount:0,isOnline:!0};await Il(Ae(fe,"chats",rn),Oe),K(Oe),e("chat-detail")}}catch(Ue){console.error("Error opening chat:",Ue)}},handleOpenArtisanProfile:async we=>{if(!we||we==="unknown")return;const je=i.find(We=>We.id===we);if(xe(t==="chat-detail"?"chats":t==="order-detail"?"bookings":t),je)ce(je),e("artisan-detail");else{const We=await An(Ae(fe,"artisans",we));if(We.exists()){const at={...rt(We.data()),id:We.id};!at.image&&at.avatar&&(at.image=at.avatar),ce(at),e("artisan-detail")}}},handleCreateOrder:async we=>{if(!N)return;let je=we.targetedArtisans||[];je.length===0&&(je=await Rx(we.category,1));const We={...we,userId:N.id,targetedArtisans:Array.isArray(je)?je:[],searchRadius:1,createdAt:new Date().toISOString()};await Il(Ae(fe,"orders",we.id),We),e("bookings")},handleDeleteOrder:async we=>{if(we.status!=="EN ATTENTE D'EXPERT"){alert("Impossible de supprimer une commande accepte ou termine.");return}try{await Og(Ae(Ae(fe,"orders",we.id).parent,we.id)),await Og(Ae(fe,"orders",we.id))}catch(je){console.error("Error deleting order:",je),alert("Erreur lors de la suppression de la commande.")}},toggleFavorite:async we=>{if(!N)return;const je=O.includes(we)?O.filter(ct=>ct!==we):[...O,we];j(je);const We=k==="artisan"?"artisans":"users";try{await Jt(Ae(fe,We,N.id),{favorites:je})}catch(ct){console.warn("Fav update failed",ct)}},toggleRole:()=>{const we=k==="user"?"artisan":"user";R(we),Vn(E.uid,we),e("home")},userLocation:B,refreshLocation:q}},M5=()=>{const{view:t,setView:e,artisans:i,orders:r,archivedOrders:a,authLoading:l,isDarkMode:u,setIsDarkMode:h,authUser:g,userProfile:p,setUserProfile:y,userRole:w,setUserRole:b,showVerifyEmail:S,setShowVerifyEmail:E,favorites:A,chats:N,selectedChat:C,setSelectedChat:k,selectedArtisan:R,setSelectedArtisan:M,selectedOrder:z,setSelectedOrder:O,selectedCategory:j,setSelectedCategory:B,selectedPortfolioItem:q,setSelectedPortfolioItem:W,categorySource:te,setCategorySource:ae,artisanSource:K,setArtisanSource:ee,allCategoriesSource:ce,setAllCategoriesSource:H,chatSource:Z,setChatSource:ie,workSource:ve,setWorkSource:De,searchFilterCategory:U,setSearchFilterCategory:X,searchFilterRating:ne,setSearchFilterRating:oe,reviewRatingFilter:xe,setReviewRatingFilter:Ee,handleLogout:Ie,openChatWithArtisan:tt,handleOpenArtisanProfile:Ke,handleCreateOrder:Dn,toggleFavorite:mi,toggleRole:$i,userLocation:Fi,handleDeleteOrder:bn}=I5();P.useEffect(()=>{window.scrollTo(0,0)},[t]);const qn=z?r.find(pe=>pe.id===z.id)||a.find(pe=>pe.id===z.id)||z:null;return l?d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] flex flex-col items-center justify-center",children:[d.jsx("div",{className:"size-20 bg-indigo-600 rounded-[2rem] flex items-center justify-center animate-pulse mb-6 shadow-2xl",children:d.jsx(Dl,{className:"size-10 text-white"})}),d.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-widest animate-pulse",children:"VORK"})]}):!g||!p?d.jsx(T5,{onLoginSuccess:(pe,wn,Vn)=>{const jn={...pe};!jn.image&&jn.avatar&&(jn.image=jn.avatar),y(jn),b(wn),Vn&&E(!0)}}):S?d.jsx(N5,{onVerified:()=>E(!1),onLogout:Ie}):d.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] text-slate-200 transition-colors duration-500",children:[d.jsxs("header",{className:`px-6 pt-10 pb-4 sticky top-0 z-40 bg-[#0a0a0c]/80 backdrop-blur-xl border-b border-white/5 flex justify-between items-center ${["artisan-detail","urgent","create-order","order-detail","all-categories","category-detail","search","portfolio","work-detail","reviews","chat-detail","chats","favorites-list","settings","marketplace","update-email","artisan-history"].includes(t)?"hidden":""}`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:d.jsx(Dl,{className:"w-6 h-6 text-white"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-lg font-black tracking-tighter text-white uppercase leading-none",children:"VORK"}),d.jsxs("p",{className:"text-[10px] text-indigo-400 font-black uppercase tracking-widest mt-1",children:[w==="artisan"?"EXPERT":"CLIENT","  DAKAR"]})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:$i,className:"px-3 py-2 bg-white/5 rounded-xl text-[8px] font-black uppercase tracking-widest text-slate-400 border border-white/5 hover:text-white transition-colors",children:["Vers ",w==="user"?"Artisan":"Client"]}),d.jsxs("button",{onClick:()=>{ie(t),e("chats")},className:"w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center relative active:scale-90 transition-all",children:[d.jsx(Zl,{className:"w-5 h-5 text-slate-400"}),N.some(pe=>(pe.unreadCount||0)>0)&&d.jsx("div",{className:"absolute top-2 right-2 size-2 bg-purple-500 rounded-full animate-ping"})]}),d.jsx("div",{onClick:()=>e("profile"),className:"w-10 h-10 bg-gradient-to-tr from-indigo-500 to-purple-500 rounded-xl border border-white/10 flex items-center justify-center overflow-hidden shadow-lg cursor-pointer",children:d.jsx(yt,{src:p==null?void 0:p.avatar,name:(p==null?void 0:p.name)||"Vorker",className:"w-full h-full",initialsClassName:"text-[10px] font-black text-white"})})]})]}),d.jsxs("main",{className:"max-w-md mx-auto relative min-h-screen",children:[t==="home"&&(w==="artisan"?d.jsx(HS,{artisan:p,activeOrders:r.filter(pe=>pe.status==="En cours"||pe.status==="Accept"),archivedOrders:a.filter(pe=>pe.artisanId===p.id),onViewOrder:pe=>{O(pe),e("order-detail")},setView:e}):d.jsx(VS,{userRole:w||"user",setView:e,artisans:i,userLocation:Fi,setSelectedArtisan:pe=>{M(pe),ee("home"),e("artisan-detail")},openCategory:pe=>{B(pe),ae("home"),e("create-order")},onReserve:pe=>{M(pe),B(Nr.find(wn=>wn.name===pe.category)),ae("home"),e("create-order")},onOpenAllCategories:()=>{H("home"),e("all-categories")}})),t==="marketplace"&&w==="artisan"&&p&&d.jsx(w5,{artisan:p}),t==="all-categories"&&d.jsx(JS,{onBack:()=>e(ce),onSelectCategory:pe=>{B(pe),ae("all-categories"),e("create-order")}}),t==="category-detail"&&j&&d.jsx(KS,{category:j,artisans:i,onBack:()=>e(te),onSelectArtisan:pe=>{M(pe),ee("category-detail"),e("artisan-detail")}}),t==="search"&&d.jsx(BS,{setView:e,artisans:i,userLocation:Fi,setSelectedArtisan:pe=>{M(pe),ee("search"),e("artisan-detail")},searchFilterCategory:U,setSearchFilterCategory:X,searchFilterRating:ne,setSearchFilterRating:oe}),t==="chats"&&d.jsx(g5,{chats:N,onSelectChat:pe=>{k(pe),e("chat-detail")},onBack:()=>e(Z),backLabel:t,onHome:()=>e("home")}),t==="chat-detail"&&C&&d.jsx(v5,{chat:C,onBack:()=>e("chats"),onOpenProfile:Ke}),t==="bookings"&&d.jsx(r5,{orders:r,archivedOrders:a,setView:e,onSelectOrder:pe=>{O(pe),e("order-detail")},onOpenChat:tt,onDeleteOrder:bn}),t==="order-detail"&&qn&&(w==="artisan"?d.jsx(m5,{order:qn,onBack:()=>e("home"),onOpenChat:tt}):d.jsx(p5,{order:qn,onBack:()=>e("bookings"),onUpdateOrder:async(pe,wn)=>{await Jt(Ae(fe,"orders",pe),wn)},onOpenChat:tt,onOpenArtisanProfile:Ke})),t==="create-order"&&j&&d.jsx(u5,{category:j,preSelectedArtisan:R&&(te==="artisan-detail"||te==="home")?R:void 0,hideArtisanName:te==="home",onBack:()=>e(te),onSubmit:Dn}),t==="artisan-detail"&&R&&d.jsx(FS,{art:R,setView:e,onBack:()=>e(K),onOpenChats:()=>tt(R),reviewRatingFilter:xe,setReviewRatingFilter:Ee,onSelectWork:pe=>{W(pe),De("artisan-detail"),e("work-detail")},onReserve:pe=>{M(pe),B(Nr.find(wn=>wn.name===pe.category)),ae("artisan-detail"),e("create-order")},isFavorite:A.includes(R.id),onToggleFavorite:()=>mi(R.id)}),t==="portfolio"&&R&&d.jsx(YS,{art:R,onBack:()=>e("artisan-detail"),onSelectWork:pe=>{W(pe),De("portfolio"),e("work-detail")}}),t==="work-detail"&&q&&R&&d.jsx(XS,{item:q,art:R,onBack:()=>e(ve)}),t==="reviews"&&R&&d.jsx(QS,{art:R,onBack:()=>e("artisan-detail")}),t==="urgent"&&d.jsx(s5,{onClose:()=>e("home"),onAddOrder:Dn}),t==="profile"&&p&&d.jsx(y5,{user:p,setUser:y,onLogout:Ie,favoritesCount:A.length,onOpenFavorites:()=>e("favorites-list"),onOpenSettings:()=>e("settings"),isDarkMode:u,setIsDarkMode:h,onUpdateEmail:()=>e("update-email")}),t==="favorites-list"&&d.jsx(x5,{favoriteIds:A,artisans:i,onBack:()=>e("profile"),onSelectArtisan:pe=>{M(pe),ee("favorites-list"),e("artisan-detail")}}),t==="settings"&&d.jsx(b5,{onBack:()=>e("profile"),isDarkMode:u,setIsDarkMode:h}),t==="update-email"&&d.jsx(C5,{onBack:()=>e("profile"),onSuccess:pe=>{y({...p,email:pe}),e("profile")},userRole:w}),t==="artisan-history"&&d.jsx(A5,{orders:a.filter(pe=>pe.artisanId===p.id),onBack:()=>e("home"),onViewOrder:pe=>{O(pe),e("order-detail")}})]}),d.jsx(k5,{activeView:t,setView:e,onPlusClick:()=>{H(t),e("all-categories")},userRole:w||void 0})]})},ny=document.getElementById("root");ny&&b_.createRoot(ny).render(d.jsx(M5,{}));
